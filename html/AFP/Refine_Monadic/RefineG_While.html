<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory RefineG_While</title>
</head>


<body>
<div class="head">
<h1>Theory RefineG_While</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Generic While-Combinator›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="RefineG_While.html"><span>RefineG_While</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
  </span><a href="RefineG_Recursion.html"><span>RefineG_Recursion</span></a><span>
  </span><span class="quoted"><span>"</span><a href="HOL-Library.While_Combinator.html"><span>HOL-Library.While_Combinator</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.WHILEI_body_def|fact"><span class="entity_def" id="RefineG_While.WHILEI_body_def|thm"><span class="entity_def" id="RefineG_While.WHILEI_body_def_raw|axiom"><span>definition</span></span></span></span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="RefineG_While.WHILEI_body|const"><span>WHILEI_body</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> 
  </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>W</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> 
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>W</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.top_class.top|const"><span>top</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.iWHILEI_def|fact"><span class="entity_def" id="RefineG_While.iWHILEI_def|thm"><span class="entity_def" id="RefineG_While.iWHILEI_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="RefineG_While.iWHILEI|const"><span>iWHILEI</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC|const"><span>REC</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body|const"><span>WHILEI_body</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.iWHILEIT_def|fact"><span class="entity_def" id="RefineG_While.iWHILEIT_def|thm"><span class="entity_def" id="RefineG_While.iWHILEIT_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="RefineG_While.iWHILEIT|const"><span>iWHILEIT</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.RECT|const"><span>RECT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body|const"><span>WHILEI_body</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>I</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s0</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.iWHILE_def|fact"><span class="entity_def" id="RefineG_While.iWHILE_def|thm"><span class="entity_def" id="RefineG_While.iWHILE_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="RefineG_While.iWHILE|const"><span>iWHILE</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILEI|const"><span>iWHILEI</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.iWHILET_def|fact"><span class="entity_def" id="RefineG_While.iWHILET_def|thm"><span class="entity_def" id="RefineG_While.iWHILET_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="RefineG_While.iWHILET|const"><span>iWHILET</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILEIT|const"><span>iWHILEIT</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>bind</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>return</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="comment1"><span>(* TODO: Move to refine_mono_prover*)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.mono_prover_monoI|fact"><span class="entity_def" id="RefineG_While.mono_prover_monoI|thm"><span>mono_prover_monoI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="AFP/Refine_Monadic/refine_mono_prover.ML.html#Refine_Mono_Prover.refine_mono|attribute"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.monotone|const"><span>monotone</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Partial_Function.html#Partial_Function.fun_ord|const"><span>fun_ord</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Partial_Function.html#Partial_Function.fun_ord|const"><span>fun_ord</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.order_class.mono|const"><span>mono</span></a><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_fun_def|fact"><span>le_fun_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Partial_Function.html#Partial_Function.fun_ord_def|fact"><span>fun_ord_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.generic_WHILE.intro|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.intro|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_def|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE|locale"><span class="entity_def" id="RefineG_While.generic_WHILE|const"><span>generic_WHILE</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'m</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span class="main"><span>⇒</span></span><span class="tfree"><span>'m</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'m</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice|class"><span>complete_lattice</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'m</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>WHILE</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.imonad1|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.imonad1|thm"><span class="entity_def" id="offset_919..926">imonad1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>return</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.imonad2|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.imonad2|thm"><span class="entity_def" id="offset_964..971">imonad2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.imonad3|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.imonad3|thm"><span class="entity_def" id="offset_1003..1010">imonad3</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>g</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>g</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.ibind_mono_ge|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.ibind_mono_ge|thm"><span class="entity_def" id="offset_1070..1083">ibind_mono_ge</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>m'</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>m'</span></span><span> </span><span class="free"><span>f'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.ibind_mono|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.ibind_mono|thm"><span class="entity_def" id="offset_1177..1187">ibind_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>m'</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>m'</span></span><span> </span><span class="free"><span>f'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_eq|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_eq|thm"><span class="entity_def" id="offset_1269..1279">WHILEIT_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEIT</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILEIT|const"><span>iWHILEIT</span></a><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>return</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_eq|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_eq|thm"><span class="entity_def" id="offset_1324..1333">WHILEI_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEI</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILEI|const"><span>iWHILEI</span></a><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>return</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILET_eq|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILET_eq|thm"><span class="entity_def" id="offset_1376..1385">WHILET_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILET</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILET|const"><span>iWHILET</span></a><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>return</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_eq|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_eq|thm"><span class="entity_def" id="offset_1428..1436">WHILE_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILE</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILE|const"><span>iWHILE</span></a><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>return</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_def|thm"><span class="entity_def" id="offset_1483..1494">WHILEIT_def</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1269..1279"><span>WHILEIT_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILEIT_def|fact"><span>iWHILEIT_def</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_def|thm"><span class="entity_def" id="offset_1550..1560">WHILEI_def</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1324..1333"><span>WHILEI_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILEI_def|fact"><span>iWHILEI_def</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILET_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILET_def|thm"><span class="entity_def" id="offset_1614..1624">WHILET_def</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1376..1385"><span>WHILET_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILET_def|fact"><span>iWHILET_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1269..1279"><span>WHILEIT_eq</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_def|thm"><span class="entity_def" id="offset_1687..1696">WHILE_def</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1428..1436"><span>WHILE_eq</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.iWHILE_def|fact"><span>iWHILE_def</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>abs_def</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1324..1333"><span>WHILEI_eq</span></a><span class="main"><span>]</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.imonad_laws|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.imonad_laws(3)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.imonad_laws(2)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.imonad_laws(1)|thm"><span class="entity_def" id="offset_1767..1778">imonad_laws</span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_919..926"><span>imonad1</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_964..971"><span>imonad2</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1003..1010"><span>imonad3</span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="AFP/Refine_Monadic/refine_mono_prover.ML.html#Refine_Mono_Prover.refine_mono|attribute"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1070..1083"><span>ibind_mono_ge</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1177..1187"><span>ibind_mono</span></a><span>

</span><span class="comment1"><span>(*  lemma ibind_mono: "m ≤ m' ⟹ f ≤ f' ⟹ bind m f ≤ bind m' f'"
    by (metis (no_types) ibind_mono1 ibind_mono2 le_funD monoD order_trans)
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_body_trimono|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_body_trimono|thm"><span class="entity_def" id="offset_2009..2028">WHILEI_body_trimono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.trimono|const"><span>trimono</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body|const"><span>WHILEI_body</span></a><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Refine_Mono_Prover.html#Refine_Mono_Prover.refine_mono|method"><span class="operator"><span>refine_mono</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_mono|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_mono|thm"><span>WHILEI_mono</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.trimonoD_mono|fact"><span>trimonoD_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span>]</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_mono_ge|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_mono_ge|thm"><span>WHILEI_mono_ge</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.trimonoD_flatf_ge|fact"><span>trimonoD_flatf_ge</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span>]</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_unfold|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_unfold|thm"><span class="entity_def" id="offset_2252..2265">WHILEI_unfold</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.top_class.top|const"><span>top</span></a><span class="main"><span>)</span></span><span> "</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>WHILEI_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC_unfold|fact"><span>REC_unfold</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="comment1"><span>(* TODO: Move *)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.REC_mono_ref|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.REC_mono_ref|thm"><span class="entity_def" id="offset_2522..2534">REC_mono_ref</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="AFP/Refine_Monadic/refine_mono_prover.ML.html#Refine_Mono_Prover.refine_mono|attribute"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.trimono|const"><span>trimono</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>D</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>D</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>B'</span></span><span> </span><span class="bound"><span>D</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC|const"><span>REC</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC|const"><span>REC</span></a><span> </span><span class="free"><span>B'</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC_def|fact"><span>REC_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Inductive.html#Inductive.lfp_mono|fact"><span>lfp_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_funD|fact"><span>le_funD</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_funI|fact"><span>le_funI</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.RECT_mono_ref|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.RECT_mono_ref|thm"><span class="entity_def" id="offset_2713..2726">RECT_mono_ref</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="AFP/Refine_Monadic/refine_mono_prover.ML.html#Refine_Mono_Prover.refine_mono|attribute"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.trimono|const"><span>trimono</span></a><span> </span><span class="free"><span>B</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>D</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="bound"><span>D</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>B'</span></span><span> </span><span class="bound"><span>D</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.RECT|const"><span>RECT</span></a><span> </span><span class="free"><span>B</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.RECT|const"><span>RECT</span></a><span> </span><span class="free"><span>B'</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.RECT_gfp_def|fact"><span>RECT_gfp_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Inductive.html#Inductive.gfp_mono|fact"><span>gfp_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_funD|fact"><span>le_funD</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_funI|fact"><span>le_funI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_weaken|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_weaken|thm"><span class="entity_def" id="offset_2910..2923">WHILEI_weaken</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_2935..2937">IW</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>I'</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>WHILEI_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2522..2534"><span>REC_mono_ref</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2935..2937"><span>IW</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_unfold|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_unfold|thm"><span class="entity_def" id="offset_3138..3152">WHILEIT_unfold</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>I</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> 
    </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.top_class.top|const"><span>top</span></a><span class="main"><span>)</span></span><span> "</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>WHILEIT_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.RECT_unfold|fact"><span>RECT_unfold</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_weaken|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEIT_weaken|thm"><span class="entity_def" id="offset_3404..3418">WHILEIT_weaken</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_3430..3432">IW</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>I'</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I'</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>WHILEIT_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2713..2726"><span>RECT_mono_ref</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_3430..3432"><span>IW</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_le_WHILEIT|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILEI_le_WHILEIT|thm"><span>WHILEI_le_WHILEIT</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>WHILEI_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>WHILEIT_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC_le_RECT|fact"><span>REC_le_RECT</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹While without Annotated Invariant›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_unfold|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_unfold|thm"><span>WHILE_unfold</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1687..1696"><span>WHILE_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2252..2265"><span>WHILEI_unfold</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILET_unfold|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILET_unfold|thm"><span>WHILET_unfold</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1614..1624"><span>WHILET_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_3138..3152"><span>WHILEIT_unfold</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.transfer_WHILEIT_esc|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.transfer_WHILEIT_esc|thm"><span class="entity_def" id="offset_4140..4160">transfer_WHILEIT_esc</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_4189..4192">REF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>return</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.While_Combinator.html#While_Combinator.while|const"><span>while</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.transfer|locale"><span>transfer</span></a><span> </span><span class="quoted"><span class="free"><span>return</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4304..4305">.</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>WHILEIT_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_4304..4305"><span>transfer_RECT'</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> fr</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="HOL-Library.While_Combinator.html#While_Combinator.while|const"><span>while</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="HOL-Library.While_Combinator.html#While_Combinator.while_unfold|fact"><span>while_unfold</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/splitter.ML.html#HOL.split|method"><span class="operator"><span>split</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split|fact"><span>if_split</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.allI|fact"><span>allI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="RefineG_While.html#offset_1177..1187"><span>ibind_mono</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_4189..4192"><span>REF</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1767..1778"><span>imonad_laws</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4645..4650">lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.transfer_WHILET_esc|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.transfer_WHILET_esc|thm"><span>transfer_WHILET_esc</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>REF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>return</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="HOL-Library.While_Combinator.html#While_Combinator.while|const"><span>while</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1614..1624"><span>WHILET_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_4645..4650"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_4140..4160"><span>transfer_WHILEIT_esc</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule(6)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule(5)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule(4)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule(3)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule(2)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE.WHILE_mono_prover_rule(1)|thm"><span>WHILE_mono_prover_rule</span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="AFP/Refine_Monadic/refine_mono_prover.ML.html#Refine_Mono_Prover.refine_mono|attribute"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>WHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="free"><span>s0</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="free"><span>s0</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="free"><span>s0</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s0</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="free"><span>s0</span></span><span>"</span></span></span><span>

  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="free"><span>s0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="RefineG_Domain.html#RefineG_Domain.flat_ge|const"><span>flat_ge</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s0</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f'</span></span><span> </span><span class="free"><span>s0</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1687..1696"><span>WHILE_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>WHILEI_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
    </span><a class="entity_ref" href="RefineG_While.html#offset_1614..1624"><span>WHILET_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>WHILEIT_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Refine_Mono_Prover.html#Refine_Mono_Prover.refine_mono|method"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.transfer_WHILE.axioms|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.intro|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE_def|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE_axioms.intro|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE_axioms_def|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.axioms(4)|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE.axioms(3)|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE.axioms(2)|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE.axioms(1)|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE.intro|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE_def|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE_axioms.intro|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE_axioms_def|thm"><span class="entity_def" id="RefineG_While.transfer_WHILE_def|axiom"><span class="entity_def" id="RefineG_While.transfer_WHILE_axioms_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE|locale"><span class="entity_def" id="RefineG_While.transfer_WHILE|const"><span class="entity_def" id="RefineG_While.transfer_WHILE_axioms|const"><span>transfer_WHILE</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  c</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.generic_WHILE|locale"><span>generic_WHILE</span></a><span> </span><span class="quoted"><span class="free"><span>cbind</span></span></span><span> </span><span class="quoted"><span class="free"><span>creturn</span></span></span><span> </span><span class="quoted"><span class="free"><span>cWHILEIT</span></span></span><span> </span><span class="quoted"><span class="free"><span>cWHILEI</span></span></span><span> </span><span class="quoted"><span class="free"><span>cWHILET</span></span></span><span> </span><span class="quoted"><span class="free"><span>cWHILE</span></span></span><span> </span><span class="main"><span>+</span></span><span> 
  a</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.generic_WHILE|locale"><span>generic_WHILE</span></a><span> </span><span class="quoted"><span class="free"><span>abind</span></span></span><span> </span><span class="quoted"><span class="free"><span>areturn</span></span></span><span> </span><span class="quoted"><span class="free"><span>aWHILEIT</span></span></span><span> </span><span class="quoted"><span class="free"><span>aWHILEI</span></span></span><span> </span><span class="quoted"><span class="free"><span>aWHILET</span></span></span><span> </span><span class="quoted"><span class="free"><span>aWHILE</span></span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.dist_transfer|locale"><span>dist_transfer</span></a><span> </span><span class="quoted"><span class="free"><span>α</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>cbind</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>creturn</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'mc</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice|class"><span>complete_lattice</span></a><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>cWHILEIT</span></span><span> </span><span class="free"><span>cWHILEI</span></span><span> </span><span class="free"><span>cWHILET</span></span><span> </span><span class="free"><span>cWHILE</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>abind</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>areturn</span></span><span class="main"><span>::</span></span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ma</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice|class"><span>complete_lattice</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>aWHILEIT</span></span><span> </span><span class="free"><span>aWHILEI</span></span><span> </span><span class="free"><span>aWHILET</span></span><span> </span><span class="free"><span>aWHILE</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'mc</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ma</span></span><span>"</span></span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_bind|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_bind|thm"><span class="entity_def" id="offset_5765..5778">transfer_bind</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="free"><span>α</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cbind</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>abind</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_return|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_return|thm"><span class="entity_def" id="offset_5855..5870">transfer_return</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>creturn</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>areturn</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILEIT|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILEIT|thm"><span class="entity_def" id="offset_5913..5929">transfer_WHILEIT</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_5958..5961">REF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cWHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>aWHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>c.WHILEIT_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>a.WHILEIT_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span>transfer_RECT</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>c.WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_5765..5778"><span>transfer_bind</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_5958..5961"><span>REF</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>assumption</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_5855..5870"><span>transfer_return</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILEI|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILEI|thm"><span class="entity_def" id="offset_6283..6298">transfer_WHILEI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_6327..6330">REF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cWHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>aWHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>c.WHILEI_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>a.WHILEI_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><span>transfer_REC</span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>c.WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_5765..5778"><span>transfer_bind</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_6327..6330"><span>REF</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>assumption</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_5855..5870"><span>transfer_return</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6641..6646">lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILE|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILE|thm"><span>transfer_WHILE</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>REF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cWHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>aWHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1687..1696"><span>c.WHILE_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1687..1696"><span>a.WHILE_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_6641..6646"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_6283..6298"><span>transfer_WHILEI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6834..6839">lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILET|fact"><span class="entity_def" id="RefineG_While.transfer_WHILE.transfer_WHILET|thm"><span>transfer_WHILET</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>REF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cWHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>aWHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1614..1624"><span>c.WHILET_def</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1614..1624"><span>a.WHILET_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_6834..6839"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_5913..5929"><span>transfer_WHILEIT</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.axioms|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.intro|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_axioms.intro|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_axioms_def|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.axioms(2)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.axioms(1)|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.intro|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_def|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_axioms.intro|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_axioms_def|thm"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_def|axiom"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_axioms_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules|locale"><span class="entity_def" id="RefineG_While.generic_WHILE_rules|const"><span class="entity_def" id="RefineG_While.generic_WHILE_rules_axioms|const"><span>generic_WHILE_rules</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.generic_WHILE|locale"><span>generic_WHILE</span></a><span> </span><span class="quoted"><span class="free"><span>bind</span></span></span><span> </span><span class="quoted"><span class="free"><span>return</span></span></span><span> </span><span class="quoted"><span class="free"><span>WHILEIT</span></span></span><span> </span><span class="quoted"><span class="free"><span>WHILEI</span></span></span><span> </span><span class="quoted"><span class="free"><span>WHILET</span></span></span><span> </span><span class="quoted"><span class="free"><span>WHILE</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>WHILE</span></span><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.iSPEC_eq|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.iSPEC_eq|thm"><span class="entity_def" id="offset_7187..7195">iSPEC_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="main"><span>{</span></span><span class="free"><span>return</span></span><span> </span><span class="bound"><span>x</span></span><span>  </span><span class="main"><span>|</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.ibind_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.ibind_rule|thm"><span class="entity_def" id="offset_7243..7253">ibind_rule</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>bind</span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.ireturn_eq|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.ireturn_eq|thm"><span class="entity_def" id="offset_7324..7334">ireturn_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>return</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>(=)</span></a></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7187..7195"><span>iSPEC_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.iSPEC_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.iSPEC_rule|thm"><span class="entity_def" id="offset_7402..7412">iSPEC_rule</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Ψ</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Ψ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7187..7195"><span>iSPEC_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.complete_lattice_class.Sup_mono|fact"><span>Sup_mono</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.ireturn_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.ireturn_rule|thm"><span class="entity_def" id="offset_7512..7524">ireturn_rule</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Φ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>return</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7324..7334"><span>ireturn_eq</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7402..7412"><span>iSPEC_rule</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILEI_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILEI_rule|thm"><span class="entity_def" id="offset_7616..7627">WHILEI_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_7639..7641">I0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_7659..7664">ISTEP</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_7708..7712">CONS</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEI</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> y</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>SPEC</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1550..1560"><span>WHILEI_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.REC_rule|fact"><span>REC_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7639..7641"><span>I0</span></a><span class="main"><span>)</span></span><span>
    
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/splitter.ML.html#HOL.split|method"><span class="operator"><span>split</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split|fact"><span>if_split</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7243..7253"><span>ibind_rule</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7659..7664"><span>ISTEP</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7402..7412"><span>iSPEC_rule</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
      
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7512..7524"><span>ireturn_rule</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7402..7412"><span>iSPEC_rule</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7708..7712"><span>CONS</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILEIT_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILEIT_rule|thm"><span class="entity_def" id="offset_8309..8321">WHILEIT_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_8333..8335">WF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_8354..8356">I0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_8374..8376">IS</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_8443..8446">PHI</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILEIT</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1483..1494"><span>WHILEIT_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_Recursion.html#RefineG_Recursion.RECT_rule|fact"><span>RECT_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2009..2028"><span>WHILEI_body_trimono</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8333..8335"><span>WF</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> pre</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="free"><span>I</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8354..8356"><span>I0</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.WHILEI_body_def|fact"><span>WHILEI_body_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/splitter.ML.html#HOL.split|method"><span class="operator"><span>split</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split|fact"><span>if_split</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7243..7253"><span>ibind_rule</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8374..8376"><span>IS</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7402..7412"><span>iSPEC_rule</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7512..7524"><span>ireturn_rule</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8443..8446"><span>PHI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8880..8885">lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILE_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILE_rule|thm"><span>WHILE_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_8908..8910">I0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>ISTEP</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>CONS</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILE</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1687..1696"><span>WHILE_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_2910..2923"><span>WHILEI_weaken</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_7616..7627"><span>WHILEI_rule</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.TrueI|fact"><span>TrueI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8908..8910"><span>I0</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8880..8885"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9183..9188">lemma</span></span></span><span> </span><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILET_rule|fact"><span class="entity_def" id="RefineG_While.generic_WHILE_rules.WHILET_rule|thm"><span>WHILET_rule</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_9212..9214">WF</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.wf|const"><span>wf</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_9233..9235">I0</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>I</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>IS</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>s'</span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span>PHI</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>WHILET</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>SPEC</span></span><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_1614..1624"><span>WHILET_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_3404..3418"><span>WHILEIT_weaken</span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_8309..8321"><span>WHILEIT_rule</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.TrueI|fact"><span>TrueI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_9212..9214"><span>WF</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="RefineG_While.html#offset_9233..9235"><span>I0</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="RefineG_While.html#offset_9183..9188"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>