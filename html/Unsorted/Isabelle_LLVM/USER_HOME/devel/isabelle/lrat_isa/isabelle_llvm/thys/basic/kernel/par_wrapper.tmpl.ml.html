<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>File ‹par_wrapper.tmpl.ml›</title>
</head>


<body>
<div class="head">
<h1>File ‹par_wrapper.tmpl.ml›</h1>
</div>

<pre class="source"><span class="comment1"><span>(* Generated code, do not modify *)</span></span><span>
</span><span class="comment1"><span>(* Generated from par_wrapper.tmpl.ll on Thu 16 Sep 10:43:07 BST 2021 by peter *)</span></span><span>
</span><span class="keyword1"><span class="keyword"><span>structure</span></span></span><span> </span><span class="entity"><span>LLVM_Builder_templates</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>struct</span></span></span><span>


</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mk_clT</span></span><span> </span><span class="entity"><span>resT</span></span><span> </span><span class="entity"><span>argT</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"{"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" *, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>argT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"}"</span></span><span>

</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mk_par_wrapper</span></span><span> </span><span class="entity"><span>uid</span></span><span> </span><span class="entity"><span>resT</span></span><span> </span><span class="entity"><span>fname</span></span><span> </span><span class="entity"><span>argT</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>clT</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>mk_clT</span></span><span> </span><span class="entity"><span>resT</span></span><span> </span><span class="entity"><span>argT</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>wname</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"__isabelle_llvm_par_wrapper_"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>uid</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>""</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>wname</span></span><span class="main"><span>,</span></span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"define void @"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>wname</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" (i8 * %clpv) {\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %clp = bitcast i8* %clpv to "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" *\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl = load "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>", "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" *%clp\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %resp = extractvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %cl, 0\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %arg = extractvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %cl, 1\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %res = call "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" @"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>fname</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" ("</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>argT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %arg)\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  store "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %res, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" *%resp\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ret void\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"}\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>""</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="keyword"><span>fun</span></span></span><span> </span><span class="entity"><span>mk_par_call</span></span><span> </span><span class="entity"><span>uid</span></span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span class="entity"><span>f1</span></span><span> </span><span class="entity"><span>f2</span></span><span> </span><span class="entity"><span>argT1</span></span><span> </span><span class="entity"><span>argT2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>let</span></span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>mk_clT</span></span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span class="entity"><span>argT1</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>mk_clT</span></span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span class="entity"><span>argT2</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>w1name</span></span><span class="main"><span>,</span></span><span class="entity"><span>w1text</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>mk_par_wrapper</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>""</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>uid</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"_1"</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span class="entity"><span>f1</span></span><span> </span><span class="entity"><span>argT1</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>w2name</span></span><span class="main"><span>,</span></span><span class="entity"><span>w2text</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="entity"><span>mk_par_wrapper</span></span><span> </span><span class="main"><span>(</span></span><span class="inner_quoted"><span>""</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>uid</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"_2"</span></span><span class="main"><span>)</span></span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span class="entity"><span>f2</span></span><span> </span><span class="entity"><span>argT2</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>rpairT</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"{"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>", "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"}"</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>pcname</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="inner_quoted"><span>"__isabelle_llvm_par_call_"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>uid</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>""</span></span><span>
  </span><span class="keyword1"><span class="keyword"><span>val</span></span></span><span> </span><span class="entity"><span>pctext</span></span><span> </span><span class="main"><span>=</span></span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"define "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>rpairT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" @"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>pcname</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"("</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>argT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %arg1, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>argT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %arg2) {\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ; Build closure1\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %resp1 = alloca "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl1a = insertvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" zeroinitializer, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %resp1, 0\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl1 = insertvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %cl1a, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>argT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %arg1, 1\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl1p = alloca "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  store "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %cl1, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %cl1p\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ; Build closure2\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %resp2 = alloca "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl2a = insertvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" zeroinitializer, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %resp2, 0\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl2 = insertvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %cl2a, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>argT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %arg2, 1\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl2p = alloca "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  store "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %cl2, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %cl2p\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ; Invoke parallel\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl1pv = bitcast "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %cl1p to i8*\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %cl2pv = bitcast "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>clT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %cl2p to i8*\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  call void @isabelle_llvm_parallel (void (i8 *) *@"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>w1name</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>", void (i8 *) *@"</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>w2name</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>", i8 * %cl1pv, i8 * %cl2pv)\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ; Extract results\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %res1 = load "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>", "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %resp1\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %res2 = load "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>", "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>"* %resp2\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ; Assemble result\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %resa = insertvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>rpairT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" zeroinitializer, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT1</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %res1, 0\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  %res = insertvalue "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>rpairT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %resa, "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>resT2</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %res2, 1\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"  ret "</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>rpairT</span></span><span> </span><span>^</span><span> </span><span class="inner_quoted"><span>" %res\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>"}\n"</span></span><span> </span><span>^</span><span>
</span><span class="inner_quoted"><span>""</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span>
  </span><span class="main"><span>(</span></span><span class="entity"><span>pcname</span></span><span class="main"><span>,</span></span><span> </span><span class="entity"><span>w1text</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>w2text</span></span><span> </span><span>^</span><span> </span><span class="entity"><span>pctext</span></span><span class="main"><span>)</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span> </span><span class="comment1"><span>(* struct LLVM_Builder_templates *)</span></span><span>
</span></pre>
</body>

</html>