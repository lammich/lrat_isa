<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory IICF_Array_Map_Total</title>
</head>


<body>
<div class="head">
<h1>Theory IICF_Array_Map_Total</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="IICF_Array_Map_Total.html"><span>IICF_Array_Map_Total</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="IICF_Map.html"><span>../Intf/IICF_Map</span></a><span>"</span></span><span> </span><a href="IICF_Array.html"><span>IICF_Array</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
    Map implementation where lookup is only valid for elements 
    already in the map.
  ›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt1|type"><span>amt1</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt1_rel_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_rel_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt1_rel_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1|type"><span>amt1</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map|type"><span>⇀</span></a></span><span class="tfree"><span>'a</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>amt1_rel</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>m</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="bound"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>k</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>m</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt1_init_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_init_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt1_init_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt1_init|const"><span>amt1_init</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1|type"><span>amt1</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>amt1_init</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><a class="entity_ref" href="LLVM_Shallow.html#LLVM_Shallow.llvm_rep_class.init|const"><span>init</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt1_lookup_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_lookup_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt1_lookup_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt1_lookup|const"><span>amt1_lookup</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1|type"><span>amt1</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>amt1_lookup</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt1_update_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_update_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt1_update_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt1_update|const"><span>amt1_update</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1|type"><span>amt1</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1|type"><span>amt1</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>amt1_update</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.fref&apos;|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.fref|fact"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty.fref&apos;|fact"><span class="entity_def" id="IICF_Array_Map_Total.pre_amt_empty.param|fact"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty.fref|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.vcg|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.mcomb|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.arity|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.itype|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.pre_amt_empty_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty.itype|fact"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.fref&apos;|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.fref|thm"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty.fref&apos;|thm"><span class="entity_def" id="IICF_Array_Map_Total.pre_amt_empty.param|thm"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty.fref|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.vcg(2)|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.vcg(1)|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.mcomb|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.arity|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty.itype|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.pre_amt_empty_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty.itype|thm"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty_def|axiom"><span class="entity_def" id="IICF_Array_Map_Total.pre_amt_empty_def|axiom"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty_alt|fact"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty_alt|thm"><span class="entity_def" id="IICF_Array_Map_Total.mop_amt_empty|const"><span class="entity_def" id="IICF_Array_Map_Total.pre_amt_empty|const"><span class="entity_def" id="IICF_Array_Map_Total.op_amt_empty|const"><span>amt_empty</span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>N</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.empty|const"><span>Map.empty</span></a><span> </span><span class="main"><span>::</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map|type"><span>⇀</span></a></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>,</span></span><span class="free"><span>V</span></span><span class="main"><span>⟩</span></span><span> </span><a class="entity_ref" href="IICF_Map.html#IICF_Map.map_rel|const"><span>map_rel</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt_fold_custom_empty|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_fold_custom_empty(3)|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_fold_custom_empty(2)|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_fold_custom_empty(1)|thm"><span>amt_fold_custom_empty</span></span></span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Map.html#IICF_Map.op_map_empty|const"><span>op_map_empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.op_amt_empty|const"><span>op_amt_empty</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.empty|const"><span>Map.empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.op_amt_empty|const"><span>op_amt_empty</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Map.html#IICF_Map.mop_map_empty|const"><span>mop_map_empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.mop_amt_empty|const"><span>mop_amt_empty</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt1_empty_refine|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_empty_refine|thm"><span>amt1_empty_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_init|const"><span>amt1_init</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.mop_amt_empty|const"><span>mop_amt_empty</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.freft|const"><span>→<span class="hidden">⇩</span><sub>f</sub><span class="hidden">⇩</span><sub>d</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></a><span> </span><span class="bound"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_init_def|fact"><span>amt1_init_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel_def|fact"><span>amt1_rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt1_lookup_refine|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_lookup_refine|thm"><span>amt1_lookup_refine</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_lookup|const"><span>amt1_lookup</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IICF_Map.html#IICF_Map.mop_map_the_lookup|const"><span>mop_map_the_lookup</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_lookup_def|fact"><span>amt1_lookup_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel_def|fact"><span>amt1_rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt1_update_refine|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt1_update_refine|thm"><span>amt1_update_refine</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_update|const"><span>amt1_update</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IICF_Map.html#IICF_Map.mop_map_update|const"><span>mop_map_update</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_update_def|fact"><span>amt1_update_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel_def|fact"><span>amt1_rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>
    
  
    
  </span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>L</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'l</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="LLVM_More_Word_Lemmas.html#LLVM_More_Word_Lemmas.len2|class"><span>len2</span></a><span> </span><span>itself</span><span>"</span></span></span><span>  
    </span><span class="comment1"><span>(*notes [fcomp_norm_unfold] = snatb_rel_def[symmetric]*)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    
    </span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Array_Map_Total.amt2_assn|const"><span>amt2_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Array.html#IICF_Array.array_assn|const"><span>array_assn</span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span>"</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_def_raw|axiom"><span class="entity_def" id="offset_1849..1859">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Array_Map_Total.amt_assn|const"><span>amt_assn</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>V</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hr_comp|const"><span>hr_comp</span></a><span> 
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hr_comp|const"><span>hr_comp</span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt2_assn|const"><span>amt2_assn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.the_pure|const"><span>the_pure</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>V</span></span></span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="IICF_Map.html#IICF_Map.map_rel|const"><span>map_rel</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#offset_1849..1859"><span>amt_assn_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_fold&apos;|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_fold&apos;|thm"><span>amt_assn_fold'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hrr_comp|const"><span>hrr_comp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hr_comp|const"><span>hr_comp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array.html#IICF_Array.array_assn|const"><span>IICF_Array.array_assn</span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_rel|const"><span>amt1_rel</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
                        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.the_pure|const"><span>the_pure</span></a><span> </span><span class="free"><span>V</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="IICF_Map.html#IICF_Map.map_rel|const"><span>map_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt_assn|const"><span>amt_assn</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="bound"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#offset_1849..1859"><span>amt_assn_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hrr_comp_def|fact"><span>hrr_comp_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift_extract_simps|fact"><span>pred_lift_extract_simps</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.non_dep_def|fact"><span>non_dep_def</span></a><span class="main"><span>)</span></span><span>
    

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_intf|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_assn_intf|thm"><span>amt_assn_intf</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.intf_of_assn|attribute"><span class="operator"><span>intf_of_assn</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.intf_of_assn|const"><span>intf_of_assn</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.intf_of_assn|const"><span>intf_of_assn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt_assn|const"><span>amt_assn</span></a><span> </span><span class="free"><span>V</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>,</span></span><span class="tfree"><span>'v</span></span><span class="main"><span>)</span></span><a class="entity_ref" href="IICF_Map.html#IICF_Map.i_map|type"><span>i_map</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl|const"><span>amt_init_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_init|const"><span>amt1_init</span></a><span>"</span></span></span><span>
      </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt2_assn|const"><span>amt2_assn</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_init_def|fact"><span>amt1_init_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Translate.html#Sepref_Translate.sepref_import_param|attribute"><span class="operator"><span>sepref_import_param</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="LLVM_Shallow.html#LLVM_Shallow.llvm_rep_class.init|const"><span>init</span></a></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="IICF_Array.html#IICF_Array.array_fold_custom_replicate|fact"><span>array_fold_custom_replicate</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl.refine|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl.refine_raw|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl.refine|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl.refine_raw|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_init_impl_def_raw|axiom"><span class="entity_def" id="offset_2743..2745">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
      
     
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt_empty_hnr|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_empty_hnr_mop|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_empty_hnr|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_empty_hnr_mop|thm"><span>amt_empty</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#offset_2743..2745"><span>amt_init_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_empty_refine|fact"><span>amt1_empty_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl|const"><span>amt_lookup_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_lookup|const"><span>amt1_lookup</span></a><span>"</span></span></span><span> 
      </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt2_assn|const"><span>amt2_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_lookup_def|fact"><span>amt1_lookup_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl.refine|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl.refine_raw|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl.refine|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl.refine_raw|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_lookup_impl_def_raw|axiom"><span class="entity_def" id="offset_3038..3040">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#offset_3038..3040"><span>amt_lookup_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_lookup_refine|fact"><span>amt1_lookup_refine</span></a><span class="main"><span>]</span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_Map.html#IICF_Map.mop_map_the_lookup.fref|fact"><span>mop_map_the_lookup.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> K</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
                                                            
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl|const"><span>amt_update_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_update|const"><span>amt1_update</span></a><span>"</span></span></span><span>  
      </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt2_assn|const"><span>amt2_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt2_assn|const"><span>amt2_assn</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_update_def|fact"><span>amt1_update_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl.refine|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl_def|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl.refine_raw|fact"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl.refine|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl_def|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl.refine_raw|thm"><span class="entity_def" id="IICF_Array_Map_Total.amt_update_impl_def_raw|axiom"><span class="entity_def" id="offset_3434..3436">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#offset_3434..3436"><span>amt_update_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt1_update_refine|fact"><span>amt1_update_refine</span></a><span class="main"><span>]</span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_Map.html#IICF_Map.mop_map_update.fref|fact"><span>mop_map_update.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> K</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>    
  
  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'v</span></span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="IICF_Array_Map_Total.amt|type"><span>amt</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'v</span></span><span> </span><a class="entity_ref" href="LLVM_Shallow.html#LLVM_Shallow.ptr|type"><span>ptr</span></a><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>schematic_goal</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.MK_FREE|const"><span>MK_FREE</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt_assn|const"><span>amt_assn</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="free"><span>V</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?fr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Array_Map_Total.html#IICF_Array_Map_Total.amt_assn_def|fact"><span>amt_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref_dbg_side|method"><span class="operator"><span>sepref_dbg_side</span></span></a><span>



</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>