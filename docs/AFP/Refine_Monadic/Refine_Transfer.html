<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Refine_Transfer</title>
</head>


<body>
<div class="head">
<h1>Theory Refine_Transfer</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Transfer Setup›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Refine_Transfer.html"><span>Refine_Transfer</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
  </span><a href="Refine_Basic.html"><span>Refine_Basic</span></a><span>
  </span><a href="Refine_While.html"><span>Refine_While</span></a><span>
  </span><a href="Refine_Det.html"><span>Refine_Det</span></a><span> 
  </span><span class="quoted"><span>"</span><a href="RefineG_Transfer.html"><span>Generic/RefineG_Transfer</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Transfer to Deterministic Result Lattice›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
  TODO: Once lattice and ccpo are connected, also transfer to option monad, that
  is a ccpo, but no complete lattice!
›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Connecting Deterministic and Non-Deterministic Result Lattices›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.nres_of_def|fact"><span class="entity_def" id="Refine_Transfer.nres_of_def|thm"><span class="entity_def" id="Refine_Transfer.nres_of_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Refine_Transfer.nres_of|const"><span>nres_of</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>r</span></span></span></span><span> </span><span class="keyword1"><span>of</span></span><span>
  dSUCCEEDi </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.SUCCEED|const"><span>SUCCEED</span></a><span>
</span><span class="main"><span>|</span></span><span> dFAILi </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.FAIL|const"><span>FAIL</span></a><span>
</span><span class="main"><span>|</span></span><span> dRETURN </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.nres_of_simps|fact"><span class="entity_def" id="Refine_Transfer.nres_of_simps(3)|thm"><span class="entity_def" id="Refine_Transfer.nres_of_simps(2)|thm"><span class="entity_def" id="Refine_Transfer.nres_of_simps(1)|thm"><span>nres_of_simps</span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dSUCCEED|const"><span>dSUCCEED</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.SUCCEED|const"><span>SUCCEED</span></a><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dFAIL|const"><span>dFAIL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.FAIL|const"><span>FAIL</span></a><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of_def|fact"><span>nres_of_def</span></a><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.bot_dres_def|fact"><span>bot_dres_def</span></a><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.top_dres_def|fact"><span>top_dres_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres_internal_simps|fact"><span>dres_internal_simps</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.nres_of_mono|fact"><span class="entity_def" id="Refine_Transfer.nres_of_mono|thm"><span>nres_of_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.order_class.mono|const"><span>mono</span></a><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span>x</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="improper"><span>y</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.nres_transfer|fact"><span class="entity_def" id="Refine_Transfer.nres_transfer(6)|thm"><span class="entity_def" id="Refine_Transfer.nres_transfer(5)|thm"><span class="entity_def" id="Refine_Transfer.nres_transfer(4)|thm"><span class="entity_def" id="Refine_Transfer.nres_transfer(3)|thm"><span class="entity_def" id="Refine_Transfer.nres_transfer(2)|thm"><span class="entity_def" id="Refine_Transfer.nres_transfer(1)|thm"><span>nres_transfer</span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dSUCCEED|const"><span>dSUCCEED</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.SUCCEED|const"><span>SUCCEED</span></a><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dFAIL|const"><span>dFAIL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.FAIL|const"><span>FAIL</span></a><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Misc.html#Refine_Misc.is_chain|const"><span>is_chain</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Sup_class.Sup|const"><span>Sup</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Misc.html#Refine_Misc.is_chain|const"><span>is_chain</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Inf_class.Inf|const"><span>Inf</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="main"><span class="improper"><span>[</span></span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="improper"><span>]</span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>b</span></span></span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.less_le|fact"><span>less_le</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="free"><span>a</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="main"><span class="improper"><span>[</span></span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="improper"><span>]</span></span></span><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>b</span></span></span></span></span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>1</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres_Sup_chain_cases|fact"><span>dres_Sup_chain_cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>{</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dSUCCEED|const"><span>dSUCCEED</span></a><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>{</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="improper"><span>r</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>{</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dSUCCEED|const"><span>dSUCCEED</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="improper"><span>r</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageI|fact"><span>imageI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres_Inf_chain_cases|fact"><span>dres_Inf_chain_cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>{</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dFAIL|const"><span>dFAIL</span></a><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>{</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="improper"><span>r</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>subgoal_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><span>{</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dFAIL|const"><span>dFAIL</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="improper"><span>r</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>drule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.imageI|fact"><span>imageI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> f</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Misc.html#Refine_Misc.bot_Inf|fact"><span>bot_Inf</span></a><span> </span><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1877..1882">lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.nres_correctD|fact"><span class="entity_def" id="Refine_Transfer.nres_correctD(2)|thm"><span class="entity_def" id="Refine_Transfer.nres_correctD(1)|thm"><span>nres_correctD</span></span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dFAIL|const"><span>dFAIL</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#offset_1877..1882"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Transfer Theorems Setup›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.dres.transfer_REC|fact"><span class="entity_def" id="Refine_Transfer.dres.\&lt;alpha&gt;_strict|fact"><span class="entity_def" id="Refine_Transfer.dres.\&lt;alpha&gt;_mono|fact"><span class="entity_def" id="Refine_Transfer.dres.\&lt;alpha&gt;_dist|fact"><span class="entity_def" id="Refine_Transfer.dres.dist_transfer_axioms|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_RECT|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_RECT&apos;|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_rec_nat|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_rec_list|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_list|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_sum|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_option|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_Let|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_prod|fact"><span class="entity_def" id="Refine_Transfer.dres.transfer_if|fact"><span class="entity_def" id="Refine_Transfer.dres.\&lt;alpha&gt;_dist|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_REC|thm"><span class="entity_def" id="Refine_Transfer.dres.\&lt;alpha&gt;_strict|thm"><span class="entity_def" id="Refine_Transfer.dres.\&lt;alpha&gt;_mono|thm"><span class="entity_def" id="Refine_Transfer.dres.dist_transfer_axioms|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_RECT|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_RECT&apos;|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_rec_nat|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_rec_list|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_list|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_sum|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_option|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_Let|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_prod|thm"><span class="entity_def" id="Refine_Transfer.dres.transfer_if|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> dres</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.dist_transfer|locale"><span>dist_transfer</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a></span><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_transfer|fact"><span>nres_transfer</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.nres_of_transfer|fact"><span class="entity_def" id="Refine_Transfer.nres_of_transfer|thm"><span>nres_of_transfer</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.det_FAIL|fact"><span class="entity_def" id="Refine_Transfer.det_FAIL|thm"><span>det_FAIL</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dFAIL|const"><span>dFAIL</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.FAIL|const"><span>FAIL</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.det_SUCCEED|fact"><span class="entity_def" id="Refine_Transfer.det_SUCCEED|thm"><span>det_SUCCEED</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dSUCCEED|const"><span>dSUCCEED</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.SUCCEED|const"><span>SUCCEED</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.det_SPEC|fact"><span class="entity_def" id="Refine_Transfer.det_SPEC|thm"><span>det_SPEC</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Φ</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="free"><span>Φ</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.det_RETURN|fact"><span class="entity_def" id="Refine_Transfer.det_RETURN|thm"><span>det_RETURN</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2535..2540">lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.det_bind|fact"><span class="entity_def" id="Refine_Transfer.det_bind|thm"><span>det_bind</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>M</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dbind|const"><span>dbind</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.bind|const"><span>bind</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#offset_2535..2540"><span>assms</span></a><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>m</span></span></span><span class="main"><span>)</span></span><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.det_assert.transfer_ASSUME_remove|fact"><span class="entity_def" id="Refine_Transfer.det_assert.transfer_ASSERT_remove|fact"><span class="entity_def" id="Refine_Transfer.det_assert.transfer_generic_Assert_remove_axioms|fact"><span class="entity_def" id="Refine_Transfer.det_assert.transfer_ASSUME_remove|thm"><span class="entity_def" id="Refine_Transfer.det_assert.transfer_ASSERT_remove|thm"><span class="entity_def" id="Refine_Transfer.det_assert.transfer_generic_Assert_remove_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span><span> det_assert</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_Assert.html#RefineG_Assert.transfer_generic_Assert_remove|locale"><span>transfer_generic_Assert_remove</span></a><span> 
  </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.bind|const"><span>bind</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.ASSUME|const"><span>ASSUME</span></a></span><span>
  </span><span class="quoted"><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILET|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILE|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILEI|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILEIT|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_return|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_bind|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILE_axioms|fact"><span class="entity_def" id="Refine_Transfer.det_while.transfer_return|thm"><span class="entity_def" id="Refine_Transfer.det_while.transfer_bind|thm"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILET|thm"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILE|thm"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILEI|thm"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILEIT|thm"><span class="entity_def" id="Refine_Transfer.det_while.transfer_WHILE_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> det_while</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_While.html#RefineG_While.transfer_WHILE|locale"><span>transfer_WHILE</span></a><span>
  </span><span class="quoted"><a class="entity_ref" href="Refine_Det.html#Refine_Det.dbind|const"><span>dbind</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Det.html#Refine_Det.dWHILEIT|const"><span>dWHILEIT</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Det.html#Refine_Det.dWHILEI|const"><span>dWHILEI</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Det.html#Refine_Det.dWHILET|const"><span>dWHILET</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Det.html#Refine_Det.dWHILE|const"><span>dWHILE</span></a></span><span> 
  </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.bind|const"><span>bind</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_While.html#Refine_While.WHILEIT|const"><span>WHILEIT</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_While.html#Refine_While.WHILEI|const"><span>WHILEI</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_While.html#Refine_While.WHILET|const"><span>WHILET</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_While.html#Refine_While.WHILE|const"><span>WHILE</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.det_bind|fact"><span>det_bind</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="comment1"><span>(*
interpretation det_foreach: 
  transfer_FOREACH nres_of dRETURN dbind "case_dres True True"
  apply unfold_locales
  apply (blast intro: det_bind)
  apply simp
  apply (case_tac m)
  apply simp_all
  done
*)</span></span><span>

</span><span class="comment1"><span>(* Done generally in RefineG_Transfer
lemma det_rec_list[refine_transfer]:
  assumes FN: "⋀s. RETURN (fn s) ≤ (fn' s)"
  assumes FC: "⋀x l rec rec' s. ⟦ ⋀s. RETURN (rec s) ≤ (rec' s) ⟧ 
    ⟹ RETURN (fc x l rec s) ≤ fc' x l rec' s"
  shows "RETURN (rec_list fn fc l s) ≤ rec_list fn' fc' l s"
  apply (induct l arbitrary: s)
  apply (simp add: FN)
  apply (simp add: FC)
  done

lemma det_rec_nat[refine_transfer]:
  assumes FN: "⋀s. RETURN (fn s) ≤ (fn' s)"
  assumes FC: "⋀n rec rec' s. ⟦ ⋀s. RETURN (rec s) ≤ (rec' s) ⟧ 
    ⟹ RETURN (fc x l rec s) ≤ fc' x l rec' s"
  shows "RETURN (rec_list fn fc l s) ≤ rec_list fn' fc' l s"
  apply (induct l arbitrary: s)
  apply (simp add: FN)
  apply (simp add: FC)
  done
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Transfer to Plain Function›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.plain.transfer_RECT&apos;|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_rec_nat|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_rec_list|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_list|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_sum|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_option|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_Let|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_prod|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_if|fact"><span class="entity_def" id="Refine_Transfer.plain.transfer_RECT&apos;|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_rec_nat|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_rec_list|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_list|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_sum|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_option|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_Let|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_prod|thm"><span class="entity_def" id="Refine_Transfer.plain.transfer_if|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> plain</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.transfer|locale"><span>transfer</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_RETURN|fact"><span class="entity_def" id="Refine_Transfer.plain_RETURN|thm"><span>plain_RETURN</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_bind|fact"><span class="entity_def" id="Refine_Transfer.plain_bind|thm"><span>plain_bind</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer|attribute"><span class="operator"><span>refine_transfer</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>M</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let|const"><span>Let</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.bind|const"><span>bind</span></a><span> </span><span class="free"><span>M</span></span><span> </span><span class="free"><span>F</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>rotated</span></span><span class="main"><span class="main"><span>,</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.bind_mono|fact"><span>bind_mono</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>assumption</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.plain_assert.transfer_ASSUME_remove|fact"><span class="entity_def" id="Refine_Transfer.plain_assert.transfer_ASSERT_remove|fact"><span class="entity_def" id="Refine_Transfer.plain_assert.transfer_generic_Assert_remove_axioms|fact"><span class="entity_def" id="Refine_Transfer.plain_assert.transfer_ASSUME_remove|thm"><span class="entity_def" id="Refine_Transfer.plain_assert.transfer_ASSERT_remove|thm"><span class="entity_def" id="Refine_Transfer.plain_assert.transfer_generic_Assert_remove_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span><span> plain_assert</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="RefineG_Assert.html#RefineG_Assert.transfer_generic_Assert_remove|locale"><span>transfer_generic_Assert_remove</span></a><span> 
  </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.bind|const"><span>bind</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.ASSUME|const"><span>ASSUME</span></a></span><span>
  </span><span class="quoted"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>

</span><span class="comment1"><span>(*
interpretation plain: transfer_FOREACH RETURN "(λx. x)" Let "(λx. x)"
  apply (unfold_locales)
  apply (erule plain_bind, assumption)
  apply simp
  apply simp
  done
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Total correctness in deterministic monad›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
  Sometimes one cannot extract total correct programs to executable plain 
  Isabelle functions, for example, if the total correctness only holds for
  certain preconditions. In those cases, one can still show
  </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>RETURN (the_res S) ≤ S'›</span></span></span><span>. Here, </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>the_res›</span></span></span><span> extracts
  the result from a deterministic monad. As </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>the_res›</span></span></span><span> is executable,
  the above shows that </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>(the_res S)›</span></span></span><span> is always a correct result.
›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.the_res.elims|fact"><span class="entity_def" id="Refine_Transfer.the_res.induct|fact"><span class="entity_def" id="Refine_Transfer.the_res.simps|fact"><span class="entity_def" id="Refine_Transfer.the_res.pelims|fact"><span class="entity_def" id="Refine_Transfer.the_res.cases|fact"><span class="entity_def" id="Refine_Transfer.the_res.termination|fact"><span class="entity_def" id="Refine_Transfer.the_res.pinduct|fact"><span class="entity_def" id="Refine_Transfer.the_res.psimps|fact"><span class="entity_def" id="Refine_Transfer.the_res_rel.inducts|fact"><span class="entity_def" id="Refine_Transfer.the_res_rel.simps|fact"><span class="entity_def" id="Refine_Transfer.the_res_rel.induct|fact"><span class="entity_def" id="Refine_Transfer.the_res_rel.cases|fact"><span class="entity_def" id="Refine_Transfer.the_res_rel.intros|fact"><span class="entity_def" id="Refine_Transfer.the_res_graph.inducts|fact"><span class="entity_def" id="Refine_Transfer.the_res_graph.simps|fact"><span class="entity_def" id="Refine_Transfer.the_res_graph.induct|fact"><span class="entity_def" id="Refine_Transfer.the_res_graph.cases|fact"><span class="entity_def" id="Refine_Transfer.the_res_graph.intros|fact"><span class="entity_def" id="Refine_Transfer.the_res.elims|thm"><span class="entity_def" id="Refine_Transfer.the_res.induct|thm"><span class="entity_def" id="Refine_Transfer.the_res.simps|thm"><span class="entity_def" id="Refine_Transfer.the_res.pelims|thm"><span class="entity_def" id="Refine_Transfer.the_res.cases|thm"><span class="entity_def" id="Refine_Transfer.the_res.termination|thm"><span class="entity_def" id="Refine_Transfer.the_res.pinduct|thm"><span class="entity_def" id="Refine_Transfer.the_res.psimps|thm"><span class="entity_def" id="Refine_Transfer.the_res_rel.inducts|thm"><span class="entity_def" id="Refine_Transfer.the_res_rel.simps|thm"><span class="entity_def" id="Refine_Transfer.the_res_rel.induct|thm"><span class="entity_def" id="Refine_Transfer.the_res_rel.cases|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.inducts|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.simps|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.induct|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.cases|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.intros(3)|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.intros(2)|thm"><span class="entity_def" id="Refine_Transfer.the_res_graph.intros(1)|thm"><span class="entity_def" id="Refine_Transfer.the_res_def|axiom"><span class="entity_def" id="Refine_Transfer.the_res_rel_def|axiom"><span class="entity_def" id="Refine_Transfer.the_res_sumC_def|axiom"><span class="entity_def" id="Refine_Transfer.the_res_graph_def|axiom"><span class="entity_def" id="Refine_Transfer.the_res_dom|const"><span class="entity_def" id="Refine_Transfer.the_res_rel|const"><span class="entity_def" id="Refine_Transfer.the_res_sumC|const"><span class="entity_def" id="Refine_Transfer.the_res_graph|const"><span>fun</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Refine_Transfer.the_res|const"><span>the_res</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>the_res</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The following lemma converts a proof-obligation
  with result extraction to a transfer proof obligation,
  and a proof obligation that the program yields not bottom.

  Note that this rule has to be applied manually, as, otherwise,
  it would interfere with the default setup, that tries to generate a
  plain function.
›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5491..5496">lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.the_resI|fact"><span class="entity_def" id="Refine_Transfer.the_resI|thm"><span>the_resI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>S'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>S</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dSUCCEED|const"><span>dSUCCEED</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.the_res|const"><span>the_res</span></a><span> </span><span class="free"><span>S</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>S'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#offset_5491..5496"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>S</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The following rule sets up a refinement goal, a transfer goal, and a 
  final optimization goal.›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Refine_Transfer.detTAG_def|fact"><span class="entity_def" id="Refine_Transfer.detTAG_def|thm"><span class="entity_def" id="Refine_Transfer.detTAG_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Refine_Transfer.detTAG|const"><span>detTAG</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.detTAGI|fact"><span class="entity_def" id="Refine_Transfer.detTAGI|thm"><span>detTAGI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.detTAG|const"><span>detTAG</span></a><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.detTAG_def|fact"><span>detTAG_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5823..5828">lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.autoref_detI|fact"><span class="entity_def" id="Refine_Transfer.autoref_detI|thm"><span>autoref_detI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>b</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.detTAG|const"><span>detTAG</span></a><span> </span><span class="free"><span>d</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>d</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#offset_5823..5828"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel_def|fact"><span>nres_rel_def</span></a><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.detTAG_def|fact"><span>detTAG_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Relator-Based Transfer›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>definition</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.dres_nres_rel_internal_def|fact"><span class="entity_def" id="Refine_Transfer.dres_nres_rel_internal_def|thm"><span class="entity_def" id="Refine_Transfer.dres_nres_rel_internal_def_raw|axiom"><span>dres_nres_rel_internal_def</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Refine_Transfer.dres_nres_rel|const"><span>dres_nres_rel</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.dres_nres_rel_def|fact"><span class="entity_def" id="Refine_Transfer.dres_nres_rel_def|thm"><span>dres_nres_rel_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel|const"><span>dres_nres_rel</span></a><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel_internal_def|fact"><span>dres_nres_rel_internal_def</span></a><span> </span><a class="entity_ref" href="../Automatic_Refinement/Relators.html#Relators.relAPP_def|fact"><span>relAPP_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.dres_nres_relI|fact"><span class="entity_def" id="Refine_Transfer.dres_nres_relI|thm"><span>dres_nres_relI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>?</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel|const"><span>dres_nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel_def|fact"><span>dres_nres_rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.dres_nres_relD|fact"><span class="entity_def" id="Refine_Transfer.dres_nres_relD|thm"><span>dres_nres_relD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel|const"><span>dres_nres_rel</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel_def|fact"><span>dres_nres_rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.dres_nres_rel_as_br_conv|fact"><span class="entity_def" id="Refine_Transfer.dres_nres_rel_as_br_conv|thm"><span>dres_nres_rel_as_br_conv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel|const"><span>dres_nres_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.nres_of|const"><span>nres_of</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcomp|const"><span>O</span></a></span><span> </span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.dres_nres_rel_def|fact"><span>dres_nres_rel_def</span></a><span> </span><a class="entity_ref" href="../Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel_def|fact"><span>nres_rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>definition</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_nres_rel_internal_def|fact"><span class="entity_def" id="Refine_Transfer.plain_nres_rel_internal_def|thm"><span class="entity_def" id="Refine_Transfer.plain_nres_rel_internal_def_raw|axiom"><span>plain_nres_rel_internal_def</span></span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Refine_Transfer.plain_nres_rel|const"><span>plain_nres_rel</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_nres_rel_def|fact"><span class="entity_def" id="Refine_Transfer.plain_nres_rel_def|thm"><span>plain_nres_rel_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel|const"><span>plain_nres_rel</span></a><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>{</span></span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel_internal_def|fact"><span>plain_nres_rel_internal_def</span></a><span> </span><a class="entity_ref" href="../Automatic_Refinement/Relators.html#Relators.relAPP_def|fact"><span>relAPP_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_nres_relI|fact"><span class="entity_def" id="Refine_Transfer.plain_nres_relI|thm"><span>plain_nres_relI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>?</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel|const"><span>plain_nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel_def|fact"><span>plain_nres_rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_nres_relD|fact"><span class="entity_def" id="Refine_Transfer.plain_nres_relD|thm"><span>plain_nres_relD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel|const"><span>plain_nres_rel</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel_def|fact"><span>plain_nres_rel_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.plain_nres_rel_as_br_conv|fact"><span class="entity_def" id="Refine_Transfer.plain_nres_rel_as_br_conv|thm"><span>plain_nres_rel_as_br_conv</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel|const"><span>plain_nres_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcomp|const"><span>O</span></a></span><span> </span><span class="main"><span>⟨</span></span><span class="free"><span>R</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Refine_Transfer.html#Refine_Transfer.plain_nres_rel_def|fact"><span>plain_nres_rel_def</span></a><span> </span><a class="entity_ref" href="../Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span> </span><a class="entity_ref" href="Refine_Basic.html#Refine_Basic.nres_rel_def|fact"><span>nres_rel_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="comment1"><span>(* TODO: Refine_Transfer could be expressed also just as a 
    parametricity based transfer, and based on the same infrastructure
    as autoref *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Post-Simplification Setup›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.dres_unit_simps|fact"><span class="entity_def" id="Refine_Transfer.dres_unit_simps|thm"><span>dres_unit_simps</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer_post_simp|attribute"><span class="operator"><span>refine_transfer_post_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dbind|const"><span>dbind</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>u</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Refine_Transfer.Let_dRETURN_simp|fact"><span class="entity_def" id="Refine_Transfer.Let_dRETURN_simp|thm"><span>Let_dRETURN_simp</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer_post_simp|attribute"><span class="operator"><span>refine_transfer_post_simp</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let|const"><span>Let</span></a><span> </span><span class="free"><span>m</span></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres.dRETURN|const"><span>dRETURN</span></a><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="RefineG_Transfer.html#RefineG_Transfer.refine_transfer_post_simp|attribute"><span class="operator"><span>refine_transfer_post_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Refine_Det.html#Refine_Det.dres_monad_laws|fact"><span>dres_monad_laws</span></a><span>


</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>