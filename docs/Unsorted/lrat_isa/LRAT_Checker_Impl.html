<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory LRAT_Checker_Impl</title>
</head>


<body>
<div class="head">
<h1>Theory LRAT_Checker_Impl</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Implementation of Checker›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="LRAT_Checker_Impl.html"><span>LRAT_Checker_Impl</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span>
  </span><a href="SAT_Basic.html"><span>SAT_Basic</span></a><span> 
  </span><a href="Relaxed_Assignment.html"><span>Relaxed_Assignment</span></a><span> 
  </span><a href="DS_Reversible_Assignment.html"><span>DS_Reversible_Assignment</span></a><span> 
  </span><a href="DS_Clause_Database.html"><span>DS_Clause_Database</span></a><span>
  
  </span><a href="Debugging_Tools.html"><span>Debugging_Tools</span></a><span>
  
  </span><a href="CNF_Parser_Impl.html"><span>CNF_Parser_Impl</span></a><span>
  </span><a href="LRAT_Parsers.html"><span>LRAT_Parsers</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    

  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Abstract Algorithms›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Checking for Unit or Tautology›</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.check_uot_invar_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot_invar_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot_invar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.check_uot_invar|const"><span>check_uot_invar</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>C<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>err</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><span>of</span></span><span> 
      None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>C<span class="hidden">⇩</span><sub>1</sub></span></span><span>
    </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>C<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_conflict_clause_empty|fact"><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_conflict_clause_empty|thm"><span>rpa_is_conflict_clause_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause_def|fact"><span>rpa_is_conflict_clause_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_conflict_clause_insert|fact"><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_conflict_clause_insert|thm"><span>rpa_is_conflict_clause_insert</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.is_false|const"><span>is_false</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause_def|fact"><span>rpa_is_conflict_clause_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_uot_lit_insert_false|fact"><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_uot_lit_insert_false|thm"><span>rpa_is_uot_lit_insert_false</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.is_false|const"><span>is_false</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>l'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>l'</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit_def|fact"><span>rpa_is_uot_lit_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_uot_lit_insert_nfalseI|fact"><span class="entity_def" id="LRAT_Checker_Impl.rpa_is_uot_lit_insert_nfalseI|thm"><span>rpa_is_uot_lit_insert_nfalseI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.is_false|const"><span>is_false</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit_def|fact"><span>rpa_is_uot_lit_def</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause_def|fact"><span>rpa_is_conflict_clause_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹First, we implement the loop. For technical reasons (we have to access an inner array),
    we will use a locale, and here, only specify body and condition. 
  ›</span></span></span><span>  
    
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.err_code_mult_undecided|const"><span>err_code_mult_undecided</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>0x2</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.err_code_invalid_id|const"><span>err_code_invalid_id</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>0x3</span></span><span>"</span></span></span><span>
  
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body|const"><span>check_uot2_body</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_If|const"><span>if<span class="hidden">⇩</span><sub>N</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_is_false_unchecked|const"><span>rpan_is_false_unchecked</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Autoref_Bindings_HOL.html#Autoref_Bindings_HOL.is_None|const"><span>is_None</span></a><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.ERROR_lit|const"><span>ERROR_lit</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.err_code_mult_undecided|const"><span>err_code_mult_undecided</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.ERROR_lito|const"><span>ERROR_lito</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.err_code_mult_undecided|const"><span>err_code_mult_undecided</span></a><span> </span><span class="bound"><span>ul</span></span><span class="main"><span>;</span></span><span>
    
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond|const"><span>check_uot2_cond</span></span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><span class="bound"><span class="entity"><span>_</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span>"</span></span></span><span>
  

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Next, we use sepref to produce implementations of body and condition›</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl|const"><span>check_uot2_body_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body|const"><span>check_uot2_body</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_assn|const"><span>ulit_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_assn|const"><span>ulito_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_assn|const"><span>ulito_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body_def|fact"><span>check_uot2_body_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_body_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>  
  </span><span class="comment1"><span>(* Note: we destroy the state, though it is pure. This better matches the locale assumptions *)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl|const"><span>check_uot2_cond_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond|const"><span>check_uot2_cond</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_assn|const"><span>ulito_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond_def|fact"><span>check_uot2_cond_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.check_uot2_cond_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Finally, we instantiate the locale for the loop.›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_hnr|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_hnr|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.pat|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause_hnr|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux_hnr|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.pat|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_aux2_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_aux2_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cb_refines|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.body_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cond_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.clause_iteration_setup_axioms|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_hnr|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux_hnr|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_aux2_refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_aux2_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cb_refines(2)|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cb_refines(1)|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.body_refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cond_refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_hnr|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause.pat|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause_hnr|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause.pat|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.clause_iteration_setup_axioms|thm"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux_impl|const"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause_aux|const"><span class="entity_def" id="LRAT_Checker_Impl.uot.cdb_iterate_clause|const"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_impl_aux|const"><span class="entity_def" id="LRAT_Checker_Impl.uot.foreach_lit_in_clause|const"><span class="entity_def" id="LRAT_Checker_Impl.uot.zcl_fold_aux2|const"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> uot</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.clause_iteration_setup|locale"><span>clause_iteration_setup</span></a><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond_impl|const"><span>check_uot2_cond_impl</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond|const"><span>check_uot2_cond</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body_impl|const"><span>check_uot2_body_impl</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body|const"><span>check_uot2_body</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_assn|const"><span>ulito_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond_impl.refine|fact"><span>check_uot2_cond_impl.refine</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body_impl.refine|fact"><span>check_uot2_body_impl.refine</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We prove the generated loop correct›</span></span></span><span>      

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.uot_cdb_iterate_clause_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.uot_cdb_iterate_clause_correct|thm"><span>uot_cdb_iterate_clause_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_invar|const"><span>rpan_invar</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_2930..2934">CIDV</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="free"><span>C</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_2967..2969">VB</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>C</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span>cdb</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.var_of_lit|const"><span>var_of_lit</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="bound"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_dom|const"><span>rpan_dom</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.uot.cdb_iterate_clause|const"><span>uot.cdb_iterate_clause</span></a><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_None|const"><span>ulito_None</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>err</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><span>of</span></span><span> 
          None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>C</span></span><span>
        </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="bound"><span>l</span></span><span> 
      </span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.uot.cdb_iterate_clause_def|fact"><span>uot.cdb_iterate_clause_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond_def|fact"><span>check_uot2_cond_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body_def|fact"><span>check_uot2_body_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Foreach.html#Refine_Foreach.FOREACHcdi_def|fact"><span>FOREACHcdi_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> I</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot_invar|const"><span>check_uot_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot_invar_def|fact"><span>check_uot_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_2930..2934"><span>CIDV</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_2967..2969"><span>VB</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.splits|fact"><span>option.splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rpa_is_uot_lit_insert_nfalseI|fact"><span>rpa_is_uot_lit_insert_nfalseI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran_def|fact"><span>ran_def</span></a><span class="main"><span>)</span></span><span>
    

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹And combine it with looking up the clause›</span></span></span><span>    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan|type"><span>rpan</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_lit|type"><span>dv_lit</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_check_uot</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_If|const"><span>if<span class="hidden">⇩</span><sub>N</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains|const"><span>cdb_contains</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.uot.cdb_iterate_clause|const"><span>uot.cdb_iterate_clause</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_None|const"><span>ulito_None</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.ERROR_cid|const"><span>ERROR_cid</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.err_code_invalid_id|const"><span>err_code_invalid_id</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_None|const"><span>ulito_None</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>
  
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The following lemma shows a direct characterization of </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span>›</span></span><span> as presented in the paper›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSUME|const"><span>ASSUME</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="bound"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Foreach.html#Refine_Foreach.FOREACHcd|const"><span>FOREACHcd</span></a><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>uv</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of|const"><span>ulit_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.neg_lit|const"><span>neg_lit</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of|const"><span>ulit_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.neg_lit|const"><span>neg_lit</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Autoref_Bindings_HOL.html#Autoref_Bindings_HOL.is_None|const"><span>is_None</span></a><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span> 
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_4502..4529">rpan_is_false_unchecked_alt</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_is_false_unchecked|const"><span>rpan_is_false_unchecked</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of|const"><span>ulit_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.neg_lit|const"><span>neg_lit</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of|const"><span>ulit_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.neg_lit|const"><span>neg_lit</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>l</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_is_true_unchecked_def|fact"><span>rpan_is_true_unchecked_def</span></a><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.bla_get_unchecked_def|fact"><span>bla_get_unchecked_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>A</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot_def|fact"><span>cdb_check_uot_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.uot.cdb_iterate_clause_def|fact"><span>uot.cdb_iterate_clause_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_cond_def|fact"><span>check_uot2_cond_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.check_uot2_body_def|fact"><span>check_uot2_body_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_4502..4529"><span>rpan_is_false_unchecked_alt</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.fo_rule|method"><span class="operator"><span>fo_rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.cong|fact"><span>cong</span></a><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> </span><span class="main"><span class="keyword3"><span>|</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
  
  
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Correctness theorem for </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span>›</span></span><span>:›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5100..5105">lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_correct|thm"><span>cdb_check_uot_correct</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_invar|const"><span>rpan_invar</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>C</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span>cdb</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.var_of_lit|const"><span>var_of_lit</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="bound"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_dom|const"><span>rpan_dom</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>err</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>C</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><span>of</span></span><span> 
          None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>C</span></span><span>
        </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="bound"><span>l</span></span><span> 
      </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_5453..5456">aux</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cid</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot_def|fact"><span>cdb_check_uot_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains_def|fact"><span>cdb_contains_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_5100..5105"><span>assms</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_5453..5456"><span>aux</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_5100..5105"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.split|fact"><span>option.split</span></a><span class="main"><span>)</span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
     
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Actually, for our verification, we only need a weaker version that ignores 
    clause identifiers:›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5840..5845">lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_correct_weak|fact"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_correct_weak|thm"><span>cdb_check_uot_correct_weak</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_invar|const"><span>rpan_invar</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>C</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span>cdb</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.var_of_lit|const"><span>var_of_lit</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="bound"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_dom|const"><span>rpan_dom</span></a><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>cdb</span></span><span> </span><span class="free"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>err</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>∃</span></span><span class="bound"><span>C</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span>cdb</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><span>of</span></span><span> 
          None </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_conflict_clause|const"><span>rpa_is_conflict_clause</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>C</span></span><span>
        </span><span class="main"><span>|</span></span><span> Some </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit|const"><span>rpa_is_uot_lit</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>C</span></span><span> </span><span class="bound"><span>l</span></span><span> 
      </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot_correct|fact"><span>cdb_check_uot_correct</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_5840..5845"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 0 3 </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.splits|fact"><span>option.splits</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ranI|fact"><span>ranI</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Finally, we use Sepref to generate an imperative implementation›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl|const"><span>cdb_check_uot_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulito_assn|const"><span>ulito_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot_def|fact"><span>cdb_check_uot_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.cdb_check_uot_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
    
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Checker States›</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹This is the first refinement of the abstract checker state </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state|type"><span>checker_state</span></a><span>›</span></span></span><span>.
    We split the state into three different types, depending on the represented abstract state.
    
    Each checker state comes with an invariant, and an abstraction function 
    to map it the corresponding abstract checker state.
  ›</span></span></span><span>
  

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹All checker state invariants share a common part, which we have factored out here:›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_common_invar_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_common_invar_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_common_invar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.cs_common_invar|const"><span>cs_common_invar</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cbld</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span>
      </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_invar|const"><span>rpan_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_invar|const"><span>cbld_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cbld</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_cap|const"><span>cbld_α_cap</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cbld</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of|const"><span>ulit_of</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.Union|const"><span>⋃</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>..</span></a></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_maxlit|const"><span>cbld_α_maxlit</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cbld</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>}</span></a></span><span>  
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>C</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.var_of_lit|const"><span>var_of_lit</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="bound"><span>C</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_dom|const"><span>rpan_dom</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.var_of_lit|const"><span>var_of_lit</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_clause|const"><span>cbld_α_clause</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cbld</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_dom|const"><span>rpan_dom</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="main"><span>)</span></span><span>
  "</span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span class="quoted"><span class="plain_text"><span>‹In Proof›</span></span></span><span>    
  </span><span class="comment1"><span>(*
    Checker state during proof phase:
      err: error flag
      confl: conflict flag (we saw a conflict clause)
      A: assignment
      cbld: clause builder
      cdb: clause database
    
  *)</span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan|type"><span>rpan</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld|type"><span>cbld</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_invar_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_invar_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_invar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs_ip_invar</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar|const"><span>cs_common_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>cbld</span></span><span> </span><span class="bound"><span>cdb</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>err</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_cap|const"><span>cbld_α_cap</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_cap|const"><span>rpan_cap</span></a><span> </span><span class="bound"><span>A</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dimacs_var|type"><span>dimacs_var</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state|type"><span>checker_state</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs_ip_α</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>checker_state.FAIL</span></a><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>confl</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.PROOF_DONE|const"><span>PROOF_DONE</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_clause|const"><span>cbld_α_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.PROOF|const"><span>PROOF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_clause|const"><span>cbld_α_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_invar_antimono|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_invar_antimono|thm"><span>cs_ip_invar_antimono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="free"><span>cap'</span></span><span> </span><span class="free"><span>csip</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>cap'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csip</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_def|fact"><span>cs_ip_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>  

    
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span class="quoted"><span class="plain_text"><span>‹Outside Proof›</span></span></span><span>    
    
  </span><span class="comment1"><span>(*
    Checker state outside proof phase:
  
    error × unsat × clausedb × cbld (unused, empty) × assignment (unused)
    
    Note that the order is different to checker_state_in_proof, to not
    accidentally mix up the two types.
  *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld|type"><span>cbld</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan|type"><span>rpan</span></a><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs_op_invar</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>unsat</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar|const"><span>cs_common_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>cbld</span></span><span> </span><span class="bound"><span>cdb</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_clause|const"><span>cbld_α_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>
      "</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dimacs_var|type"><span>dimacs_var</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state|type"><span>checker_state</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs_op_α</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>unsat</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>checker_state.FAIL</span></a><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>unsat</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.UNSAT|const"><span>checker_state.UNSAT</span></a><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.CNF|const"><span>CNF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_antimono|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_antimono|thm"><span>cs_op_invar_antimono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap'</span></span><span> </span><span class="free"><span>csop</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>cap'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csop</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>  

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_error_antimono|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_error_antimono|thm"><span>cs_op_invar_error_antimono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap'</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>err</span></span><span class="main"><span>,</span></span><span class="free"><span>unsat</span></span><span class="main"><span>,</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>cdb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>cap'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><span class="free"><span>unsat</span></span><span class="main"><span>,</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>cdb</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>  
    
          
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>csop_is_unsat</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>unsat</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>unsat</span></span><span>"</span></span></span><span>    
      
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>csop_is_error</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>err</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>csop_set_error</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>rest</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><span class="bound"><span>rest</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_error|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_error|thm"><span>csop_set_error_error</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error_def|fact"><span>csop_is_error_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error_def|fact"><span>csop_set_error_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.split|fact"><span>prod.split</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_set_error|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_set_error|thm"><span>cs_op_invar_set_error</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error_def|fact"><span>csop_set_error_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_correct|thm"><span>csop_is_error_correct</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="free"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>FAIL</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error_def|fact"><span>csop_is_error_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>csop</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_correct|thm"><span>csop_set_error_correct</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a><span> </span><span class="free"><span>csop</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>FAIL</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error_def|fact"><span>csop_set_error_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>csop</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span class="quoted"><span class="plain_text"><span>‹Building Clause›</span></span></span><span>
    
  </span><span class="comment1"><span>(*
    Checker state while building lemma
  
    err × ass × cbld × cdb
  *)</span></span><span>   
  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan|type"><span>rpan</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld|type"><span>cbld</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_invar_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_invar_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_invar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs_bl_invar</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar|const"><span>cs_common_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>cbld</span></span><span> </span><span class="bound"><span>cdb</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_and_not_C|const"><span>rpa_and_not_C</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_empty|const"><span>rpa_empty</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_clause|const"><span>cbld_α_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span>  
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_cap|const"><span>rpan_cap</span></a><span> </span><span class="bound"><span>A</span></span><span>
    "</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_invar_antimono|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_invar_antimono|thm"><span>cs_bl_invar_antimono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="free"><span>cap'</span></span><span> </span><span class="free"><span>csbl</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>cap'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csbl</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar_def|fact"><span>cs_bl_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>  
    

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dimacs_var|type"><span>dimacs_var</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state|type"><span>checker_state</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cs_bl_α</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>checker_state.FAIL</span></a><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.PREP_LEMMA|const"><span>PREP_LEMMA</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_clause|const"><span>cbld_α_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_\&lt;alpha&gt;|const"><span>rpan_α</span></a><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>
    "</span></span></span><span>    
    
    
    
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Transitions between Checker States›</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We implement the transitions between the checker states.
    For each transition, we prove that it preserves the invariant,
    and implements the transition relation </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span>›</span></span><span> on the abstract checker state.
  ›</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Proof Step›</span></span></span><span>
  </span><span class="comment1"><span>(*
    Make a proof step
      cid -- id of next unit or conflict clause
  *)</span></span><span>    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.proof_step|const"><span>proof_step</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>proof_step</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> 
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>ul</span></span><span class="main"><span>,</span></span><span class="bound"><span>err'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cdb_check_uot|const"><span>cdb_check_uot</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="bound"><span>cdb</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span class="main"><span>;</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err'</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Autoref_Bindings_HOL.html#Autoref_Bindings_HOL.is_None|const"><span>is_None</span></a><span> </span><span class="bound"><span>ul</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> 
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_set_unchecked|const"><span>rpan_set_unchecked</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="bound"><span>ul</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span>  
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.proof_step_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_correct|thm"><span>proof_step_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csip</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step|const"><span>proof_step</span></a><span> </span><span class="free"><span>cid</span></span><span> </span><span class="free"><span>csip</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csip'</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>csip'</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="free"><span>csip</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="bound"><span>csip'</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step_def|fact"><span>proof_step_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_def|fact"><span>cs_ip_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Eisbach.Eisbach.html#Eisbach.all|method"><span class="operator"><span>all</span></span></a><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>  </span><span class="comment1"><span>(* Solves some linarith-goals, that clarsimp does not solve *)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.splits|fact"><span>option.splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.splits|fact"><span>option.splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_refl|fact"><span>ct_refl</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_refl|fact"><span>ct_refl</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.splits|fact"><span>option.splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_refl|fact"><span>ct_refl</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_add_conflict|fact"><span>ct_add_conflict</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_is_uot_lit_def|fact"><span>rpa_is_uot_lit_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_refl|fact"><span>ct_refl</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_add_unit|fact"><span>ct_add_unit</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Finish proof›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.err_code_no_conflict|const"><span>err_code_no_conflict</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>0x4</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof|const"><span>finish_proof</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>finish_proof</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>confl</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><span class="bound"><span>cbld</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_abort_clause|const"><span>cbld_abort_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>confl</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.ERROR|const"><span>ERROR</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.err_code_no_conflict|const"><span>err_code_no_conflict</span></a><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>cbld</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_abort_clause|const"><span>cbld_abort_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><span class="bound"><span>e</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_is_empty|const"><span>cbld_is_empty</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>;</span></span><span>
        </span><span class="main"><span>(</span></span><span class="bound"><span>cl</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_finish_clause|const"><span>cbld_finish_clause</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>cdb</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert|const"><span>cdb_insert</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="bound"><span>cl</span></span><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span class="bound"><span>e</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      
  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>      
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.in_ran_updD|fact"><span class="entity_def" id="LRAT_Checker_Impl.in_ran_updD|thm"><span>in_ran_updD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="free"><span>X</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span> </span><span class="main"><span>↦</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>X</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>v</span></span><span>"</span></span></span><span>    
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran_def|fact"><span>ran_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_correct|thm"><span>finish_proof_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csip</span></span><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.finish_proof|const"><span>finish_proof</span></a><span> </span><span class="free"><span>cid</span></span><span> </span><span class="free"><span>csip</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csop</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="bound"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="free"><span>csip</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>csop</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.finish_proof_def|fact"><span>finish_proof_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert_def|fact"><span>cdb_insert_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_def|fact"><span>cs_ip_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.in_ran_updD|fact"><span>in_ran_updD</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_\&lt;alpha&gt;_maxlit_bound|fact"><span>cbld_α_maxlit_bound</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span class="main"><span>)</span></span><span>      

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_finish_proof_unsat|fact"><span>ct_finish_proof_unsat</span></a><span class="main"><span>)</span></span><span>      

    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 
        </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Generic_Memory.html#Generic_Memory.r2_into_rtranclp|fact"><span>r2_into_rtranclp</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_finish_proof|fact"><span>ct_finish_proof</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_del_clauses|fact"><span>ct_del_clauses</span></a><span class="main"><span class="main"><span>]</span></span></span><span> 
        </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.in_ran_updD|fact"><span>in_ran_updD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Start lemma›</span></span></span><span>
   
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma|const"><span>start_lemma</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>start_lemma</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>unsat</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_clear|const"><span>rpan_clear</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cap</span></span></span></span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  

    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rpa_and_not_C_empty|fact"><span class="entity_def" id="LRAT_Checker_Impl.rpa_and_not_C_empty|thm"><span>rpa_and_not_C_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_and_not_C|const"><span>rpa_and_not_C</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_and_not_C_def|fact"><span>rpa_and_not_C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>  
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_correct|thm"><span>start_lemma_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csop</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a><span> </span><span class="free"><span>csop</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_lemma|const"><span>start_lemma</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csbl</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="bound"><span>csbl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>csop</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="bound"><span>csbl</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>      
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_lemma_def|fact"><span>start_lemma_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar_def|fact"><span>cs_bl_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def|fact"><span>cs_bl_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat_def|fact"><span>csop_is_unsat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_start_lemma|fact"><span>ct_start_lemma</span></a><span class="main"><span>)</span></span><span>

    
    
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Add literal›</span></span></span><span>
      
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.add_literal|const"><span>add_literal</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_lit|type"><span>dv_lit</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_literal</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_invar|const"><span>cbld_invar</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>cbld</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_add_lit|const"><span>cbld_add_lit</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_set_checked|const"><span>rpan_set_checked</span></a><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.neg_lit|const"><span>neg_lit</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
    
  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rpa_and_not_C_insert|fact"><span class="entity_def" id="LRAT_Checker_Impl.rpa_and_not_C_insert|thm"><span>rpa_and_not_C_insert</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_and_not_C|const"><span>rpa_and_not_C</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.insert|const"><span>insert</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_and_not_C|const"><span>rpa_and_not_C</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>C</span></span><span class="main"><span>)</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.neg_lit|const"><span>neg_lit</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>:=</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.rpa_and_not_C_def|fact"><span>rpa_and_not_C_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.ss_range_maxI|fact"><span class="entity_def" id="LRAT_Checker_Impl.ss_range_maxI|thm"><span>ss_range_maxI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>{</span></a></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>..</span></a></span><span class="free"><span>h</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>}</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>{</span></a></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>..</span></a></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.max|const"><span>max</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost|const"><span>}</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.max_def|fact"><span>max_def</span></a><span class="main"><span>)</span></span><span>
    
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.add_literal_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_correct|thm"><span>add_literal_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csbl</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> 
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literal|const"><span>add_literal</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>csbl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csbl'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>csbl'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="free"><span>csbl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="bound"><span>csbl'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literal_def|fact"><span>add_literal_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar_def|fact"><span>cs_bl_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Eisbach.Eisbach.html#Eisbach.all|method"><span class="operator"><span>all</span></span></a><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ss_range_maxI|fact"><span>ss_range_maxI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def|fact"><span>cs_bl_α_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_add_lit|fact"><span>ct_add_lit</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Start proof›</span></span></span><span>
        
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.start_proof|const"><span>start_proof</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>start_proof</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
    "</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.start_proof_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_correct|thm"><span>start_proof_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csbl</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>cap</span></span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof|const"><span>start_proof</span></a><span> </span><span class="free"><span>csbl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csip</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cap</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>csip</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="free"><span>csbl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="bound"><span>csip</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_def|fact"><span>start_proof_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar_def|fact"><span>cs_bl_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_def|fact"><span>cs_ip_invar_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/lin_arith.ML.html#Fields.linarith|method"><span class="operator"><span>linarith</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def|fact"><span>cs_bl_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_start_proof|fact"><span>ct_start_proof</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
  </span><span class="comment1"><span>(* Formally start proof (change state type), but just set error flag *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error|const"><span>start_proof_error</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>start_proof_error</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_correct|thm"><span>start_proof_error_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csbl</span></span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_error|const"><span>start_proof_error</span></a><span> </span><span class="free"><span>csbl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csip</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="bound"><span>csip</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="free"><span>csbl</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="bound"><span>csip</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_error_def|fact"><span>start_proof_error_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar_def|fact"><span>cs_bl_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_def|fact"><span>cs_ip_invar_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;_def|fact"><span>cs_bl_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;_def|fact"><span>cs_ip_α_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Delete Clause›</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause|const"><span>delete_clause</span></span></span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>delete_clause</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>unsat</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="bound"><span>cdb</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete|const"><span>cdb_delete</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>err</span></span><span class="main"><span>,</span></span><span class="bound"><span>unsat</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.ran_del_ss|fact"><span class="entity_def" id="LRAT_Checker_Impl.ran_del_ss|thm"><span>ran_del_ss</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span class="main"><span>(</span></span><span class="free"><span>k</span></span><span class="main"><span>:=</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran|const"><span>ran</span></a><span> </span><span class="free"><span>m</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.ran_def|fact"><span>ran_def</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_correct|thm"><span>delete_clause_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>csop</span></span><span>  </span><span class="main"><span>⟧</span></span><span>
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clause|const"><span>delete_clause</span></a><span> </span><span class="free"><span>cid</span></span><span> </span><span class="free"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csop'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="bound"><span>csop'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>csop</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>csop'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clause_def|fact"><span>delete_clause_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete_def|fact"><span>cdb_delete_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ran_del_ss|fact"><span>ran_del_ss</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_mp|fact"><span>set_mp</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_refl|fact"><span>ct_refl</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_del_clauses|fact"><span>ct_del_clauses</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ran_del_ss|fact"><span>ran_del_ss</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_mp|fact"><span>set_mp</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    


  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Combining Checker with LRAT Parser›</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Using the </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span>›</span></span></span><span> interface to read from binary encoded files, 
    we define functions to parse them as LRAT, and make the corresponding transitions 
    on the checker state.
    
    The correctness lemmas show that the checker state invariants are preserved.
  ›</span></span></span><span>
  
  </span><span class="comment1"><span>(* Skip over uids until a 0 has been read. *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids|const"><span>skip_to_zero_uids</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>skip_to_zero_uids</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>prf<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_While.html#Refine_While.WHILEIT|const"><span>WHILEIT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>prf<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="bound"><span>brk</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_no_size_left|const"><span>brd_rs_no_size_left</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>brk</span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="main"><span>(</span></span><span class="bound"><span>cid</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_read_signed_id|const"><span>brd_rs_read_signed_id</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
          </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>cid</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>prf<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>prf</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_correct|thm"><span>skip_to_zero_uids_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><span>⟹</span></span><span> 
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.skip_to_zero_uids|const"><span>skip_to_zero_uids</span></a><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.skip_to_zero_uids_def|fact"><span>skip_to_zero_uids_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_While.html#Refine_While.while.WHILEIT_rule|fact"><span>WHILEIT_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> R</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>measure</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


  </span><span class="comment1"><span>(* Delete clauses. 
  
    Transition in LRAT proof: d ^ids 0 ↦ d ids 0^
  *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses|const"><span>delete_clauses</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>delete_clauses</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>prf<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Refine_Monadic_Add.html#Refine_Monadic_Add.monadic_WHILEIT|const"><span>monadic_WHILEIT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="bound"><span>brk</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>  </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_no_size_left|const"><span>brd_rs_no_size_left</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>brk</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="main"><span>(</span></span><span class="bound"><span>cid</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_read_signed_id|const"><span>brd_rs_read_signed_id</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>cid</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span> 
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clause|const"><span>delete_clause</span></a><span> </span><span class="bound"><span>cid</span></span><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span>
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>prf<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span> 
    

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_correct|thm"><span>delete_clauses_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clauses|const"><span>delete_clauses</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs'</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
        </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="bound"><span>cs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>cs'</span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clauses_def|fact"><span>delete_clauses_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_WHILEIT_strengthen_invar_rule|fact"><span>monadic_WHILEIT_strengthen_invar_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> 
          Inew</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs'</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
              </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="bound"><span>cs'</span></span><span> 
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>cs'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> R</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>measure</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="main"><span class="main"><span>]</span></span></span><span> 
    </span><span class="main"><span>)</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
        
  </span><span class="comment1"><span>(*
    Parse and add literals, until terminating zero has been found.
    
    Transition in LRAT proof: a ^lits 0 cids 0 ↦ a lits 0 ^cids 0
    
  *)</span></span><span>    
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.err_code_no_term_zero_lit|const"><span>err_code_no_term_zero_lit</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>0x5</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop|const"><span>add_literals_loop</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_build_lemma|type"><span>checker_state_build_lemma</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>add_literals_loop</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>prf</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="bound"><span>ctd</span></span><span class="main"><span>)</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="../Isabelle_LLVM/Refine_Monadic_Add.html#Refine_Monadic_Add.monadic_WHILEIT|const"><span>monadic_WHILEIT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="bound"><span>ctd</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_no_size_left|const"><span>brd_rs_no_size_left</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>ctd</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_read_ulito|const"><span>brd_rs_read_ulito</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
          </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.PARSED_LRAT_LIT|const"><span>PARSED_LRAT_LIT</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Autoref_Bindings_HOL.html#Autoref_Bindings_HOL.is_None|const"><span>is_None</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literal|const"><span>add_literal</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span>
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>prf</span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>ctd</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.ERROR|const"><span>ERROR</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.err_code_no_term_zero_lit|const"><span>err_code_no_term_zero_lit</span></a><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>cs</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_error|const"><span>start_proof_error</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>  
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>  
      </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>  
        </span><span class="bound"><span>cs</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof|const"><span>start_proof</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>  
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>  
      </span><span class="main"><span>}</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_correct|thm"><span>add_literals_loop_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literals_loop|const"><span>add_literals_loop</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs'</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
          </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span> 
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span>
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs'</span></span><span> 
        </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="bound"><span>cs'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literals_loop_def|fact"><span>add_literals_loop_def</span></a><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_WHILEIT_strengthen_invar_rule|fact"><span>monadic_WHILEIT_strengthen_invar_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> 
          Inew</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs'</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>,</span></span><span class="bound"><span>ctd</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
              </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span>
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>ctd</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs'</span></span><span> 
            </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_\&lt;alpha&gt;|const"><span>cs_bl_α</span></a><span> </span><span class="bound"><span>cs'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> R</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>measure</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="main"><span class="main"><span>]</span></span></span><span> 
    </span><span class="main"><span>)</span></span><span>  
    
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Eisbach.Eisbach.html#Eisbach.all|method"><span class="operator"><span>all</span></span></a><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar|const"><span>cs_bl_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar|const"><span>checker_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_invar_antimono|fact"><span>cs_bl_invar_antimono</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_antimono|fact"><span>cs_ip_invar_antimono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
  </span><span class="comment1"><span>(*
    Parse clause ids and perform proof steps:
    
    Transition in LRAT proof: a lits 0 ^cids 0 ↦ a lits 0 cids 0^
  *)</span></span><span>    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop|const"><span>prove_units_loop</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_in_proof|type"><span>checker_state_in_proof</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>prove_units_loop</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>prf</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="../Isabelle_LLVM/Refine_Monadic_Add.html#Refine_Monadic_Add.monadic_WHILEIT|const"><span>monadic_WHILEIT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="bound"><span>brk</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_no_size_left|const"><span>brd_rs_no_size_left</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>brk</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="main"><span>(</span></span><span class="bound"><span>cid</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_read_signed_id|const"><span>brd_rs_read_signed_id</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
          </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.PARSED_LRAT_ID|const"><span>PARSED_LRAT_ID</span></a><span> </span><span class="bound"><span>cid</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>cid</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step|const"><span>proof_step</span></a><span> </span><span class="bound"><span>cid</span></span><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span>
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>prf</span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>  
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_correct|thm"><span>prove_units_loop_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.prove_units_loop|const"><span>prove_units_loop</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs'</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs'</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="bound"><span>cs'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.prove_units_loop_def|fact"><span>prove_units_loop_def</span></a><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_WHILEIT_strengthen_invar_rule|fact"><span>monadic_WHILEIT_strengthen_invar_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> 
          Inew</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs'</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf'</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
                  </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf'</span></span><span> 
                </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span> 
                </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf'</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs'</span></span><span> 
                </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_\&lt;alpha&gt;|const"><span>cs_ip_α</span></a><span> </span><span class="bound"><span>cs'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> R</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>measure</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="main"><span class="main"><span>]</span></span></span><span> 
    </span><span class="main"><span>)</span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="comment1"><span>(* Discharge schematics very specifically. Otherwise, we'll get wrong matches on "0&lt;cap" leading to unprovable goals. *)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Eisbach.Eisbach.html#Eisbach.all|method"><span class="operator"><span>all</span></span></a><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar|const"><span>checker_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar_antimono|fact"><span>cs_ip_invar_antimono</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    

  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>synth_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free|const"><span>rdmem_it_free</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.MK_FREE|const"><span>MK_FREE</span></a><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_it_assn|const"><span>rdmem_it_assn</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/HOL-Library.Rewrite.html#Rewrite.rewrite_HOLE|const"><span>⌑</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_it_assn_def|fact"><span>rdmem_it_assn_def</span></a><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_it_assn_raw_def|fact"><span>rdmem_it_assn_raw_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_it_free_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_dbg_side|method"><span class="operator"><span>sepref_dbg_side</span></span></a><span>
    

  </span><span class="comment1"><span>(*
    Main proof checker loop, integrating LRAT-parser and checker
  *)</span></span><span>        
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop|const"><span>main_checker_loop</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs|type"><span>brd_rs</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>main_checker_loop</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>prf</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="../Isabelle_LLVM/Refine_Monadic_Add.html#Refine_Monadic_Add.monadic_WHILEIT|const"><span>monadic_WHILEIT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_no_size_left|const"><span>brd_rs_no_size_left</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_read|const"><span>brd_rs_read</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.char_a|const"><span>char_a</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="comment1"><span>― ‹'a' cid lits 0 cids 0 ›</span></span><span>
            </span><span class="main"><span>(</span></span><span class="bound"><span>cid</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_read_signed_id_ndecr|const"><span>brd_rs_read_signed_id_ndecr</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
            
            </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.PARSED_LRAT_ADD|const"><span>PARSED_LRAT_ADD</span></a><span> </span><span class="bound"><span>cid</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>cs</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_lemma|const"><span>start_lemma</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>
            </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literals_loop|const"><span>add_literals_loop</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
            </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.prove_units_loop|const"><span>prove_units_loop</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.finish_proof|const"><span>finish_proof</span></a><span> </span><span class="bound"><span>cid</span></span><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.char_d|const"><span>char_d</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="comment1"><span>― ‹'d' uids 0 ›</span></span><span>
            </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clauses|const"><span>delete_clauses</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.ERROR|const"><span>ERROR</span></a><span> </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.err_code_syntax_error|const"><span>err_code_syntax_error</span></a><span class="main"><span>;</span></span><span>
            </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>;</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span>
        
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cs</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>prf</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>  
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>     
    
    
  </span><span class="comment1"><span>(* TODO: The next two lemmas are purely technical, b/c clarsimp splits products too early, and 
    thus prevents more conceptual lemmas on csop_set_error *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_err|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_invar_err|thm"><span>cs_op_invar_err</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>err</span></span><span class="main"><span>,</span></span><span class="free"><span>unsat</span></span><span class="main"><span>,</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>cdb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><span class="free"><span>unsat</span></span><span class="main"><span>,</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>cdb</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.checker_invar_err|fact"><span class="entity_def" id="LRAT_Checker_Impl.checker_invar_err|thm"><span>checker_invar_err</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar|const"><span>checker_invar</span></a><span> </span><span class="free"><span>F<span class="hidden">⇩</span><sub>0</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><span> </span><span class="free"><span>unsat</span></span><span class="main"><span>,</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar.simps|fact"><span>checker_invar.simps</span></a><span class="main"><span>)</span></span><span>   
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_err|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_err|thm"><span>cs_op_α_err</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>,</span></span><span> </span><span class="free"><span>unsat</span></span><span class="main"><span>,</span></span><span class="free"><span>A</span></span><span class="main"><span>,</span></span><span class="free"><span>cdb</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>FAIL</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.csop_unsat_\&lt;alpha&gt;|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_unsat_\&lt;alpha&gt;|thm"><span>csop_unsat_α</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.UNSAT|const"><span>UNSAT</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat_def|fact"><span>csop_is_unsat_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error_def|fact"><span>csop_is_error_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>cs</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> 
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.csop_unsat_imp_unsat|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_unsat_imp_unsat|thm"><span>csop_unsat_imp_unsat</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap</span></span><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar|const"><span>checker_invar</span></a><span> </span><span class="free"><span>F<span class="hidden">⇩</span><sub>0</sub></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.sat|const"><span>sat</span></a><span> </span><span class="free"><span>F<span class="hidden">⇩</span><sub>0</sub></span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat_def|fact"><span>csop_is_unsat_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error_def|fact"><span>csop_is_error_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>cs</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar.simps|fact"><span>checker_invar.simps</span></a><span class="main"><span>)</span></span><span> 
    
  </span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_correct|thm"><span>main_checker_loop_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="free"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>cs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.CNF|const"><span>CNF</span></a><span> </span><span class="free"><span>F<span class="hidden">⇩</span><sub>0</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="free"><span>cs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop|const"><span>main_checker_loop</span></a><span> </span><span class="free"><span>cs</span></span><span> </span><span class="free"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>r</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.sat|const"><span>sat</span></a><span> </span><span class="free"><span>F<span class="hidden">⇩</span><sub>0</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  "</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop_def|fact"><span>main_checker_loop_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error_def|fact"><span>csop_set_error_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.monadic_WHILEIT_strengthen_invar_rule|fact"><span>monadic_WHILEIT_strengthen_invar_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span>   
          Inew</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_invar|const"><span>brd_rs_invar</span></a><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Transitive_Closure.html#Transitive_Closure.rtranclp|const"><span>rtranclp</span></a><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans|const"><span>checker_trans</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.CNF|const"><span>CNF</span></a><span> </span><span class="free"><span>F<span class="hidden">⇩</span><sub>0</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span> R</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>measure</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_remsize|const"><span>brd_rs_remsize</span></a><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_err|fact"><span>cs_op_α_err</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_unsat_\&lt;alpha&gt;|fact"><span>csop_unsat_α</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Eisbach.Eisbach.html#Eisbach.all|method"><span class="operator"><span>all</span></span></a><span> </span><span class="quoted"><span>‹</span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_invar|const"><span>cs_ip_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><span>asm_rl</span><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_invar|const"><span>checker_invar</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span>›</span></span><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 
      </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.parsed1_remsize|fact"><span>parsed1_remsize</span></a><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.parsed_remsize|fact"><span>parsed_remsize</span></a><span> 
      </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_antimono|fact"><span>cs_op_invar_antimono</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_error_antimono|fact"><span>cs_op_invar_error_antimono</span></a><span> 
      </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans.ct_fail|fact"><span>ct_fail</span></a><span> 
      </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_trans_rtrancl_unsatI|fact"><span>checker_trans_rtrancl_unsatI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>    
    

  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Combining CNF Parser with Checker›</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹In this section, we combine the CNF parser and the main checker loop›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Convert builder state to checker state›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
    Our DIMACS parser uses a </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">typ</span><span class="hidden">&gt;</span></span></span><span class="quoted"><span>‹</span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.builder_state|type"><span>builder_state</span></a><span>›</span></span></span><span> to construct the initial formula.
    First, we have to convert it into an initial checker state.
  ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.info_code_ncid|const"><span>info_code_ncid</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>0x1</span></a></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.info_code_maxlit|const"><span>info_code_maxlit</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>0x2</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building|const"><span>builder_finish_building</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.builder_state|type"><span>builder_state</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>builder_finish_building</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>ncid</span></span><span class="main"><span>,</span></span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="bound"><span>ml</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_get_maxlit|const"><span>cbld_get_maxlit</span></a><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>;</span></span><span>
    
      </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.INFO_cid|const"><span>INFO_cid</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.info_code_ncid|const"><span>info_code_ncid</span></a><span> </span><span class="bound"><span>ncid</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="Debugging_Tools.html#Debugging_Tools.INFO_ulit|const"><span>INFO_ulit</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.info_code_maxlit|const"><span>info_code_maxlit</span></a><span> </span><span class="bound"><span>ml</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>A</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_empty|const"><span>rpan_empty</span></a><span> </span><span class="bound"><span>ml</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>;</span></span><span>  
      
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>,</span></span><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>cbld</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>A</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_correct|thm"><span>builder_finish_building_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_invar|const"><span>bs_invar</span></a><span> </span><span class="free"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>cap<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>bs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_\&lt;alpha&gt;C|const"><span>bs_αC</span></a><span> </span><span class="free"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.builder_finish_building|const"><span>builder_finish_building</span></a><span> </span><span class="free"><span>bs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>csop</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="free"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>csop</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.CNF|const"><span>CNF</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_\&lt;alpha&gt;F|const"><span>bs_αF</span></a><span> </span><span class="free"><span>bs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.builder_finish_building_def|fact"><span>builder_finish_building_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_invar_def|fact"><span>bs_invar_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_invar_def|fact"><span>cbld_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_invar_def|fact"><span>bs_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_common_invar_def|fact"><span>cs_common_invar_def</span></a><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_\&lt;alpha&gt;C_def|fact"><span>bs_αC_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.maxlit_vdom_def|fact"><span>maxlit_vdom_def</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastAtMost_iff|fact"><span>atLeastAtMost_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.basic_trans_rules|fact"><span>basic_trans_rules</span></a><span class="main"><span class="main"><span>(</span></span></span><span>31</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_eqI|fact"><span>image_eqI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Complete_Lattices.html#Complete_Lattices.mem_simps|fact"><span>mem_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>9</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of_inv|fact"><span>ulit_of_inv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_of_inv|fact"><span>ulit_of_inv</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar_def|fact"><span>cs_op_invar_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;_def|fact"><span>cs_op_α_def</span></a><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_invar_def|fact"><span>bs_invar_def</span></a><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_\&lt;alpha&gt;F_def|fact"><span>bs_αF_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Read DIMACS file to initial checker state›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs|const"><span>read_dimacs_cs</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input|type"><span>input</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.checker_state_out_proof|type"><span>checker_state_out_proof</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>read_dimacs_cs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>dimacs_input</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>bs</span></span><span class="main"><span>,</span></span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>,</span></span><span class="bound"><span>err</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.read_dimacs_file|const"><span>read_dimacs_file</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>dimacs_input</span></span></span></span><span class="main"><span>;</span></span><span>
    
    </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.builder_finish_building|const"><span>builder_finish_building</span></a><span> </span><span class="bound"><span>bs</span></span><span class="main"><span>;</span></span><span>
    
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>err</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_correct|thm"><span>read_dimacs_cs_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>" 
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs|const"><span>read_dimacs_cs</span></a><span> </span><span class="free"><span>dimacs_input</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>cs</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>fml</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.i_data|const"><span>i_data</span></a><span> </span><span class="free"><span>dimacs_input</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>fml</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Ndet_Parser_Monad.html#Ndet_Parser_Monad.gM.gM_rel|const"><span>gM_rel</span></a><span> </span><a class="entity_ref" href="CNF_Grammar.html#CNF_Grammar.cnf_dimacs|const"><span>cnf_dimacs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.CNF|const"><span>CNF</span></a><span> </span><span class="bound"><span>fml</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs_def|fact"><span>read_dimacs_cs_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
    </span><span class="comment1"><span>(* Unfortunately, in the below proof, there's an ughly interplay between Isabelle's clarify splitting tuple variables,
      and the re-orientation of equations such as "csop_set_error xa = x1". This required some manual work … *)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/hypsubst.ML.html#HOL.hypsubst|method"><span class="operator"><span>hypsubst</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>fail</span></span><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/hypsubst.ML.html#HOL.hypsubst|method"><span class="operator"><span>hypsubst</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>fail</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
  </span><span class="comment1"><span>(* For paper: *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>" 
    </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs|const"><span>read_dimacs_cs</span></a><span> </span><span class="free"><span>dimacs_input</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_invar|const"><span>cs_op_invar</span></a><span> </span><span class="bound"><span>cap<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>cs</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.FAIL|const"><span>FAIL</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>fml</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.i_data|const"><span>i_data</span></a><span> </span><span class="free"><span>dimacs_input</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>fml</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Ndet_Parser_Monad.html#Ndet_Parser_Monad.gM.gM_rel|const"><span>gM_rel</span></a><span> </span><a class="entity_ref" href="CNF_Grammar.html#CNF_Grammar.cnf_dimacs|const"><span>cnf_dimacs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_\&lt;alpha&gt;|const"><span>cs_op_α</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Relaxed_Assignment.html#Relaxed_Assignment.checker_state.CNF|const"><span>CNF</span></a><span> </span><span class="bound"><span>fml</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf|const"><span>ll_dbg_tag_parsed_cnf</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>err</span></span></span></span><span class="main"><span>::</span></span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf|const"><span>ll_dbg_tag_parsed_cnf</span></a><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span> 
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf|const"><span>ll_dbg_tag_parsed_cnf</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl|const"><span>ll_dbg_tag_parsed_cnf_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf|const"><span>ll_dbg_tag_parsed_cnf</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.word_assn|const"><span>word_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.unit_assn|const"><span>unit_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_def|fact"><span>ll_dbg_tag_parsed_cnf_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
      
    
  </span><span class="keyword1"><span class="command"><span>paragraph</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Read DIMACS file and run checker›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat|const"><span>read_check_lrat</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input|type"><span>input</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>read_check_lrat</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>cs</span></span><span class="main"><span>,</span></span><span class="bound"><span>cap</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs|const"><span>read_dimacs_cs</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf|const"><span>ll_dbg_tag_parsed_cnf</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>
    </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.VCG_STOP|const"><span>VCG_STOP</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> 
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>prf</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_new|const"><span>brd_rs_new</span></a><span> </span><span class="bound"><span>cap</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.ll_dbg_tag_parsed_cnf|const"><span>ll_dbg_tag_parsed_cnf</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>;</span></span><span>
      </span><span class="main"><span>(</span></span><span class="bound"><span>res</span></span><span class="main"><span>,</span></span><span class="bound"><span>prf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop|const"><span>main_checker_loop</span></a><span> </span><span class="bound"><span>cs</span></span><span> </span><span class="bound"><span>prf</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>res</span></span><span>
    </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹This is the correctness theorem of the functional abstraction level checker:
  
    If it returns true, the input was a valid representation of an unsatisfiable formula.
  ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_correct|thm"><span>read_check_lrat_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat|const"><span>read_check_lrat</span></a><span> </span><span class="free"><span>cnf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> 
    </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.i_data|const"><span>i_data</span></a><span> </span><span class="free"><span>cnf</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Ndet_Parser_Monad.html#Ndet_Parser_Monad.gM.gM_rel|const"><span>gM_rel</span></a><span> </span><a class="entity_ref" href="CNF_Grammar.html#CNF_Grammar.cnf_dimacs|const"><span>cnf_dimacs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.sat|const"><span>sat</span></a><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_def|fact"><span>read_check_lrat_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    
    </span><span class="comment1"><span>(* We need to instantiate existentials at this point, 
      before the VCG introduces more schematic variables, so we have used the 
      VCG_STOP tag to stop the VCG.
    *)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.VCG_STOP|fact"><span>VCG_STOP</span></a><span class="main"><span>)</span></span><span> </span><span class="comment1"><span>(* Resume VCG *)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    
  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Refinement to LLVM›</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We refine from the functional level to the imperative level.
    This is done by the Sepref tool, and mostly automatic.
  ›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Concrete Checker States and Transitions›</span></span></span><span>      
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_assn_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_assn_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_assn_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_assn|const"><span>cbld_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></a><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_assn_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_assn_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_assn_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_assn|const"><span>cbld_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a><span>"</span></span></span><span>  
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_assn_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_assn_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_assn_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Reversible_Assignment.html#DS_Reversible_Assignment.rpan_assn|const"><span>rpan_assn</span></a><span>  </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Builder.html#DS_Clause_Builder.cbld_assn|const"><span>cbld_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></a><span>"</span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step|const"><span>proof_step</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.finish_proof|const"><span>finish_proof</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_lemma|const"><span>start_lemma</span></a></span><span>
    </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literal|const"><span>add_literal</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof|const"><span>start_proof</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_error|const"><span>start_proof_error</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clause|const"><span>delete_clause</span></a></span><span>
  
  </span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step|const"><span>proof_step</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl|const"><span>proof_step_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step|const"><span>proof_step</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.proof_step_def|fact"><span>proof_step_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn_def|fact"><span>cs_ip_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.proof_step_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl|const"><span>csop_set_error_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error|const"><span>csop_set_error</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_set_error_def|fact"><span>csop_set_error_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_set_error_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl|const"><span>csop_is_error_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error|const"><span>csop_is_error</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_error_def|fact"><span>csop_is_error_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_error_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl|const"><span>csop_is_unsat_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat|const"><span>csop_is_unsat</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.csop_is_unsat_def|fact"><span>csop_is_unsat_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.csop_is_unsat_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl|const"><span>finish_proof_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.finish_proof|const"><span>finish_proof</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.finish_proof_def|fact"><span>finish_proof_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn_def|fact"><span>cs_ip_assn_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.finish_proof_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl|const"><span>start_lemma_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_lemma|const"><span>start_lemma</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_lemma_def|fact"><span>start_lemma_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn_def|fact"><span>cs_bl_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_lemma_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl|const"><span>add_literal_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literal|const"><span>add_literal</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_assn|const"><span>ulit_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literal_def|fact"><span>add_literal_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn_def|fact"><span>cs_bl_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literal_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl|const"><span>start_proof_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof|const"><span>start_proof</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_def|fact"><span>start_proof_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn_def|fact"><span>cs_bl_assn_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn_def|fact"><span>cs_ip_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span> 
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl|const"><span>start_proof_error_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_error|const"><span>start_proof_error</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.start_proof_error_def|fact"><span>start_proof_error_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn_def|fact"><span>cs_bl_assn_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn_def|fact"><span>cs_ip_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.start_proof_error_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span> 
      
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl|const"><span>delete_clause_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clause|const"><span>delete_clause</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clause_def|fact"><span>delete_clause_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clause_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span> 

  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Checker with LRAT Parser, up to </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop|const"><span>main_checker_loop</span></a><span>›</span></span><span>›</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.skip_to_zero_uids|const"><span>skip_to_zero_uids</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clauses|const"><span>delete_clauses</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literals_loop|const"><span>add_literals_loop</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.prove_units_loop|const"><span>prove_units_loop</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop|const"><span>main_checker_loop</span></a></span><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl|const"><span>skip_to_zero_uids_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.skip_to_zero_uids|const"><span>skip_to_zero_uids</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.skip_to_zero_uids_def|fact"><span>skip_to_zero_uids_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_T|const"><span>size_T</span></a></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.skip_to_zero_uids_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>    

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl|const"><span>delete_clauses_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clauses|const"><span>delete_clauses</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.delete_clauses_def|fact"><span>delete_clauses_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_T|const"><span>size_T</span></a></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.delete_clauses_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>    
        
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl|const"><span>add_literals_loop_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literals_loop|const"><span>add_literals_loop</span></a><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_bl_assn|const"><span>cs_bl_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.add_literals_loop_def|fact"><span>add_literals_loop_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.add_literals_loop_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
      
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl|const"><span>prove_units_loop_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.prove_units_loop|const"><span>prove_units_loop</span></a><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_ip_assn|const"><span>cs_ip_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.prove_units_loop_def|fact"><span>prove_units_loop_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_T|const"><span>size_T</span></a></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.prove_units_loop_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    

  </span><span class="keyword1"><span class="command"><span>synth_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free|const"><span>cs_op_free</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.MK_FREE|const"><span>MK_FREE</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/HOL-Library.Rewrite.html#Rewrite.rewrite_HOLE|const"><span>⌑</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span> 
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.cs_op_free_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_dbg_side|method"><span class="operator"><span>sepref_dbg_side</span></span></a><span> </span><span class="comment1"><span>(* TODO: Use proper tactic *)</span></span><span>
    
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl|const"><span>main_checker_loop_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop|const"><span>main_checker_loop</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Parsers.html#LRAT_Parsers.brd_rs_assn|const"><span>brd_rs_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.main_checker_loop_def|fact"><span>main_checker_loop_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>goals_limit</span></span><span> </span><span class="main"><span class="main"><span>=</span></span></span><span> 1</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.main_checker_loop_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
    
    
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Combination with CNF Parser›</span></span></span><span>    
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs.itype|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> 
    </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.builder_finish_building|const"><span>builder_finish_building</span></a></span><span> 
    </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs|const"><span>read_dimacs_cs</span></a></span><span>
   
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl|const"><span>builder_finish_building_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.builder_finish_building|const"><span>builder_finish_building</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_assn|const"><span>bs_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.builder_finish_building_def|fact"><span>builder_finish_building_def</span></a><span> </span><a class="entity_ref" href="CNF_Parser_Impl.html#CNF_Parser_Impl.bs_assn_def|fact"><span>bs_assn_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn_def|fact"><span>cs_op_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_T|const"><span>size_T</span></a></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.builder_finish_building_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl|const"><span>read_dimacs_cs_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs|const"><span>read_dimacs_cs</span></a><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn|const"><span>rdmem_inp_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.cs_op_assn|const"><span>cs_op_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_dimacs_cs_def|fact"><span>read_dimacs_cs_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_dimacs_cs_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat|const"><span>read_check_lrat</span></a></span><span>  

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl|const"><span>read_check_lrat_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat|const"><span>read_check_lrat</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn|const"><span>rdmem_inp_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_def|fact"><span>read_check_lrat_def</span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.VCG_STOP_def|fact"><span>VCG_STOP_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

    
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Wrapping into Nicer Interface›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹In order to interface with C, we unfold some definitions:
    </span><span class="antiquoted"><span>▪</span></span><span> we pass a pointer and a size, rather than the tuple defined by </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn|const"><span>rdmem_inp_assn</span></a><span>›</span></span><span> 
    </span><span class="antiquoted"><span>▪</span></span><span> we return a byte (i8) instead of a bit (i1)
  ›</span></span></span><span>
    
  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size|const"><span>make_input_from_array_and_size</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>::</span></span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.INPUT|const"><span>INPUT</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size_correct|thm"><span>make_input_from_array_and_size_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.make_input_from_array_and_size|const"><span>make_input_from_array_and_size</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.i_data|const"><span>i_data</span></a><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.make_input_from_array_and_size_def|fact"><span>make_input_from_array_and_size_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp|const"><span>mk_rdmem_inp</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp|type"><span>rdmem_inp</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>mk_rdmem_inp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>n</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data|const"><span>rdmem_data</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp|type"><span>rdmem_inp</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>rdmem_data</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>xs</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_refine|thm"><span>mk_rdmem_inp_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp|const"><span>mk_rdmem_inp</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.make_input_from_array_and_size|const"><span>make_input_from_array_and_size</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_rel|const"><span>rdmem_inp_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp_def|fact"><span>mk_rdmem_inp_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.make_input_from_array_and_size_def|fact"><span>make_input_from_array_and_size_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_rel_def|fact"><span>rdmem_inp_rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_refine|thm"><span>rdmem_data_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data|const"><span>rdmem_data</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.i_data|const"><span>i_data</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_rel|const"><span>rdmem_inp_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data_def|fact"><span>rdmem_data_def</span></a><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_rel_def|fact"><span>rdmem_inp_rel_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl|const"><span>mk_rdmem_inp_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp|const"><span>mk_rdmem_inp</span></a><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn|const"><span>array_slice_assn</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn_raw|const"><span>rdmem_inp_assn_raw</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>p</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>p'</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>p'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>p</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp_def|fact"><span>mk_rdmem_inp_def</span></a><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn_raw_def|fact"><span>rdmem_inp_assn_raw_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.mk_rdmem_inp_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>  

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl|const"><span>rdmem_data_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data|const"><span>rdmem_data</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn_raw|const"><span>rdmem_inp_assn_raw</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn|const"><span>array_slice_assn</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>p</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>p'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>p'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>p</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data_def|fact"><span>rdmem_data_def</span></a><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn_raw_def|fact"><span>rdmem_inp_assn_raw_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.rdmem_data_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>  
    
    
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size.mcomb|fact"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size.arity|fact"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size.itype|fact"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size.mcomb|thm"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size.arity|thm"><span class="entity_def" id="LRAT_Checker_Impl.make_input_from_array_and_size.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.make_input_from_array_and_size|const"><span>make_input_from_array_and_size</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.rdmem_inp_assn_def|fact"><span>rdmem_inp_assn_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp_impl.refine|fact"><span>mk_rdmem_inp_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp_refine|fact"><span>mk_rdmem_inp_refine</span></a><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data_impl.refine|fact"><span>rdmem_data_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data_refine|fact"><span>rdmem_data_refine</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  
    
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_wrapper_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_wrapper_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_wrapper_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_wrapper|const"><span>read_check_lrat_wrapper</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnfp</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf_size</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>cnf</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.make_input_from_array_and_size|const"><span>make_input_from_array_and_size</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnfp</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf_size</span></span></span></span><span class="main"><span>;</span></span><span>
    
    </span><span class="bound"><span>res</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat|const"><span>read_check_lrat</span></a><span> </span><span class="bound"><span>cnf</span></span><span class="main"><span>;</span></span><span>
    
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>cnfp'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Parser_Input.html#Parser_Input.input.i_data|const"><span>i_data</span></a><span> </span><span class="bound"><span>cnf</span></span><span class="main"><span>;</span></span><span>
    
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>cnfp'</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnfp</span></span></span></span><span class="main"><span>;</span></span><span>
    
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>res</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_spec_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_spec_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_spec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_spec|const"><span>lrat_checker_spec</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>lrat_checker_spec</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf_size</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cnf_size</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cnf</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cnf</span></span></span></span><span class="main"><span>,</span></span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="Ndet_Parser_Monad.html#Ndet_Parser_Monad.gM.gM_rel|const"><span>gM_rel</span></a><span> </span><a class="entity_ref" href="CNF_Grammar.html#CNF_Grammar.cnf_dimacs|const"><span>cnf_dimacs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.sat|const"><span>sat</span></a><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_wrapper_refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.read_check_lrat_wrapper_refine|thm"><span>read_check_lrat_wrapper_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_wrapper|const"><span>read_check_lrat_wrapper</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec|const"><span>lrat_checker_spec</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_wrapper_def|fact"><span>read_check_lrat_wrapper_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec_def|fact"><span>lrat_checker_spec_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker|const"><span>lrat_checker</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_wrapper|const"><span>read_check_lrat_wrapper</span></a><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn|const"><span>array_slice_assn</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.char_assn|const"><span>char_assn</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_wrapper_def|fact"><span>read_check_lrat_wrapper_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_unat_const|method"><span class="operator"><span>annot_unat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.char_T|const"><span>char_T</span></a></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker.refine|fact"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_def|fact"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker.refine_raw|fact"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker.refine|thm"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_def|thm"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker.refine_raw|thm"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_refines_spec|fact"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_refines_spec|thm"><span>lrat_checker_refines_spec</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker|const"><span>lrat_checker</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec|const"><span>lrat_checker_spec</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span>   </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn|const"><span>IICF_Array.array_slice_assn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.word_assn&apos;|const"><span>word_assn'</span></a><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.char_T|const"><span>char_T</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.unat_assn&apos;|const"><span>unat_assn'</span></a><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.char_T|const"><span>char_T</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker.refine|fact"><span>lrat_checker.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_wrapper_refine|fact"><span>read_check_lrat_wrapper_refine</span></a><span class="main"><span>]</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>  
  
  </span><span class="comment1"><span>(* Alternative definition of lrat_checker, as presented in paper. *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker|const"><span>lrat_checker</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do<span class="hidden">⇩</span><sub>M</sub></span></span><span> </span><span class="main"><span>{</span></span><span>
           </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.read_check_lrat_impl|const"><span>read_check_lrat_impl</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>p</span></span><span class="main"><span>,</span></span><span class="free"><span>n</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
           </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llc_if|const"><span>llc_if</span></a><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>return<span class="hidden">⇩</span><sub>M</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>return<span class="hidden">⇩</span><sub>M</sub></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>
         </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_def|fact"><span>lrat_checker_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.mk_rdmem_inp_impl_def|fact"><span>mk_rdmem_inp_impl_def</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.rdmem_data_impl_def|fact"><span>rdmem_data_impl_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
         
    
  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Generation of LLVM and Correctness Theorem›</span></span></span><span>  
    
  </span><span class="keyword1"><span class="command"><span>export_llvm</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker|const"><span>lrat_checker</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword2"><span>uint8_t</span></span><span> lrat_checker</span><span class="main"><span>(</span></span><span class="keyword2"><span>uint8_t</span></span><span> </span><span class="main"><span>*</span></span><span class="main"><span>,</span></span><span> </span><span class="keyword2"><span>int64_t</span></span><span class="main"><span>)</span></span><span>"</span></span><span>  
    </span><span class="keyword2"><span class="keyword"><span>file</span></span></span><span> </span><span class="quoted"><span>"../code/lrat_isa_export.ll"</span></span><span>
              

  </span><span class="comment1"><span>(* Low-level correctness theorem as Hoare-Triple *)</span></span><span>    
  </span><span class="keyword1"><span class="command"><span>theorem</span></span></span><span> </span><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_correct|fact"><span class="entity_def" id="LRAT_Checker_Impl.lrat_checker_correct|thm"><span>lrat_checker_correct</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow_RS.html#LLVM_Shallow_RS.llvm_htriple|const"><span>llvm_htriple</span></a><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.raw_array_slice_assn|const"><span>raw_array_slice_assn</span></a><span> </span><span class="free"><span>cnf</span></span><span> </span><span class="free"><span>cnf_ptr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span> </span><span class="free"><span>cnf_size</span></span><span> </span><span class="free"><span>cnf_sizei</span></span><span>  
      </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="main"><span>(</span></span><span class="free"><span>cnf_size</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>cnf</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker|const"><span>lrat_checker</span></a><span> </span><span class="free"><span>cnf_ptr</span></span><span> </span><span class="free"><span>cnf_sizei</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.raw_array_slice_assn|const"><span>raw_array_slice_assn</span></a><span> </span><span class="free"><span>cnf</span></span><span> </span><span class="free"><span>cnf_ptr</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span> </span><span class="free"><span>cnf_size</span></span><span> </span><span class="free"><span>cnf_sizei</span></span><span>  
      </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="main"><span>(</span></span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cnf</span></span><span class="main"><span>,</span></span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="Ndet_Parser_Monad.html#Ndet_Parser_Monad.gM.gM_rel|const"><span>gM_rel</span></a><span> </span><a class="entity_ref" href="CNF_Grammar.html#CNF_Grammar.cnf_dimacs|const"><span>cnf_dimacs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.sat|const"><span>sat</span></a><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Simple_Memory_RS.html#LLVM_Simple_Memory_RS.htriple_pure_preI|fact"><span>htriple_pure_preI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Basic_VCG.html#Basic_VCG.vcg_prepare_external|method"><span class="operator"><span>vcg_prepare_external</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_42021..42025">AUX1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn|const"><span>array_slice_assn</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.id_assn|const"><span>id_assn</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.raw_array_slice_assn|const"><span>raw_array_slice_assn</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn_def|fact"><span>array_slice_assn_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nofail|const"><span>nofail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec|const"><span>lrat_checker_spec</span></a><span> </span><span class="free"><span>cnf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>cnf</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec_def|fact"><span>lrat_checker_spec_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cnf_size</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>cnf</span></span><span>"</span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_42302..42306">AUX2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>Refine_Basic.RETURN</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec|const"><span>lrat_checker_spec</span></a><span> </span><span class="free"><span>cnf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>cnf</span></span><span class="main"><span>)</span></span><span> 
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>F</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cnf</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Ndet_Parser_Monad.html#Ndet_Parser_Monad.gM.gM_rel|const"><span>gM_rel</span></a><span> </span><a class="entity_ref" href="CNF_Grammar.html#CNF_Grammar.cnf_dimacs|const"><span>cnf_dimacs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="SAT_Basic.html#SAT_Basic.sat|const"><span>sat</span></a><span> </span><span class="bound"><span>F</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_spec_def|fact"><span>lrat_checker_spec_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>T1</span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Basic_VCG.html#Basic_VCG.vcg_rules|attribute"><span class="operator"><span>vcg_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#LRAT_Checker_Impl.lrat_checker_refines_spec|fact"><span>lrat_checker_refines_spec</span></a><span class="main"><span>[</span></span><span>
                </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefD|fact"><span>hfrefD</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.hn_refineD|fact"><span>hn_refineD</span></a><span class="main"><span>,</span></span><span> 
                </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>cnf</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>cnf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>cnf_ptr</span></span><span class="main"><span>,</span></span><span class="free"><span>cnf_sizei</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>,</span></span><span> 
                </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_42021..42025"><span>AUX1</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simplified</span></span><span class="main"><span>]</span></span><span>

    </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.unat.rel_def|fact"><span>unat.rel_def</span></a><span>                
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_42747..42751">AUX3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.unat_assn|const"><span>unat_assn</span></a><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="main"><span>(</span></span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.unat|const"><span>unat</span></a><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.unat_rel_def|fact"><span>unat_rel_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.unat.rel_def|fact"><span>unat.rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.pure_def|fact"><span>pure_def</span></a><span class="main"><span>)</span></span><span>
                
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_42903..42907">AUX4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.unat|const"><span>unat</span></a><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>8</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.unat_gt_0|fact"><span>unat_gt_0</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.dest|attribute"><span class="operator"><span>dest</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_42302..42306"><span>AUX2</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD1|fact"><span>iffD1</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>rule_format</span></span><span class="main"><span>]</span></span><span>  </span><span class="comment1"><span>(* TODO/FIXME: Using AUX2 as simp triggers some strange interaction with solver preparing goal to be solved by auto! (VCG_External_Solving.prepare_subgoal_tac) *)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_42747..42751"><span>AUX3</span></a><span> </span><a class="entity_ref" href="LRAT_Checker_Impl.html#offset_42903..42907"><span>AUX4</span></a><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Basic_VCG.html#Basic_VCG.vcg|method"><span class="operator"><span>vcg</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>      
      
  </span><span class="comment1"><span>(* Meaning of size_assn *)</span></span><span>      
  </span><span class="comment1"><span>(* Unsigned interpretation must be &lt; 2^(n-1) *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.unat|const"><span>unat</span></a><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.unat|const"><span>unat</span></a><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Power.html#Power.power_class.power|const"><span>^</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_t_len|const"><span>size_t_len</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_rel_def|fact"><span>snat_rel_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat.rel_def|fact"><span>snat.rel_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.pure_def|fact"><span>pure_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_DS_Arith.html#LLVM_DS_Arith.snat_invar_alt|fact"><span>snat_invar_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_DS_Arith.html#LLVM_DS_Arith.snat_eq_unat_aux1|fact"><span>snat_eq_unat_aux1</span></a><span class="main"><span>)</span></span><span>
  </span><span class="comment1"><span>(* Signed interpretation must be ≥0 *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span> </span><span class="free"><span>n</span></span><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="main"><span>(</span></span><span class="free"><span>n</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Int.html#Int.nat|const"><span>nat</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.sint|const"><span>sint</span></a><span> </span><span class="free"><span>w</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.sint|const"><span>sint</span></a><span> </span><span class="free"><span>w</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_rel_def|fact"><span>snat_rel_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat.rel_def|fact"><span>snat.rel_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.pure_def|fact"><span>pure_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_DS_Arith.html#LLVM_DS_Arith.snat_invar_def|fact"><span>snat_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Word_Lib.Most_significant_bit.html#Most_significant_bit.word_msb_sint|fact"><span>word_msb_sint</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_DS_Arith.html#LLVM_DS_Arith.snat_def|fact"><span>snat_def</span></a><span class="main"><span>)</span></span><span>
  
  
  
    
</span><span class="comment1"><span>(*
  TODO:
    If CNF contains empty clause, no lrat proof required?

*)</span></span><span>    
    
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span></pre>
</body>

</html>