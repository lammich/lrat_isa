<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory DS_Clause_Database</title>
</head>


<body>
<div class="head">
<h1>Theory DS_Clause_Database</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Clause Database›</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="DS_Clause_Database.html"><span>DS_Clause_Database</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
  </span><a href="LRAT_Sepref_Base.html"><span>LRAT_Sepref_Base</span></a><span>
  </span><a href="DS_Clause_Builder.html"><span>DS_Clause_Builder</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Refinement Relation›</span></span></span><span>    
      
  </span><span class="comment1"><span>(* Now, we implement the clause database by a list of zclauses and its length *)</span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb|type"><span>cdb</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.map|type"><span>⇀</span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_clause|type"><span>dv_clause</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_clause|type"><span>dv_clause</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_invar_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_invar_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_invar_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_invar</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>cl</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>cl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>cl</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_aux_α</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>cl</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>cl</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="bound"><span>cl</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>"</span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_aux_assn_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_assn_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_aux_assn_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_assn|const"><span>size_assn</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_assn|const"><span>woarray_assn</span></a><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl.option_assn|const"><span>zcl.option_assn</span></a><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_assn_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_assn_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_assn_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hr_comp|const"><span>hr_comp</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn_def|fact"><span>cdb_assn_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    
        
  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Operations›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Empty›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_empty_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_empty_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_empty_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_empty|const"><span>cdb_empty</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_empty</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.empty|const"><span>Map.empty</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_fold_custom_empty|fact"><span class="entity_def" id="DS_Clause_Database.cdb_fold_custom_empty|thm"><span>cdb_fold_custom_empty</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.empty|const"><span>Map.empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty|const"><span>cdb_empty</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty_def|fact"><span>cdb_empty_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_aux_empty_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_empty_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_aux_empty_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_aux_empty|const"><span>cdb_aux_empty</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_aux_empty</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>16</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.replicate|const"><span>replicate</span></a><span> </span><span class="numeral"><span>16</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_aux_empty_refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_empty_refine|thm"><span>cdb_aux_empty_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_empty|const"><span>cdb_aux_empty</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty|const"><span>cdb_empty</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty_def|fact"><span>cdb_empty_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_empty_def|fact"><span>cdb_aux_empty_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar_def|fact"><span>cdb_invar_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|fact"><span>cdb_aux_α_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_Cons&apos;|fact"><span>nth_Cons'</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_empty.itype|fact"><span class="entity_def" id="DS_Clause_Database.cdb_empty.itype|thm"><span>sepref_register</span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty|const"><span>cdb_empty</span></a></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl|const"><span>cdb_empty_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry0|const"><span>uncurry0</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_empty|const"><span>cdb_aux_empty</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.unit_assn|const"><span>unit_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_empty_def|fact"><span>cdb_aux_empty_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn_def|fact"><span>cdb_aux_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_T|const"><span>size_T</span></a></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.woarray_fold_custom_replicate|fact"><span>woarray_fold_custom_replicate</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.cdb_empty_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_empty_hnr|fact"><span class="entity_def" id="DS_Clause_Database.cdb_empty_hnr|thm"><span>cdb_empty_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty_impl.refine|fact"><span>cdb_empty_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_empty_refine|fact"><span>cdb_aux_empty_refine</span></a><span class="main"><span>]</span></span><span>

    
    
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Insert›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_insert_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_insert_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_insert|const"><span>cdb_insert</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_clause|type"><span>dv_clause</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_insert</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cl</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span class="main"><span>↦</span></span><span class="free"><span class="bound"><span class="entity"><span>cl</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
        
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_aux_insert_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_insert_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_aux_insert_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_aux_insert|const"><span>cdb_aux_insert</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_clause|type"><span>dv_clause</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_aux_insert</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSUME|const"><span>ASSUME</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>c</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>c</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.wo_ensure_capacity|const"><span>wo_ensure_capacity</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>css</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.mop_wo_exchange|const"><span>mop_wo_exchange</span></a><span> </span><span class="bound"><span>css</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>c</span></span><span class="main"><span>;</span></span><span>
      
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_aux_insert_refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_insert_refine|thm"><span>cdb_aux_insert_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_insert|const"><span>cdb_aux_insert</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert|const"><span>cdb_insert</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_insert_def|fact"><span>cdb_aux_insert_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar_def|fact"><span>cdb_invar_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|fact"><span>cdb_aux_α_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_conv_nth|fact"><span>in_set_conv_nth</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_list_update|fact"><span>nth_list_update</span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.in_set_upd_cases|fact"><span>in_set_upd_cases</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan_iff|fact"><span>atLeastLessThan_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.leI|fact"><span>leI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.simps|fact"><span>option.simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.canonically_ordered_monoid_add_class.zero_order|fact"><span>zero_order</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_insert.mcomb|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert.arity|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert.itype|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert.mcomb|thm"><span class="entity_def" id="DS_Clause_Database.cdb_insert.arity|thm"><span class="entity_def" id="DS_Clause_Database.cdb_insert.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert|const"><span>cdb_insert</span></a></span><span> 
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl|const"><span>cdb_insert_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_insert|const"><span>cdb_aux_insert</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_assn|const"><span>zcl_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_insert_def|fact"><span>cdb_aux_insert_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn_def|fact"><span>cdb_aux_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.cdb_insert_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_insert_hnr|fact"><span class="entity_def" id="DS_Clause_Database.cdb_insert_hnr|thm"><span>cdb_insert_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert_impl.refine|fact"><span>cdb_insert_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_insert_refine|fact"><span>cdb_aux_insert_refine</span></a><span class="main"><span>]</span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Delete›</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_delete_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_delete_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_delete|const"><span>cdb_delete</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_delete</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span class="main"><span>:=</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_aux_delete_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_delete_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_aux_delete_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_aux_delete|const"><span>cdb_aux_delete</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_aux_delete</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>cid</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>cid</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>cid</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>cid</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="bound"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.mop_wo_exchange|const"><span>mop_wo_exchange</span></a><span> </span><span class="bound"><span>css</span></span><span> </span><span class="bound"><span>cid</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span>
    
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_aux_delete_refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_delete_refine|thm"><span>cdb_aux_delete_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_delete|const"><span>cdb_aux_delete</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete|const"><span>cdb_delete</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_delete_def|fact"><span>cdb_aux_delete_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete_def|fact"><span>cdb_delete_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar_def|fact"><span>cdb_invar_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|fact"><span>cdb_aux_α_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>elim</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.in_set_upd_cases|fact"><span>in_set_upd_cases</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_delete.mcomb|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete.arity|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete.itype|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete.mcomb|thm"><span class="entity_def" id="DS_Clause_Database.cdb_delete.arity|thm"><span class="entity_def" id="DS_Clause_Database.cdb_delete.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete|const"><span>cdb_delete</span></a></span><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl|const"><span>cdb_delete_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_delete|const"><span>cdb_aux_delete</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_delete_def|fact"><span>cdb_aux_delete_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn_def|fact"><span>cdb_aux_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.cdb_delete_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_delete_hnr|fact"><span class="entity_def" id="DS_Clause_Database.cdb_delete_hnr|thm"><span>cdb_delete_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete_impl.refine|fact"><span>cdb_delete_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_delete_refine|fact"><span>cdb_aux_delete_refine</span></a><span class="main"><span>]</span></span><span>
      
  
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Contains›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_contains_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_contains_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_contains|const"><span>cdb_contains</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_contains</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cid</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdb</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_aux_contains_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_contains_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_aux_contains_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_aux_contains|const"><span>cdb_aux_contains</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_aux_contains</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="bound"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="bound"><span>css'</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="bound"><span>css</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.eo_with|const"><span>eo_with</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>cs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Autoref_Bindings_HOL.html#Autoref_Bindings_HOL.is_None|const"><span>is_None</span></a><span> </span><span class="bound"><span>cs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>css'</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>css'</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>css'</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>css'</span></span><span> </span><span class="bound"><span>css</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
    </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_aux_contains_refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_aux_contains_refine|thm"><span>cdb_aux_contains_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_contains|const"><span>cdb_aux_contains</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains|const"><span>cdb_contains</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_contains_def|fact"><span>cdb_aux_contains_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv_def|fact"><span>mop_to_eo_conv_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv_def|fact"><span>mop_to_wo_conv_def</span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.eo_with_def|fact"><span>eo_with_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar_def|fact"><span>cdb_invar_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|fact"><span>cdb_aux_α_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_contains.mcomb|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains.arity|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains.itype|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains.mcomb|thm"><span class="entity_def" id="DS_Clause_Database.cdb_contains.arity|thm"><span class="entity_def" id="DS_Clause_Database.cdb_contains.itype|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains|const"><span>cdb_contains</span></a></span><span>
  
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl|const"><span>cdb_contains_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_contains|const"><span>cdb_aux_contains</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_contains_def|fact"><span>cdb_aux_contains_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn_def|fact"><span>cdb_aux_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.cdb_contains_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_contains_hnr|fact"><span class="entity_def" id="DS_Clause_Database.cdb_contains_hnr|thm"><span>cdb_contains_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains_impl.refine|fact"><span>cdb_contains_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_contains_refine|fact"><span>cdb_aux_contains_refine</span></a><span class="main"><span>]</span></span><span>
  
    
  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Free›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_free_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_free_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_free_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="DS_Clause_Database.cdb_free|const"><span>cdb_free</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>cdb</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>cdb</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.mop_woarray_free|const"><span>mop_woarray_free</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>css</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_free_refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_free_refine|thm"><span>cdb_free_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_free|const"><span>cdb_free</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.mop_free|const"><span>mop_free</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.unit_rel|const"><span>unit_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_free_def|fact"><span>cdb_free_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.mop_free_def|fact"><span>mop_free_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar_def|fact"><span>cdb_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl|const"><span>cdb_free_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_free|const"><span>cdb_free</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.unit_assn|const"><span>unit_assn</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn_def|fact"><span>cdb_aux_assn_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_free_def|fact"><span>cdb_free_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.cdb_free_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_assn_free|fact"><span class="entity_def" id="DS_Clause_Database.cdb_assn_free|thm"><span>cdb_assn_free</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.MK_FREE_mopI|fact"><span>MK_FREE_mopI</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_free_impl.refine|fact"><span>cdb_free_impl.refine</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_free_refine|fact"><span>cdb_free_refine</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
    

  </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Iteration over Clause›</span></span></span><span>    

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.intro|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.intro|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup|locale"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup|const"><span class="entity_def" id="offset_5945..5967">clause_iteration_setup</span></span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>ci</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'pi</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'si</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>1</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>fi</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'pi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.lit_size_t|type"><span>lit_size_t</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'si</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'si</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.dv_lit|type"><span>dv_lit</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'pi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>S</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'si</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cond_refine|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cond_refine|thm"><span class="entity_def" id="offset_6235..6246">cond_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="free"><span>ci</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><span class="free"><span>c</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.body_refine|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.body_refine|thm"><span class="entity_def" id="offset_6324..6335">body_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span>fi</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span>f</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="DS_Unsigned_Literal.html#DS_Unsigned_Literal.ulit_assn|const"><span>ulit_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cb_refines|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cb_refines(2)|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cb_refines(1)|thm"><span class="entity_def" id="offset_6420..6430">cb_refines</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6235..6246"><span>cond_refine</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6324..6335"><span>body_refine</span></a><span>
  
  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2_def_raw|axiom"><span class="entity_def" id="offset_6467..6477">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2.cong|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2.cong|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2|const"><span class="entity_def" id="offset_6479..6492">zcl_fold_aux2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_fold|const"><span>zcl_fold</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause_def_raw|axiom"><span class="entity_def" id="offset_6533..6543">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.cong|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.cong|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause|const"><span class="entity_def" id="offset_6545..6566">foreach_lit_in_clause</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cl</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Foreach.html#Refine_Foreach.FOREACHcd|const"><span>FOREACHcd</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cl</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2_refine|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_aux2_refine|thm"><span class="entity_def" id="offset_6619..6639">zcl_fold_aux2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#offset_6479..6492"><span>zcl_fold_aux2</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6545..6566"><span>foreach_lit_in_clause</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_\&lt;alpha&gt;|const"><span>zcl_α</span></a><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_invar|const"><span>zcl_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> xs cl p s 
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6467..6477"><span>zcl_fold_aux2_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6533..6543"><span>foreach_lit_in_clause_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_fold_foreach_refine|fact"><span>zcl_fold_foreach_refine</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>xs</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>cl</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>c</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>f</span></span><span> </span><span class="skolem"><span>p</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.mcomb|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.arity|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.itype|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.pat|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.mcomb|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.arity|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.itype|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause.pat|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#offset_6545..6566"><span>foreach_lit_in_clause</span></a></span><span>  
    
  
    </span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6420..6430"><span>cb_refines</span></a><span>
      </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Combinator_Setup.html#Sepref_Combinator_Setup.sepref_register_adhoc|attribute"><span class="operator"><span>sepref_register_adhoc</span></span></a><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span> </span><span class="quoted"><span class="free"><span>f</span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux.cong|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux.cong|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux|const"><span>zcl_fold_impl_aux</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6479..6492"><span>zcl_fold_aux2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_aux_assn|const"><span>zcl_aux_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6467..6477"><span>zcl_fold_aux2_def</span></a><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_fold_def|fact"><span>zcl_fold_def</span></a><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_fold_aux_def|fact"><span>zcl_fold_aux_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.size_T|const"><span>size_T</span></a></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux.refine|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux.refine|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux_def_raw|axiom"><span class="entity_def" id="offset_7411..7413">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
    </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux_hnr|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux_hnr|thm"><span class="entity_def" id="offset_7452..7473">zcl_fold_impl_aux_hnr</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_7411..7413"><span>zcl_fold_impl_aux.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6619..6639"><span>zcl_fold_aux2_refine</span></a><span class="main"><span>]</span></span><span>
  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.zcl_fold_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.zcl_fold_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.zcl_fold_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.zcl_fold_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.zcl_fold_impl_def_raw|axiom"><span class="entity_def" id="offset_7536..7555">concrete_definition</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> -</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.zcl_fold_impl|const"><span>zcl_fold_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.clause_iteration_setup.zcl_fold_impl_aux_def|fact"><span>clause_iteration_setup.zcl_fold_impl_aux_def</span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause_hnr|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.foreach_lit_in_clause_hnr|thm"><span>foreach_lit_in_clause_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.zcl_fold_impl|const"><span>zcl_fold_impl</span></a><span> </span><span class="free"><span>ci</span></span><span> </span><span class="free"><span>fi</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6545..6566"><span>foreach_lit_in_clause</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="DS_Clause.html#DS_Clause.zcl_assn|const"><span>zcl_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_7452..7473"><span>zcl_fold_impl_aux_hnr</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.zcl_fold_impl.refine|fact"><span>zcl_fold_impl.refine</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_5945..5967"><span>clause_iteration_setup_axioms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_def_raw|axiom"><span class="entity_def" id="offset_7930..7940">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.cong|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.cong|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause|const"><span class="entity_def" id="offset_7941..7959">cdb_iterate_clause</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_iterate_clause</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>db</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Map.html#Map.dom|const"><span>dom</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>db</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSUME|const"><span>ASSUME</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.finite|const"><span>finite</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>db</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Foreach.html#Refine_Foreach.FOREACHcd|const"><span>FOREACHcd</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>db</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_def_raw|axiom"><span class="entity_def" id="offset_8164..8174">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux.cong|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux.cong|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux|const"><span class="entity_def" id="offset_8175..8197">cdb_iterate_clause_aux</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux|type"><span>cdb_aux</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'p</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cdb_iterate_clause_aux</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>css</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="bound"><span>css'</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="bound"><span>css</span></span><span class="main"><span>;</span></span><span>
    
      </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.dest_cid|const"><span>dest_cid</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.eo_with|const"><span>eo_with</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>cl</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>cl</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>cl'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="bound"><span>cl</span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_6545..6566"><span>foreach_lit_in_clause</span></a><span> </span><span class="bound"><span>cl'</span></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>cl'</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>cl'</span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.unborrow&apos;|const"><span>unborrow'</span></a><span> </span><span class="bound"><span>cl'</span></span><span> </span><span class="bound"><span>cl</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
      </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>css'</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
      
      </span><span class="bound"><span>css'</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>css'</span></span><span class="main"><span>;</span></span><span>
    
      </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>css'</span></span><span> </span><span class="bound"><span>css</span></span><span class="main"><span>;</span></span><span>
      
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
    
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_refine|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_refine|thm"><span class="entity_def" id="offset_8709..8738">cdb_iterate_clause_aux_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#offset_8175..8197"><span>cdb_iterate_clause_aux</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_7941..7959"><span>cdb_iterate_clause</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;|const"><span>cdb_aux_α</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar|const"><span>cdb_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_7930..7940"><span>cdb_iterate_clause_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_8164..8174"><span>cdb_iterate_clause_aux_def</span></a><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.eo_with_def|fact"><span>eo_with_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow_def|fact"><span>unborrow_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_7536..7555"><span>foreach_lit_in_clause_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_rcg|method"><span class="operator"><span>refine_rcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_\&lt;alpha&gt;_def|fact"><span>cdb_aux_α_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_invar_def|fact"><span>cdb_invar_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 0 3 </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_conv_nth|fact"><span>in_set_conv_nth</span></a><span class="main"><span>)</span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>
      
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.mcomb|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.arity|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.itype|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.pat|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.mcomb|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.arity|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.itype|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause.pat|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#offset_7941..7959"><span>cdb_iterate_clause</span></a></span><span>
    
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl.cong|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl.cong|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl|const"><span>cdb_iterate_clause_aux_impl</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_8175..8197"><span>cdb_iterate_clause_aux</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn|const"><span>cdb_aux_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_8164..8174"><span>cdb_iterate_clause_aux_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_aux_assn_def|fact"><span>cdb_aux_assn_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl.refine_raw|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl.refine_raw|thm"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl_def_raw|axiom"><span class="entity_def" id="offset_9403..9405">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
        
        
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_hnr|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_hnr|thm"><span class="entity_def" id="offset_9442..9468">cdb_iterate_clause_aux_hnr</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_9403..9405"><span>cdb_iterate_clause_aux_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_8709..8738"><span>cdb_iterate_clause_aux_refine</span></a><span class="main"><span>]</span></span><span>
        
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl.refine|fact"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl_def|fact"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl.refine|thm"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl_def|thm"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl_def_raw|axiom"><span>concrete_definition</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> -</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl|const"><span>cdb_iterate_clause_impl</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_aux_impl_def|fact"><span>clause_iteration_setup.cdb_iterate_clause_aux_impl_def</span></a><span>
  
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> -</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl_code|fact"><span class="entity_def" id="DS_Clause_Database.cdb_iterate_clause_impl_code|thm"><span>cdb_iterate_clause_impl_code</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_iterate_clause_impl_def|fact"><span>cdb_iterate_clause_impl_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="LRAT_Sepref_Base.html#LRAT_Sepref_Base.eo_with_impl_def|fact"><span>eo_with_impl_def</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.zcl_fold_impl_def|fact"><span>zcl_fold_impl_def</span></a><span class="main"><span>]</span></span><span>  
      
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_hnr|fact"><span class="entity_def" id="DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_hnr|thm"><span>cdb_iterate_clause_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_iterate_clause_impl|const"><span>cdb_iterate_clause_impl</span></a><span> </span><span class="free"><span>ci</span></span><span> </span><span class="free"><span>fi</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_7941..7959"><span>cdb_iterate_clause</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sizes_Setup.html#Sizes_Setup.cid_assn|const"><span>cid_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>S</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_9442..9468"><span>cdb_iterate_clause_aux_hnr</span></a><span class="main"><span>[</span></span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_iterate_clause_impl.refine|fact"><span>cdb_iterate_clause_impl.refine</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#offset_5945..5967"><span>clause_iteration_setup_axioms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
     
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Interface›</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>typ</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb|type"><span>cdb</span></a></span><span>  
</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_assn|const"><span>cdb_assn</span></a></span><span>

</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty|const"><span>cdb_empty</span></a></span><span> </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_empty_hnr|fact"><span>cdb_empty_hnr</span></a><span> </span><span class="comment1"><span>(* map empty *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert|const"><span>cdb_insert</span></a></span><span> </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_insert_hnr|fact"><span>cdb_insert_hnr</span></a><span>  </span><span class="comment1"><span>(* map update. clause moved into map. *)</span></span><span>
</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete|const"><span>cdb_delete</span></a></span><span> </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_delete_hnr|fact"><span>cdb_delete_hnr</span></a><span> </span><span class="comment1"><span>(* delete clause *)</span></span><span>
</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains|const"><span>cdb_contains</span></a></span><span> </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.cdb_contains_hnr|fact"><span>cdb_contains_hnr</span></a><span> </span><span class="comment1"><span>(* map contains key *)</span></span><span>

</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause|const"><span>clause_iteration_setup.cdb_iterate_clause</span></a></span><span>
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_def|fact"><span>clause_iteration_setup.cdb_iterate_clause_def</span></a><span>
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="DS_Clause_Database.html#DS_Clause_Database.clause_iteration_setup.cdb_iterate_clause_hnr|fact"><span>clause_iteration_setup.cdb_iterate_clause_hnr</span></a><span>
 

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>