<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory IICF_Indexed_Array_List</title>
</head>


<body>
<div class="head">
<h1>Theory IICF_Indexed_Array_List</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="IICF_Indexed_Array_List.html"><span>IICF_Indexed_Array_List</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
  </span><span class="quoted"><span>"</span><a href="HOL-Library.Rewrite.html"><span>HOL-Library.Rewrite</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="IICF_List.html"><span>../Intf/IICF_List</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="List-Index.List_Index.html"><span>List-Index.List_Index</span></a><span>"</span></span><span>
  </span><a href="IICF_Array.html"><span>IICF_Array</span></a><span>
  </span><a href="IICF_MS_Array_List.html"><span>IICF_MS_Array_List</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>



  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.snatb_rel|const"><span>snatb_rel</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel|const"><span>b_rel</span></a><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_rel|const"><span>snat_rel</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.snatb_rel&apos;|const"><span>snatb_rel'</span></span></span><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="LLVM_More_Word_Lemmas.html#LLVM_More_Word_Lemmas.len2|class"><span>len2</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel|const"><span>b_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_rel&apos;|const"><span>snat_rel'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.snatb_assn|const"><span>snatb_assn</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_assn|const"><span>b_assn</span></a><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.snatb_assn&apos;|const"><span>snatb_assn'</span></span></span><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="LLVM_More_Word_Lemmas.html#LLVM_More_Word_Lemmas.len2|class"><span>len2</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.snatb_assn|const"><span>snatb_assn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'l</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
  
  </span><span class="comment1"><span>(* TODO: Move, clean up proof *)</span></span><span>
            
  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
  
  </span><span class="comment1"><span>(*
  lemma range_snatb_conv: "Range (snatb_rel' TYPE('l) N) = {0..&lt;N} ∩ Range (snat_rel' TYPE('l::len2))"
    unfolding snatb_rel_def 
    by (auto simp: range_comp_nbn_conv)
    
  lemma in_snatb_rel_bound: "(a,b)∈snatb_rel N ⟹ b&lt;N" 
    by (simp add: in_snat_nbn_conv snatb_rel_def)
  *)</span></span><span>  

  

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹We implement distinct lists of natural numbers in the range </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>"{0..&lt;N}"</span></span><span class="antiquote"><span>}</span></span></span><span>
    by a length counter and two arrays of size </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>N</span></span><span class="antiquote"><span>}</span></span></span><span>. 
    The first array stores the list, and the second array stores the positions of
    the elements in the list, or </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>text</span></span><span> </span><span class="raw_text"><span>N</span></span><span class="antiquote"><span>}</span></span></span><span> if the element is not in the list.

    This allows for an efficient index query.

    The implementation is done in two steps: 
      First, we use a list and a fixed size list for the index mapping.
      Second, we refine the lists to arrays.
 ›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial|type"><span>aial</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.intro|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.intro|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar|locale"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span>
         </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>  </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>qp</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.maxsize_eq|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.maxsize_eq|thm"><span>maxsize_eq</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_distinct|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_distinct|thm"><span class="entity_def" id="offset_1579..1589">l_distinct</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct|const"><span>distinct</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_set|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_set|thm"><span class="entity_def" id="offset_1622..1627">l_set</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.qp_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.qp_def|thm"><span class="entity_def" id="offset_1667..1673">qp_def</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span class="bound"><span>k</span></span></span><span class="main"><span>&lt;</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>qp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="List-Index.List_Index.html#List_Index.index|const"><span>List_Index.index</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_len|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_len|thm"><span>l_len</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1622..1627"><span>l_set</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct_card|fact"><span>distinct_card</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1579..1589"><span>l_distinct</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.idx_len|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.idx_len|thm"><span>idx_len</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1622..1627"><span>l_set</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan_iff|fact"><span>atLeastLessThan_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_mem|fact"><span>nth_mem</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.psubsetD|fact"><span>psubsetD</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.psubsetI|fact"><span>psubsetI</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_set_simp|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.l_set_simp|thm"><span>l_set_simp</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_mp|fact"><span>set_mp</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1622..1627"><span>l_set</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.qpk_idx|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.qpk_idx|thm"><span>qpk_idx</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>qp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffI|fact"><span>iffI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_2290..2291">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>qp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1667..1673"><span>qp_def</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_2290..2291"><span>A</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>qp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1667..1673"><span>qp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>}</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> 

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.lqpk|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.lqpk|thm"><span>lqpk</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>qp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1667..1673"><span>qp_def</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>k</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span>j</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>j</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_eq_iff_index_eq|fact"><span>nth_eq_iff_index_eq</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.index_swap|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.index_swap|thm"><span>index_swap</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="List-Index.List_Index.html#List_Index.index_swap_if_distinct|fact"><span>index_swap_if_distinct</span></a><span class="main"><span>[</span></span><span class="operator"><span>folded</span></span><span> </span><a class="entity_ref" href="More_List.html#More_List.swap_def|fact"><span>swap_def</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1579..1589"><span>l_distinct</span></a><span class="main"><span>]</span></span><span>  

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2871..2876">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.swap_invar|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_invar.swap_invar|thm"><span>swap_invar</span></span></span><span class="main"><span>:</span></span><span>  
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="More_List.html#More_List.swap|const"><span>swap</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>qp</span></span><span class="main"><span>[</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="free"><span>j</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_2871..2876"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_list_update|fact"><span>nth_list_update</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_eq_iff_index_eq|fact"><span>nth_eq_iff_index_eq</span></a><span> </span><a class="entity_ref" href="List-Index.List_Index.html#List_Index.index_nth_id|fact"><span>index_nth_id</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_1667..1673"><span>qp_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>2</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_rel1_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_rel1_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_rel1_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>maxsize</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>maxsize</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_sz_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_sz_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_sz_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_sz|const"><span>op_ial_empty_sz</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>op_ial_empty_sz</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>ms</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.op_list_empty|const"><span>op_list_empty</span></a><span>"</span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty|const"><span>aial_empty</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_MS_Array_List.html#IICF_MS_Array_List.op_marl_empty|const"><span>op_marl_empty</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Array.html#IICF_Array.op_array_custom_replicate|const"><span>op_array_custom_replicate</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_refine|thm"><span>aial_empty_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_empty|const"><span>aial_empty</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.op_list_empty|const"><span>op_list_empty</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_empty_def|fact"><span>aial_empty_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_swap_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_swap_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_swap_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.aial_swap|const"><span>aial_swap</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>vi</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>vj</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="bound"><span>vi</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>qp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="bound"><span>vj</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>qp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="bound"><span>vi</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.in_ial_rel1_conv|fact"><span class="entity_def" id="IICF_Indexed_Array_List.in_ial_rel1_conv|thm"><span>in_ial_rel1_conv</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>pq</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>qp</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>ms</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>pq</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>ms</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_swap_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_swap_refine|thm"><span>aial_swap_refine</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_swap|const"><span>aial_swap</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_swap|const"><span>mop_list_swap</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.in_ial_rel1_conv|fact"><span>in_ial_rel1_conv</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|locale"><span>ial_invar</span></a><span> </span><span class="quoted"><span class="free"><span>maxsize</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>qp</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_4571..4573">by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_swap|const"><span>aial_swap</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>c</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>c</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="More_List.html#More_List.swap|const"><span>swap</span></a><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>i</span></span><span> </span><span class="skolem"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_swap_def|fact"><span>aial_swap_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.in_ial_rel1_conv|fact"><span>in_ial_rel1_conv</span></a><span> </span><a class="entity_ref" href="More_List.html#More_List.swap_def|fact"><span>swap_def</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_4571..4573"><span>swap_invar</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
  

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_length_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_length_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_length_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.aial_length|const"><span>aial_length</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>aial_length</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_List.html#IICF_List.op_list_length|const"><span>op_list_length</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_length_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_length_refine|thm"><span>aial_length_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_length|const"><span>aial_length</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_length|const"><span>mop_list_length</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>maxsize</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_length_def|fact"><span>aial_length_def</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar_def|fact"><span>ial_invar_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_splits|fact"><span>if_splits</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar.intro|fact"><span>ial_invar.intro</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar.l_len|fact"><span>ial_invar.l_len</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.le_imp_less_Suc|fact"><span>le_imp_less_Suc</span></a><span class="main"><span>)</span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_index_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_index_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_index_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.aial_index|const"><span>aial_index</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>aial_index</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_index_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_index_refine|thm"><span>aial_index_refine</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_index|const"><span>aial_index</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_index|const"><span>mop_list_index</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> 
      </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span>  </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|locale"><span>ial_invar</span></a><span> </span><span class="quoted"><span class="free"><span>maxsize</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>qp</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5799..5800">.</span></span></span><span>

    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_index|const"><span>aial_index</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span class="main"><span>,</span></span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="List-Index.List_Index.html#List_Index.index|const"><span>index</span></a><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_index_def|fact"><span>aial_index_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_5799..5800"><span>qp_def</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_butlast_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_butlast_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_butlast_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.aial_butlast|const"><span>aial_butlast</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>aial_butlast</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>len</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_length|const"><span>mop_list_length</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>len</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast|const"><span>mop_list_butlast</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>qp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_butlast_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_butlast_refine|thm"><span>aial_butlast_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_butlast|const"><span>aial_butlast</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast|const"><span>mop_list_butlast</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast_alt|fact"><span>mop_list_butlast_alt</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|locale"><span>ial_invar</span></a><span> </span><span class="quoted"><span class="free"><span>maxsize</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>qp</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6579..6580">.</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>{</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_6601..6602">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>qp</span></span><span class="main"><span>[</span></span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct_butlast|fact"><span>distinct_butlast</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_6579..6580"><span>l_set</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_butlastD|fact"><span>in_set_butlastD</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_6579..6580"><span>qp_def</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_6601..6602"><span>A</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_6579..6580"><span>l_distinct</span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_list_update|fact"><span>nth_list_update</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.neq_Nil_rev_conv|fact"><span>neq_Nil_rev_conv</span></a><span> </span><a class="entity_ref" href="List-Index.List_Index.html#List_Index.index_append|fact"><span>index_append</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_6579..6580"><span>l_distinct</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6995..6996">}</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_7002..7006">aux1</span><span class="main"><span>=</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_6995..6996"><span>this</span></a><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_butlast|const"><span>aial_butlast</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast|const"><span>mop_list_butlast</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_butlast_def|fact"><span>aial_butlast_def</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast_alt|fact"><span>mop_list_butlast_alt</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7002..7006"><span>aux1</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    


  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.aial_append|const"><span>aial_append</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>aial_append</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>len</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_length|const"><span>mop_list_length</span></a><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append|const"><span>mop_list_append</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>qp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>len</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_refine|thm"><span>aial_append_refine</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_append|const"><span>aial_append</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append|const"><span>mop_list_append</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> 
      </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>l</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_7849..7852">KLM</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>maxsize</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_7870..7873">KNL</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>l</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|locale"><span>ial_invar</span></a><span> </span><span class="quoted"><span class="free"><span>maxsize</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>qp</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_7963..7964">.</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7849..7852"><span>KLM</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_7986..7989">KLL</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.distinct_card|fact"><span>distinct_card</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7963..7964"><span>l_distinct</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7870..7873"><span>KNL</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7963..7964"><span>l_set</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8140..8142">by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat_less_le|fact"><span>nat_less_le</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_mono|fact"><span>card_mono</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> _ </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_8140..8142"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><span>…</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card_Un_le|fact"><span>card_Un_le</span></a><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Finite_Set.html#Finite_Set.card|const"><span>card</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="skolem"><span>k</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>…</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7986..7989"><span>KLL</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_8428..8432">LLEN</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>aux1</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span> </span><span class="main"><span>[</span></span><span class="skolem"><span>k</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>qp</span></span><span class="main"><span>[</span></span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>:=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.standard|method"><span class="operator"><span>standard</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7870..7873"><span>KNL</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7986..7989"><span>KLL</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7986..7989"><span>KLL</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_le_eq|fact"><span>Suc_le_eq</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_8428..8432"><span>LLEN</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="List-Index.List_Index.html#List_Index.index_append|fact"><span>index_append</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7870..7873"><span>KNL</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.nth_list_update&apos;|fact"><span>nth_list_update'</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7963..7964"><span>qp_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7963..7964"><span>qp_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_append|const"><span>aial_append</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.fst|const"><span>fst</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="skolem"><span>k</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_append_def|fact"><span>aial_append_def</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append_def|fact"><span>mop_list_append_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7986..7989"><span>KLL</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_7870..7873"><span>KNL</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_8428..8432"><span>LLEN</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_get_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_get_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_get_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.aial_get|const"><span>aial_get</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>aial_get</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_get_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_get_refine|thm"><span>aial_get_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_get|const"><span>aial_get</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_get_def|fact"><span>aial_get_def</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get_def|fact"><span>mop_list_get_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.aial_contains_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_contains_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.aial_contains_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.aial_contains|const"><span>aial_contains</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial|type"><span>aial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>aial_contains</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>λ</span></span><span class="bound"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>qp</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="bound"><span>qp</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_contains_refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_contains_refine|thm"><span>aial_contains_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_contains|const"><span>aial_contains</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_contains|const"><span>mop_list_contains</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>maxsize</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span> </span><span class="skolem"><span>k</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_9886..9887">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>maxsize</span></span><span>"</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|const"><span>ial_invar</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="skolem"><span>l</span></span><span> </span><span class="skolem"><span>qp</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar|locale"><span>ial_invar</span></a><span> </span><span class="quoted"><span class="free"><span>maxsize</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>l</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>qp</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9979..9980">.</span></span></span><span>
    

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_contains|const"><span>aial_contains</span></a><span> </span><span class="skolem"><span>k</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="skolem"><span>qp</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="skolem"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_contains_def|fact"><span>aial_contains_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_9886..9887"><span>A</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_9979..9980"><span>l_len</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_9979..9980"><span>qp_def</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split_asm|fact"><span>if_split_asm</span></a><span class="main"><span>)</span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
      

  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'l</span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial|type"><span>ial</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>,</span></span><span class="tfree"><span>'l</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_MS_Array_List.html#IICF_MS_Array_List.marl|type"><span>marl</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'l</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="LLVM_Shallow.html#LLVM_Shallow.ptr|type"><span>ptr</span></a><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>M</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a></span><span>
    </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>M</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="LLVM_DS_Arith.html#LLVM_DS_Arith.max_snat|const"><span>max_snat</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>LENGTH</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="LLVM_More_Word_Lemmas.html#LLVM_More_Word_Lemmas.len2|class"><span>len2</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.ial2_assn|const"><span class="entity_def" id="offset_10358..10367">ial2_assn</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> 
      </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_MS_Array_List.html#IICF_MS_Array_List.marl_assn&apos;|const"><span>marl_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Array.html#IICF_Array.array_assn|const"><span>array_assn</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_option_assn&apos;|const"><span>snat_option_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      
    </span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.idx_assn|const"><span class="entity_def" id="offset_10509..10517">idx_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_def_raw|axiom"><span class="entity_def" id="offset_10550..10560">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn|const"><span class="entity_def" id="offset_10561..10569">ial_assn</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'l</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial|type"><span>ial</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>ial_assn</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hr_comp|const"><span>hr_comp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hr_comp|const"><span>hr_comp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10550..10560"><span>ial_assn_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>

    </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.list_rel_below_id_ext|fact"><span class="entity_def" id="IICF_Indexed_Array_List.list_rel_below_id_ext|thm"><span class="entity_def" id="offset_10771..10792">list_rel_below_id_ext</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>⟨</span></span><span class="free"><span>A</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_id|fact"><span>list_rel_id</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_mono|fact"><span>list_rel_mono</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.b_rel_below|fact"><span class="entity_def" id="IICF_Indexed_Array_List.b_rel_below|thm"><span class="entity_def" id="offset_10880..10891">b_rel_below</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel|const"><span>b_rel</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel_def|fact"><span>b_rel_def</span></a><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.br_comp_b_rel_Id_conv|fact"><span class="entity_def" id="IICF_Indexed_Array_List.br_comp_b_rel_Id_conv|thm"><span class="entity_def" id="offset_10949..10970">br_comp_b_rel_Id_conv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><span class="free"><span>α</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcomp|const"><span>O</span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel|const"><span>b_rel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>α</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="var"><span>?x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="var"><span>?y</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>_</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="var"><span>?x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>_</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="var"><span>?y</span></span><span>"</span></span></span><span>  
      
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.b_rel_Id_list_rel_conv|fact"><span class="entity_def" id="IICF_Indexed_Array_List.b_rel_Id_list_rel_conv|thm"><span class="entity_def" id="offset_11122..11144">b_rel_Id_list_rel_conv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel|const"><span>b_rel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="free"><span>Φ</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.b_rel|const"><span>b_rel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set_eq_iff|fact"><span>set_eq_iff</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> xs ys
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>ys</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x xs ys </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>ys</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_rel1_comp_nbn_rel|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_rel1_comp_nbn_rel|thm"><span>ial_rel1_comp_nbn_rel</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.relcomp|const"><span>O</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10771..10792"><span>list_rel_below_id_ext</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10880..10891"><span>b_rel_below</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> a b  
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_11122..11144"><span>b_rel_Id_list_rel_conv</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10949..10970"><span>br_comp_b_rel_Id_conv</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>full_types</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar.l_set_simp|fact"><span>ial_invar.l_set_simp</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar_def|fact"><span>ial_invar_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  
        
    
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_fold&apos;|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_fold&apos;|thm"><span>ial_assn_fold'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hrr_comp|const"><span>hrr_comp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span>
                        </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hrr_comp|const"><span>hrr_comp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_MS_Array_List.html#IICF_MS_Array_List.marl_assn&apos;|const"><span>marl_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span> </span><span class="bound"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Array.html#IICF_Array.array_assn|const"><span>array_assn</span></a><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat.option_assn|const"><span>snat.option_assn</span></a><span class="main"><span>)</span></span><span>
                          </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span class="main"><span>)</span></span><span>
                        </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10561..10569"><span>ial_assn</span></a><span> </span><span class="bound"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10550..10560"><span>ial_assn_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hrr_comp_nondep|fact"><span>hrr_comp_nondep</span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hr_comp_assoc|fact"><span>hr_comp_assoc</span></a><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn&apos;|const"><span>ial_assn'</span></span></span><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10561..10569"><span>ial_assn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span>"</span></span></span><span>

    
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl|const"><span>ial_empty_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_empty|const"><span>aial_empty</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfreftt|const"><span>→<span class="hidden">⇩</span><sub>a</sub><span class="hidden">⇩</span><sub>d</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="bound"><span>N</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_empty_def|fact"><span>aial_empty_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_impl_def_raw|axiom"><span class="entity_def" id="offset_12467..12469">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
        
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_aux_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_aux_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_aux_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Indexed_Array_List.ial_empty_aux|const"><span>ial_empty_aux</span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>N</span></span></span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.op_list_empty|const"><span>op_list_empty</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.fref&apos;|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.fref|fact"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty.fref&apos;|fact"><span class="entity_def" id="IICF_Indexed_Array_List.pre_ial_empty.param|fact"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty.fref|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.vcg|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.mcomb|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.arity|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.itype|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.pre_ial_empty_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty.itype|fact"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.fref&apos;|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.fref|thm"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty.fref&apos;|thm"><span class="entity_def" id="IICF_Indexed_Array_List.pre_ial_empty.param|thm"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty.fref|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.vcg(2)|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.vcg(1)|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.mcomb|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.arity|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty.itype|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.pre_ial_empty_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty.itype|thm"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty_def|axiom"><span class="entity_def" id="IICF_Indexed_Array_List.pre_ial_empty_def|axiom"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty_def|axiom"><span class="entity_def" id="offset_12554..12568">sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty_alt|fact"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty_alt|thm"><span class="entity_def" id="IICF_Indexed_Array_List.mop_ial_empty|const"><span class="entity_def" id="IICF_Indexed_Array_List.pre_ial_empty|const"><span class="entity_def" id="IICF_Indexed_Array_List.op_ial_empty|const"><span>ial_empty</span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_empty_aux|const"><span>ial_empty_aux</span></a></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><span class="free"><span>A</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_fold_custom_empty|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_fold_custom_empty(3)|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_fold_custom_empty(2)|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_fold_custom_empty(1)|thm"><span>ial_fold_custom_empty</span></span></span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.op_ial_empty|const"><span>op_ial_empty</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_List.html#IICF_List.op_list_empty|const"><span>op_list_empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.op_ial_empty|const"><span>op_ial_empty</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_empty|const"><span>mop_list_empty</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.mop_ial_empty|const"><span>mop_ial_empty</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_refine&apos;|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_empty_refine&apos;|thm"><span class="entity_def" id="offset_12793..12811">aial_empty_refine'</span></span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_empty|const"><span>aial_empty</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.op_ial_empty|const"><span>op_ial_empty</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.freft|const"><span>→<span class="hidden">⇩</span><sub>f</sub><span class="hidden">⇩</span><sub>d</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>N</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="bound"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_empty_refine|fact"><span>aial_empty_refine</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_12467..12469"><span>ial_empty_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_12793..12811"><span>aial_empty_refine'</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_12554..12568"><span>op_ial_empty.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl|const"><span>ial_swap_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_swap|const"><span>aial_swap</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_swap_def|fact"><span>aial_swap_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_swap_impl_def_raw|axiom"><span class="entity_def" id="offset_13255..13257">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_13255..13257"><span>ial_swap_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_swap_refine|fact"><span>aial_swap_refine</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_swap.fref|fact"><span>mop_list_swap.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl|const"><span>ial_length_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_length|const"><span>aial_length</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_length_def|fact"><span>aial_length_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_length_impl_def_raw|axiom"><span class="entity_def" id="offset_13548..13550">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_13548..13550"><span>ial_length_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_length_refine|fact"><span>aial_length_refine</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_length.fref|fact"><span>mop_list_length.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
              
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl|const"><span>ial_index_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_index|const"><span>aial_index</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_index_def|fact"><span>aial_index_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_index_impl_def_raw|axiom"><span class="entity_def" id="offset_13875..13877">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
      
    </span><span class="keyword1"><span class="command"><span>context</span></span></span><span> 
      </span><span class="comment1"><span>(*notes snatb_rel_def[symmetric, fcomp_norm_unfold] *)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_13875..13877"><span>ial_index_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_index_refine|fact"><span>aial_index_refine</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>]</span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_index.fref|fact"><span>mop_list_index.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  
    
      
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl|const"><span>ial_butlast_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_butlast|const"><span>aial_butlast</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_butlast_def|fact"><span>aial_butlast_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.annot_snat_const|method"><span class="operator"><span>annot_snat_const</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_butlast_impl_def_raw|axiom"><span class="entity_def" id="offset_14340..14342">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_14340..14342"><span>ial_butlast_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_butlast_refine|fact"><span>aial_butlast_refine</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>]</span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast.fref|fact"><span>mop_list_butlast.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
    </span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_impl_aux|fact"><span class="entity_def" id="IICF_Indexed_Array_List.aial_append_impl_aux|thm"><span class="entity_def" id="offset_14524..14544">aial_append_impl_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>qp</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span> </span><span class="free"><span>l'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>l'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>maxsize</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>qp</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_invar.maxsize_eq|fact"><span>ial_invar.maxsize_eq</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl|const"><span>ial_append_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_append|const"><span>aial_append</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefcptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>lqp</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>lqp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Domain|const"><span>Domain</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1|const"><span>ial_rel1</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefcptnd|const"><span>]<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefcptnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_append_def|fact"><span>aial_append_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.dest|attribute"><span class="operator"><span>dest</span></span></a><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_14524..14544"><span>aial_append_impl_aux</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl_def_raw|axiom"><span class="entity_def" id="offset_14958..14960">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl_refine_aux|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_append_impl_refine_aux|thm"><span class="entity_def" id="offset_14984..15010">ial_append_impl_refine_aux</span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_14958..14960"><span>ial_append_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_append_refine|fact"><span>aial_append_refine</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>N</span></span><span>

    </span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.append_fref&apos;|fact"><span class="entity_def" id="IICF_Indexed_Array_List.append_fref&apos;|thm"><span class="entity_def" id="offset_15099..15111">append_fref'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append|const"><span>mop_list_append</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append|const"><span>mop_list_append</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.freftnd|const"><span>→<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>⟨</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append.fref|fact"><span>mop_list_append.fref</span></a><span class="main"><span>)</span></span><span>
    
    </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>            
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.right_unique_inv|fact"><span class="entity_def" id="IICF_Indexed_Array_List.right_unique_inv|thm"><span>right_unique_inv</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.relator_props|attribute"><span class="operator"><span>relator_props</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_LEFT_UNIQUE|const"><span>IS_LEFT_UNIQUE</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_RIGHT_UNIQUE|const"><span>IS_RIGHT_UNIQUE</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.converse|const"><span>¯</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_LEFT_UNIQUE_def|fact"><span>IS_LEFT_UNIQUE_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.left_unique_inv|fact"><span class="entity_def" id="IICF_Indexed_Array_List.left_unique_inv|thm"><span>left_unique_inv</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.relator_props|attribute"><span class="operator"><span>relator_props</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_RIGHT_UNIQUE|const"><span>IS_RIGHT_UNIQUE</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_LEFT_UNIQUE|const"><span>IS_LEFT_UNIQUE</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>R</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.converse|const"><span>¯</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_LEFT_UNIQUE_def|fact"><span>IS_LEFT_UNIQUE_def</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.left_unique_id|fact"><span class="entity_def" id="IICF_Indexed_Array_List.left_unique_id|thm"><span>left_unique_id</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.relator_props|attribute"><span class="operator"><span>relator_props</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_LEFT_UNIQUE|const"><span>IS_LEFT_UNIQUE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_LEFT_UNIQUE_def|fact"><span>IS_LEFT_UNIQUE_def</span></a><span class="main"><span>)</span></span><span> 

    </span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
      </span><span class="comment1"><span>(*notes [fcomp_norm_unfold] = snatb_rel_def[symmetric]*)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>      
      </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_14984..15010"><span>ial_append_impl_refine_aux</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> N </span><span class="main"><span class="main"><span>=</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_15099..15111"><span>append_fref'</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> N</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Param_Tool.html#Param_Tool.parametricity|method"><span class="operator"><span>parametricity</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Tagged_Solver.html#Tagged_Solver.tagged_solver|method"><span class="operator"><span>tagged_solver</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    
      </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl|const"><span>ial_get_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_get|const"><span>aial_get</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_get_def|fact"><span>aial_get_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_impl_def_raw|axiom"><span class="entity_def" id="offset_16109..16111">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
      </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_hnr|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_hnr_mop|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_hnr|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_get_hnr_mop|thm"><span>ial_get</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_16109..16111"><span>ial_get_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_get_refine|fact"><span>aial_get_refine</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>for</span></span></span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>]</span></span><span> 
        </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get.fref|fact"><span>mop_list_get.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl|const"><span>ial_contains_impl</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_contains|const"><span>aial_contains</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10509..10517"><span>idx_assn</span></a><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_10358..10367"><span>ial2_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_contains_def|fact"><span>aial_contains_def</span></a><span> 
        </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl.refine|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl_def|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl.refine_raw|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl.refine|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl_def|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl.refine_raw|thm"><span class="entity_def" id="IICF_Indexed_Array_List.ial_contains_impl_def_raw|axiom"><span class="entity_def" id="offset_16452..16454">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
        
      </span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.list_contains_fref&apos;|fact"><span class="entity_def" id="IICF_Indexed_Array_List.list_contains_fref&apos;|thm"><span class="entity_def" id="offset_16491..16510">list_contains_fref'</span></span></span><span class="main"><span>:</span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_contains|const"><span>mop_list_contains</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_contains|const"><span>mop_list_contains</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.nbn_rel|const"><span>nbn_rel</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.freftnd|const"><span>→<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_contains.fref|fact"><span>mop_list_contains.fref</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Tagged_Solver.html#Tagged_Solver.tagged_solver|method"><span class="operator"><span>tagged_solver</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_16452..16454"><span>ial_contains_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.aial_contains_refine|fact"><span>aial_contains_refine</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span> </span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#offset_16491..16510"><span>list_contains_fref'</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> N</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="free"><span>N</span></span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Param_Tool.html#Param_Tool.parametricity|method"><span class="operator"><span>parametricity</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.IS_BELOW_ID_def|fact"><span>IS_BELOW_ID_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>            
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>schematic_goal</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_free|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_free|thm"><span>ial_assn_free</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.MK_FREE|const"><span>MK_FREE</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_assn|const"><span>ial_assn</span></a><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="var"><span>?fr</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_assn_def|fact"><span>ial_assn_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sepref_Tool.html#Sepref_Tool.sepref_dbg_side|method"><span class="operator"><span>sepref_dbg_side</span></span></a><span> </span><span class="comment1"><span>(* TODO: Use proper method here! *)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_boundD|fact"><span class="entity_def" id="IICF_Indexed_Array_List.ial_assn_boundD|thm"><span>ial_assn_boundD</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sepref_Translate.html#Sepref_Translate.sepref_bounds_dest|attribute"><span class="operator"><span>sepref_bounds_dest</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sepref_Basic.html#Sepref_Basic.rdomp|const"><span>rdomp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_assn&apos;|const"><span>ial_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="LLVM_More_Word_Lemmas.html#LLVM_More_Word_Lemmas.len2|class"><span>len2</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>N</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>N</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="LLVM_DS_Arith.html#LLVM_DS_Arith.max_snat|const"><span>max_snat</span></a><span> </span><span class="keyword1"><span>LENGTH</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_assn_def|fact"><span>ial_assn_def</span></a><span> </span><a class="entity_ref" href="IICF_Indexed_Array_List.html#IICF_Indexed_Array_List.ial_rel1_def|fact"><span>ial_rel1_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sepref_Translate.html#Sepref_Translate.sepref_bounds|method"><span class="operator"><span>sepref_bounds</span></span></a><span>
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>