<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory IICF_Abs_Heap</title>
</head>


<body>
<div class="head">
<h1>Theory IICF_Abs_Heap</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Heap Implementation On Lists›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="IICF_Abs_Heap.html"><span>IICF_Abs_Heap</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
  </span><span class="quoted"><span>"</span><a href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html"><span>HOL-Library.Multiset</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="Sepref.html"><span>../../../Sepref</span></a><span>"</span></span><span> 
  </span><span class="quoted"><span>"</span><a href="List-Index.List_Index.html"><span>List-Index.List_Index</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="IICF_List.html"><span>../../Intf/IICF_List</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="IICF_Prio_Bag.html"><span>../../Intf/IICF_Prio_Bag</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
  We define Min-Heaps, which implement multisets of prioritized values.
  The operations are: 
    empty heap, emptiness check, insert an element, 
    remove a minimum priority element.›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Basic Definitions›</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heap|type"><span>heap</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>locale</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct|locale"><span>heapstruct</span></span><span> </span><span class="main"><span>=</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>prio</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_def_raw|axiom"><span class="entity_def" id="offset_541..551">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid|const"><span class="entity_def" id="offset_552..557">valid</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>valid</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;|const"><span class="entity_def" id="offset_654..655">α</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.multiset|type"><span>multiset</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span>"</span></span></span><span>
  
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_empty|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_empty|thm"><span>valid_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid0|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid0|thm"><span>valid0</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_glen|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_glen|thm"><span>valid_glen</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_len|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_len|thm"><span>valid_len</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.validI|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.validI|thm"><span>validI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_def_raw|axiom"><span class="entity_def" id="offset_1091..1101">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of|const"><span class="entity_def" id="offset_1102..1108">val_of</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val_of</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of|const"><span class="entity_def" id="offset_1179..1186">prio_of</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>prio_of</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span>prio</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Navigating the tree›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_def_raw|axiom"><span class="entity_def" id="offset_1303..1313">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>parent</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Rings.html#Rings.divide_class.divide|const"><span>div</span></a></span><span> </span><span class="numeral"><span>2</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.left_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.left_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.left_def_raw|axiom"><span class="entity_def" id="offset_1367..1377">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.left|const"><span>left</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>left</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.right_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.right_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.right_def_raw|axiom"><span class="entity_def" id="offset_1423..1433">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.right|const"><span>right</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>right</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.has_parent|const"><span class="entity_def" id="offset_1500..1510">has_parent</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.has_left|const"><span class="entity_def" id="offset_1555..1563">has_left</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.has_right|const"><span class="entity_def" id="offset_1606..1615">has_right</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.vparent|const"><span>vparent</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>==</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.vleft|const"><span>vleft</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>==</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.vright|const"><span>vright</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>==</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pparent|const"><span class="entity_def" id="offset_1817..1824">pparent</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>==</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pleft|const"><span class="entity_def" id="offset_1872..1877">pleft</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>==</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pright|const"><span class="entity_def" id="offset_1923..1929">pright</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>==</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_left_id|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_left_id|thm"><span>parent_left_id</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_right_id|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_right_id|thm"><span>parent_right_id</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.child_of_parentD|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.child_of_parentD|thm"><span class="entity_def" id="offset_2182..2198">child_of_parentD</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.rc_imp_lc|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.rc_imp_lc|thm"><span>rc_imp_lc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2460..2465">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases(6)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases(5)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases(4)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases(3)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases(2)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.plr_corner_cases(1)|thm"><span>plr_corner_cases</span></span></span></span></span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2460..2465"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.i_eq_parent_conv|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.i_eq_parent_conv|thm"><span>i_eq_parent_conv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Heap Property›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The heap property states, that every node's priority is greater 
      or equal to its parent's priority ›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_def_raw|axiom"><span class="entity_def" id="offset_2953..2963">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar|const"><span class="entity_def" id="offset_2964..2974">heap_invar</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>heap_invar</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> 
      </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>


    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_rel1_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_rel1_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_rel1_def_raw|axiom"><span class="entity_def" id="offset_3096..3106">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_rel1.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_rel1.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_rel1|const"><span class="entity_def" id="offset_3108..3117">heap_rel1</span></span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span>"</span></span></span><span>  
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_empty|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_empty|thm"><span>heap_invar_empty</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.pelims|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.cases|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.termination|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.pinduct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.psimps|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.inducts|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.simps|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.induct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.cases|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.intros|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.inducts|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.simps|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.induct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.cases|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.intros|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.pelims|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.cases|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.termination|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.pinduct|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.psimps|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.inducts|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.simps|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.induct|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.cases|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel.intros|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.inducts|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.simps|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.induct|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.cases|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph.intros|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_def|axiom"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel_def|axiom"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_sumC_def|axiom"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph_def|axiom"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_dom|const"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_rel|const"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_sumC|const"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme_graph|const"><span>function</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme|const"><span>heap_induction_scheme</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>heap_induction_scheme</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>heap_induction_scheme</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.pat_completeness|method"><span class="operator"><span>pat_completeness</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>  

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.elims|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.induct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.simps|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.elims|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.induct|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_induction_scheme.simps|thm"><span class="entity_def" id="offset_3425..3436">termination</span></span></span></span></span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Fun_Def.html#Fun_Def.relation|method"><span class="operator"><span>relation</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.less_than|const"><span>less_than</span></a><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> 
      </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_parent_le|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_parent_le|thm"><span class="entity_def" id="offset_3537..3551">heap_parent_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>⟧</span></span><span> 
        </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_min_prop|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_min_prop|thm"><span class="entity_def" id="offset_3690..3703">heap_min_prop</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_3719..3720">H</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_3751..3752">V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>False</span><span> </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3751..3752"><span>V</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc_lessI|fact"><span>Suc_lessI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
      </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_3944..3948">True</span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3751..3752"><span>V</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3944..3948"><span>True</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3425..3436"><span>heap_induction_scheme.induct</span></a><span class="main"><span>)</span></span><span>  
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rename_tac</span></span><span> i</span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct_tacs.ML.html#HOL.case_tac|method"><span class="operator"><span>case_tac</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="improper"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>rotated</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3537..3551"><span>heap_parent_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3719..3720"><span>H</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>3</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>  
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.rprems|method"><span class="operator"><span>rprems</span></span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>4</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3537..3551"><span>heap_parent_le</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3719..3720"><span>H</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹ Obviously, the heap property can also be stated in terms of children,
      i.e., each node's priority is smaller or equal to it's children's priority.›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.children_ge_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.children_ge_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.children_ge_def_raw|axiom"><span class="entity_def" id="offset_4698..4708">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.children_ge.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.children_ge.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.children_ge|const"><span class="entity_def" id="offset_4710..4721">children_ge</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> 
      </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar&apos;_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar&apos;_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar&apos;_def_raw|axiom"><span class="entity_def" id="offset_4817..4827">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar&apos;.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar&apos;.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar&apos;|const"><span class="entity_def" id="offset_4829..4840">heap_invar'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4710..4721"><span>children_ge</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>i</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_eq_heap&apos;|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_eq_heap&apos;|thm"><span class="entity_def" id="offset_4903..4916">heap_eq_heap'</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4829..4840"><span>heap_invar'</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4817..4827"><span>heap_invar'_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>frule</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2182..2198"><span>child_of_parentD</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Basic Operations›</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The basic operations are the only operations that directly 
      modify the underlying data structure.›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Val-Of›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_pre|const"><span class="entity_def" id="offset_5372..5382">val_of_pre</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_op_def_raw|axiom"><span class="entity_def" id="offset_5404..5414">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_op|const"><span class="entity_def" id="offset_5415..5424">val_of_op</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>val_of_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_get|const"><span>mop_list_get</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_correct|thm"><span>val_of_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5372..5382"><span>val_of_pre</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5415..5424"><span>val_of_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5404..5414"><span>val_of_op_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_pre|const"><span class="entity_def" id="offset_5739..5750">prio_of_pre</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5372..5382"><span>val_of_pre</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op_def_raw|axiom"><span class="entity_def" id="offset_5771..5781">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op|const"><span class="entity_def" id="offset_5783..5793">prio_of_op</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>v</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5415..5424"><span>val_of_op</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>prio</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.prio_of_op_correct|thm"><span>prio_of_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5739..5750"><span>prio_of_pre</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5771..5781"><span>prio_of_op_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Update›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_pre|const"><span class="entity_def" id="offset_6062..6072">update_pre</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_def_raw|axiom"><span class="entity_def" id="offset_6096..6106">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update|const"><span class="entity_def" id="offset_6107..6113">update</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>update</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>[</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="main"><span>:=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>]</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_op_def_raw|axiom"><span class="entity_def" id="offset_6196..6206">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_op|const"><span class="entity_def" id="offset_6207..6216">update_op</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>update_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_set|const"><span>mop_list_set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_correct|thm"><span>update_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6062..6072"><span>update_pre</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6207..6216"><span>update_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6196..6206"><span>update_op_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6096..6106"><span>update_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_valid|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_valid|thm"><span>update_valid</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>j</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6096..6106"><span>update_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_update|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_update|thm"><span>val_of_update</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6062..6072"><span>update_pre</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
      </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6096..6106"><span>update_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_list_update|fact"><span>nth_list_update</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.length_update|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.length_update|thm"><span>length_update</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6096..6106"><span>update_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Exchange›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹ Exchange two elements ›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_def_raw|axiom"><span class="entity_def" id="offset_7014..7024">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch|const"><span class="entity_def" id="offset_7025..7029">exch</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>exch</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="More_List.html#More_List.swap|const"><span>swap</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_pre|const"><span class="entity_def" id="offset_7133..7141">exch_pre</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_def_raw|axiom"><span class="entity_def" id="offset_7178..7188">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op|const"><span class="entity_def" id="offset_7189..7196">exch_op</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>exch_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span> 
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_swap|const"><span>mop_list_swap</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>l</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_alt|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_alt|thm"><span>exch_op_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span> 
      </span><span class="bound"><span>vi</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5415..5424"><span>val_of_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>vj</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5415..5424"><span>val_of_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6207..6216"><span>update_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6207..6216"><span>update_op</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="bound"><span>vi</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7178..7188"><span>exch_op_def</span></a><span> </span><a class="entity_ref" href="More_List.html#More_List.swap_def|fact"><span>swap_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5404..5414"><span>val_of_op_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6196..6206"><span>update_op_def</span></a><span> 
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_eq_iff|fact"><span>pw_eq_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_op_correct|thm"><span>exch_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7133..7141"><span>exch_pre</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7178..7188"><span>exch_op_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7014..7024"><span>exch_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
       
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_exch|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_exch|thm"><span>valid_exch</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7014..7024"><span>exch_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_exch|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_exch|thm"><span>val_of_exch</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>k</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>j</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>j</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>k</span></span><span>
      </span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7014..7024"><span>exch_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="More_List.html#More_List.swap_nth|fact"><span>swap_nth</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_eq|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.exch_eq|thm"><span>exch_eq</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7014..7024"><span>exch_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;_exch|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;_exch|thm"><span>α_exch</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>⟧</span></span><span> 
      </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7014..7024"><span>exch_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.length_exch|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.length_exch|thm"><span>length_exch</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7014..7024"><span>exch_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Butlast›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Remove last element›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_pre|const"><span>butlast_pre</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_op_def_raw|axiom"><span class="entity_def" id="offset_8664..8674">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_op|const"><span class="entity_def" id="offset_8675..8685">butlast_op</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>butlast_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_butlast|const"><span>mop_list_butlast</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.butlast_op_correct|thm"><span>butlast_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.butlast_pre|const"><span>butlast_pre</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_8675..8685"><span>butlast_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_8664..8674"><span>butlast_op_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_butlast_conv|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_butlast_conv|thm"><span class="entity_def" id="offset_8933..8951">valid_butlast_conv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_butlast|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_butlast|thm"><span class="entity_def" id="offset_9051..9064">valid_butlast</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.rev_cases|fact"><span>rev_cases</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_butlast|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_butlast|thm"><span>val_of_butlast</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>⟧</span></span><span> 
      </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_butlast|fact"><span>nth_butlast</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_butlast&apos;|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_butlast&apos;|thm"><span>val_of_butlast'</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.rev_cases|fact"><span>rev_cases</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_append|fact"><span>nth_append</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;_butlast|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;_butlast|thm"><span>α_butlast</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><span>⟧</span></span><span> 
      </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.rev_cases|fact"><span>rev_cases</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span class="main"><span>)</span></span><span>   
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_butlast|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_butlast|thm"><span>heap_invar_butlast</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_9051..9064"><span>valid_butlast</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Append›</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.append_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.append_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.append_op_def_raw|axiom"><span class="entity_def" id="offset_9919..9929">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.append_op|const"><span class="entity_def" id="offset_9930..9939">append_op</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>append_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_append|const"><span>mop_list_append</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.append_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.append_op_correct|thm"><span>append_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_9930..9939"><span>append_op</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_9919..9929"><span>append_op_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_append|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.valid_append|thm"><span>valid_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_append|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.val_of_append|thm"><span>val_of_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_append|fact"><span>nth_append</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;_append|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.\&lt;alpha&gt;_append|thm"><span>α_append</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>v</span></span><span class="main"><span>#}</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Auxiliary operations›</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The auxiliary operations do not have a corresponding abstract operation, but
      are to restore the heap property after modification.›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Swim›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹This invariant expresses that the heap has a single defect,
      which can be repaired by swimming up›</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_def_raw|axiom"><span class="entity_def" id="offset_10869..10879">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar|const"><span class="entity_def" id="offset_10880..10890">swim_invar</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>swim_invar</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> 
        </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> 
        </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> 
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Move up an element that is too small, until it fits›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op_def_raw|axiom"><span class="entity_def" id="offset_11233..11243">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op|const"><span class="entity_def" id="offset_11244..11251">swim_op</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>swim_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/RefineG_Recursion.html#RefineG_Recursion.RECT|const"><span>RECT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>swim</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><span class="bound"><span>ppi</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>pi</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="bound"><span>ppi</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="bound"><span>pi</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
              </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
              </span><span class="bound"><span>swim</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
              </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
          </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> 
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_valid|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_valid|thm"><span class="entity_def" id="offset_11741..11757">swim_invar_valid</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_exit1|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_exit1|thm"><span class="entity_def" id="offset_11842..11858">swim_invar_exit1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_exit2|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_exit2|thm"><span class="entity_def" id="offset_11975..11991">swim_invar_exit2</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12112..12117">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_pres|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_pres|thm"><span class="entity_def" id="offset_12118..12133">swim_invar_pres</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_12149..12152">HPI</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_12186..12194">VIOLATED</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_12235..12238">INV</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>defines</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>h'</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h'</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.safe|method"><span class="operator"><span>safe</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12112..12117"><span>h'_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12149..12152"><span>HPI</span></a><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12149..12152"><span>HPI</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12186..12194"><span>VIOLATED</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12235..12238"><span>INV</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12112..12117"><span>h'_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12149..12152"><span>HPI</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12186..12194"><span>VIOLATED</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12235..12238"><span>INV</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12112..12117"><span>h'_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>


    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_decr|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_decr|thm"><span class="entity_def" id="offset_12634..12649">swim_invar_decr</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_12665..12668">INV</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_12699..12700">V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_12728..12732">DECR</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>prio</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12665..12668"><span>INV</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12699..12700"><span>V</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12728..12732"><span>DECR</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_op_correct|thm"><span>swim_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span>
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11244..11251"><span>swim_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>h'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11233..11243"><span>swim_op_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>goals_limit</span></span><span> </span><span class="main"><span class="main"><span>=</span></span></span><span> 1</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>  </span><a class="entity_ref" href="../../AFP/Refine_Monadic/RefineG_Recursion.html#RefineG_Recursion.RECT_rule|fact"><span>RECT_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> 
          pre</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>hh</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> 
            </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="bound"><span>hh</span></span><span> </span><span class="bound"><span>i</span></span><span> 
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>hh</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> 
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>hh</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span>
          V </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.inv_image|const"><span>inv_image</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.less_than|const"><span>less_than</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span>"</span></span></span><span>
          </span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11741..11757"><span>swim_invar_valid</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.rprems|method"><span class="operator"><span>rprems</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12118..12133"><span>swim_invar_pres</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11975..11991"><span>swim_invar_exit2</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11842..11858"><span>swim_invar_exit1</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>



    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Sink›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Move down an element that is too big, until it fits in›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_def_raw|axiom"><span class="entity_def" id="offset_13938..13948">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op|const"><span class="entity_def" id="offset_13949..13956">sink_op</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sink_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/RefineG_Recursion.html#RefineG_Recursion.RECT|const"><span>RECT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>sink</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>lp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>rp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>p</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>rp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><span class="bound"><span>lp</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
              </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
              </span><span class="bound"><span>sink</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>rp</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="bound"><span>lp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>rp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
              </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
              </span><span class="bound"><span>sink</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> 
              </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
          </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><span class="bound"><span>lp</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>p</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>;</span></span><span>
            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>lp</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="bound"><span>p</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
              </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
              </span><span class="bound"><span>sink</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>
            </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
              </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
            
          </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> 
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
        </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹This invariant expresses that the heap has a single defect, 
      which can be repaired by sinking›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_def_raw|axiom"><span class="entity_def" id="offset_15005..15015">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar|const"><span class="entity_def" id="offset_15017..15027">sink_invar</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4710..4721"><span>children_ge</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1500..1510"><span>has_parent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4710..4721"><span>children_ge</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1817..1824"><span>pparent</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_valid|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_valid|thm"><span class="entity_def" id="offset_15182..15198">sink_invar_valid</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_exit|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_exit|thm"><span class="entity_def" id="offset_15283..15298">sink_invar_exit</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4710..4721"><span>children_ge</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>⟧</span></span><span> 
      </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4829..4840"><span>heap_invar'</span></a><span> </span><span class="free"><span>l</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4817..4827"><span>heap_invar'_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_aux1|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_aux1|thm"><span>sink_aux1</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15576..15581">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres1|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres1|thm"><span class="entity_def" id="offset_15582..15598">sink_invar_pres1</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15576..15581"><span>assms</span></a><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15940..15945">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres2|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres2|thm"><span class="entity_def" id="offset_15946..15962">sink_invar_pres2</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15940..15945"><span>assms</span></a><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16302..16307">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres3|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres3|thm"><span class="entity_def" id="offset_16308..16324">sink_invar_pres3</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_16302..16307"><span>assms</span></a><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_16665..16670">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres4|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres4|thm"><span class="entity_def" id="offset_16671..16687">sink_invar_pres4</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1923..1929"><span>pright</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_16665..16670"><span>assms</span></a><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17030..17035">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres5|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres5|thm"><span class="entity_def" id="offset_17036..17052">sink_invar_pres5</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1555..1563"><span>has_left</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1606..1615"><span>has_right</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1872..1877"><span>pleft</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17030..17035"><span>assms</span></a><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres(5)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres(4)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres(3)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres(2)|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_pres(1)|thm"><span class="entity_def" id="offset_17361..17376">sink_invar_pres</span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15582..15598"><span>sink_invar_pres1</span></a><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15946..15962"><span>sink_invar_pres2</span></a><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_16308..16324"><span>sink_invar_pres3</span></a><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_16671..16687"><span>sink_invar_pres4</span></a><span> 
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17036..17052"><span>sink_invar_pres5</span></a><span>


    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_incr|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_incr|thm"><span class="entity_def" id="offset_17511..17526">sink_invar_incr</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_17542..17545">INV</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_17576..17577">V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_17605..17609">INCR</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>prio</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater_eq|const"><span>≥</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17542..17545"><span>INV</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17576..17577"><span>V</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17605..17609"><span>INCR</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>frule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>frule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.spec|fact"><span>spec</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>


    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_correct|thm"><span>sink_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span>
      </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13949..13956"><span>sink_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>h'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13938..13948"><span>sink_op_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4903..4916"><span>heap_eq_heap'</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><span class="operator"><span>goals_limit</span></span><span> </span><span class="main"><span class="main"><span>=</span></span></span><span> 1</span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>  </span><a class="entity_ref" href="../../AFP/Refine_Monadic/RefineG_Recursion.html#RefineG_Recursion.RECT_rule|fact"><span>RECT_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> 
          pre</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>hh</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="bound"><span>hh</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>hh</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>hh</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span class="quasi_keyword"><span>and</span></span></span></span></span><span>
          V </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Wellfounded.html#Wellfounded.measure|const"><span>measure</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15182..15198"><span>sink_invar_valid</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.rprems|method"><span class="operator"><span>rprems</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17361..17376"><span>sink_invar_pres</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.rprems|method"><span class="operator"><span>rprems</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17361..17376"><span>sink_invar_pres</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15283..15298"><span>sink_invar_exit</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.rprems|method"><span class="operator"><span>rprems</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17361..17376"><span>sink_invar_pres</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15283..15298"><span>sink_invar_exit</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15283..15298"><span>sink_invar_exit</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_swim_rule|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_swim_rule|thm"><span class="entity_def" id="offset_19506..19523">sink_op_swim_rule</span></span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13949..13956"><span>sink_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>h'</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>frule</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11741..11757"><span>swim_invar_valid</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13938..13948"><span>sink_op_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/RefineG_Recursion.html#RefineG_Recursion.RECT_unfold|fact"><span>RECT_unfold</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Mono_Prover.html#Refine_Mono_Prover.refine_mono|method"><span class="operator"><span>refine_mono</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>fold</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13938..13948"><span>sink_op_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11741..11757"><span>swim_invar_valid</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt_def_raw|axiom"><span class="entity_def" id="offset_20129..20139">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt|const"><span class="entity_def" id="offset_20140..20151">sink_op_opt</span></span></span></span></span><span>
      </span><span class="comment1"><span>― ‹Sink operation as presented in Sedgewick et al. Algs4 reference implementation›</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>   
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>sink_op_opt</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/RefineG_Recursion.html#RefineG_Recursion.RECT|const"><span>RECT</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>D</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>k</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>k</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>len</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="bound"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="bound"><span>len</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="numeral"><span>2</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.times_class.times|const"><span>*</span></a></span><span class="bound"><span>k</span></span><span class="main"><span>;</span></span><span>
          </span><span class="bound"><span>pj</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>;</span></span><span>

          </span><span class="bound"><span>j</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="main"><span>(</span></span><span>
            </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="bound"><span>len</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
              </span><span class="bound"><span>psj</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
              </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="bound"><span>pj</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span class="bound"><span>psj</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>j</span></span><span>
            </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>

          </span><span class="bound"><span>pj</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>;</span></span><span>
          </span><span class="bound"><span>pk</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5783..5793"><span>prio_of_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>k</span></span><span class="main"><span>;</span></span><span>
          </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>pk</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="bound"><span>pj</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
            </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>k</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>;</span></span><span>
            </span><span class="bound"><span>D</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>h</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>
          </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span>
            </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
        </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>    
      </span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>,</span></span><span class="free"><span class="bound"><span class="entity"><span>k</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt_eq|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_op_opt_eq|thm"><span>sink_op_opt_eq</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_20140..20151"><span>sink_op_opt</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>k</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13949..13956"><span>sink_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>k</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_20129..20139"><span>sink_op_opt_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13938..13948"><span>sink_op_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.fo_rule|method"><span class="operator"><span>fo_rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.arg_cong|fact"><span>arg_cong</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_cong|fact"><span>fun_cong</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13938..13948"><span>sink_op_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>cong</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_cong|fact"><span>if_cong</span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.if_split|fact"><span>if_split</span></a><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5771..5781"><span>prio_of_op_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5404..5414"><span>val_of_op_def</span></a><span> 
        </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_imp_diff_less|fact"><span>less_imp_diff_less</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT_same_eq_conv|fact"><span>ASSERT_same_eq_conv</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.nz_le_conv_less|fact"><span>nz_le_conv_less</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Repair›</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Repair a local defect in the heap. This can be done 
      by swimming and sinking. Note that, depending on the defect, only one
      of the operations will change the heap. 
      Moreover, note that we do not need repair to implement the heap operations. 
      However, it is required for heapmaps. ›</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_op_def_raw|axiom"><span class="entity_def" id="offset_21655..21665">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_op|const"><span class="entity_def" id="offset_21667..21676">repair_op</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13949..13956"><span>sink_op</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
      </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11244..11251"><span>swim_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_21761..21766">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_sink_swim_cases|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.update_sink_swim_cases|thm"><span class="entity_def" id="offset_21767..21789">update_sink_swim_cases</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span> </span><span class="main"><span>|</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder_class.linear|fact"><span>linear</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>prio</span></span><span> </span><span class="free"><span>v</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1179..1186"><span>prio_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disjE|fact"><span>disjE</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_12634..12649"><span>swim_invar_decr</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_21761..21766"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_17511..17526"><span>sink_invar_incr</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_21761..21766"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_imp_swim_invar|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.heap_invar_imp_swim_invar|thm"><span class="entity_def" id="offset_22120..22145">heap_invar_imp_swim_invar</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>


    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_22279..22284">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.repair_correct|thm"><span>repair_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_21667..21676"><span>repair_op</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>h'</span></span><span class="main"><span>.</span></span><span>
        </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_6107..6113"><span>update</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_21767..21789"><span>update_sink_swim_cases</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>v</span></span></span><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_22279..22284"><span>assms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_21655..21665"><span>repair_op_def</span></a><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_19506..19523"><span>sink_op_swim_rule</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>4</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_22279..22284"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_22120..22145"><span>heap_invar_imp_swim_invar</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span>3</span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Operations›</span></span></span><span>

    </span><span class="comment1"><span>(*
    subsubsection ‹Length›
    definition length_op :: "'a heap ⇒ nat nres" where "length_op ≡ lst_op_length"

    lemma [refine_vcg]: "length_op l ≤ SPEC (λr. r = length l)"
      unfolding length_op_def
      by refine_vcg
    *)</span></span><span>  

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Empty›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty|const"><span>empty</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The empty heap›</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>empty</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.Nil|const"><span>[]</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_def_raw|axiom"><span class="entity_def" id="offset_23181..23191">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op|const"><span class="entity_def" id="offset_23192..23200">empty_op</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>empty_op</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="IICF_List.html#IICF_List.mop_list_empty|const"><span>mop_list_empty</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_correct|thm"><span class="entity_def" id="offset_23270..23286">empty_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23192..23200"><span>empty_op</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23181..23191"><span>empty_op_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Emptiness check›</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_def_raw|axiom"><span class="entity_def" id="offset_23452..23462">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op|const"><span class="entity_def" id="offset_23463..23474">is_empty_op</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹Check for emptiness›</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>is_empty_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>=</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_correct|thm"><span>is_empty_op_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23463..23474"><span>is_empty_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23452..23462"><span>is_empty_op_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Insert›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_def_raw|axiom"><span class="entity_def" id="offset_23814..23824">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op|const"><span class="entity_def" id="offset_23825..23834">insert_op</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹Insert element›</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>insert_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_9930..9939"><span>append_op</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_11244..11251"><span>swim_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>h</span></span><span>
      </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_insert|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.swim_invar_insert|thm"><span class="entity_def" id="offset_24067..24084">swim_invar_insert</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10880..10890"><span>swim_invar</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.append|const"><span>@</span></a></span><span class="main"><span>[</span></span><span class="free"><span>x</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>l</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_10869..10879"><span>swim_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2953..2963"><span>heap_invar_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_append|fact"><span>nth_append</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span>  
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23825..23834"><span>insert_op</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><a class="entity_ref" href="IICF_Multiset.html#IICF_Multiset.op_mset_insert|const"><span>op_mset_insert</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23814..23824"><span>insert_op_def</span></a><span class="main"><span>[</span></span><span class="operator"><span>abs_def</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3096..3106"><span>heap_rel1_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.o_def|fact"><span>o_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_24067..24084"><span>swim_invar_insert</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_correct|thm"><span class="entity_def" id="offset_24484..24501">insert_op_correct</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23825..23834"><span>insert_op</span></a><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>h'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="free"><span>v</span></span><span class="main"><span>#}</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23814..23824"><span>insert_op_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_24067..24084"><span>swim_invar_insert</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_24484..24501"><span>insert_op_correct</span></a><span>  

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Pop minimum element›</span></span></span><span>  

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_def_raw|axiom"><span class="entity_def" id="offset_24766..24776">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op|const"><span class="entity_def" id="offset_24777..24787">pop_min_op</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pop_min_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>m</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5415..5424"><span>val_of_op</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>;</span></span><span>
        </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>l</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7189..7196"><span>exch_op</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span> </span><span class="bound"><span>l</span></span><span class="main"><span>;</span></span><span>
        </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_8675..8685"><span>butlast_op</span></a><span> </span><span class="bound"><span>h</span></span><span class="main"><span>;</span></span><span>
        
        </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
          </span><span class="bound"><span>h</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_13949..13956"><span>sink_op</span></a><span> </span><span class="bound"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>;</span></span><span>
          </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>m</span></span><span class="main"><span>,</span></span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>}</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>m</span></span><span class="main"><span>,</span></span><span class="bound"><span>h</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><span>}</span></span><span>"</span></span></span><span>


    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.left_not_one|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.left_not_one|thm"><span>left_not_one</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.left|const"><span>left</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1367..1377"><span>left_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.right_one_conv|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.right_one_conv|thm"><span>right_one_conv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.right|const"><span>right</span></a><span> </span><span class="free"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1423..1433"><span>right_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_one_conv|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.parent_one_conv|thm"><span>parent_one_conv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heapstruct.parent|const"><span>parent</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1303..1313"><span>parent_def</span></a><span class="main"><span>)</span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_init|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.sink_invar_init|thm"><span class="entity_def" id="offset_25416..25431">sink_invar_init</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_25447..25448">I</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_25480..25482">NE</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.greater|const"><span>&gt;</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15017..15027"><span>sink_invar</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.butlast|const"><span>butlast</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_7025..7029"><span>exch</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25480..25482"><span>NE</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_25602..25603">V</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.neq_Nil_conv|fact"><span>neq_Nil_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span>
    
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25447..25448"><span>I</span></a><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4903..4916"><span>heap_eq_heap'</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4817..4827"><span>heap_invar'_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_15005..15015"><span>sink_invar_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.impI|fact"><span>impI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.allI|fact"><span>allI</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25480..25482"><span>NE</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25602..25603"><span>V</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_8933..8951"><span>valid_butlast_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25602..25603"><span>V</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25480..25482"><span>NE</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_8933..8951"><span>valid_butlast_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_4698..4708"><span>children_ge_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25602..25603"><span>V</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25480..25482"><span>NE</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_8933..8951"><span>valid_butlast_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.in_set_conv_val|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.in_set_conv_val|thm"><span class="entity_def" id="offset_26131..26146">in_set_conv_val</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1102..1108"><span>val_of</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffI|fact"><span>iffI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_conv_nth|fact"><span>in_set_conv_nth</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="improper"><span>i</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.in_set_conv_nth|fact"><span>in_set_conv_nth</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>rule_tac</span></span><span> x</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="improper"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span class="quasi_keyword"><span>in</span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_26478..26483">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_correct|thm"><span class="entity_def" id="offset_26484..26502">pop_min_op_correct</span></span></span><span class="main"><span>:</span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_24777..24787"><span>pop_min_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>v</span></span><span class="main"><span>,</span></span><span class="bound"><span>h'</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span>
        </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="bound"><span>h'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="main"><span>{#</span></span><span class="bound"><span>v</span></span><span class="main"><span>#}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>v'</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>prio</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>prio</span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>    
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length_greater_0_conv|fact"><span>length_greater_0_conv</span></a><span>
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_26760..26762">LG</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length_greater_0_conv|fact"><span>length_greater_0_conv</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>

      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_26478..26483"><span>assms</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_24766..24776"><span>pop_min_op_def</span></a><span>  
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_25416..25431"><span>sink_invar_init</span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_26760..26762"><span>LG</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span> </span><span class="comment1"><span>(* FIXME: Looking below val_of! *)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_26131..26146"><span>in_set_conv_val</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3690..3703"><span>heap_min_prop</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span> </span><span class="comment1"><span>(* FIXME: Looking below val_of! *)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span> </span><span class="comment1"><span>(* FIXME: Looking below val_of! *)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    

    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_26484..26502"><span>pop_min_op_correct</span></a><span>

    </span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Peek minimum element›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_def|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_def|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_def_raw|axiom"><span class="entity_def" id="offset_27461..27471">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op.cong|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op.cong|thm"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op|const"><span class="entity_def" id="offset_27472..27483">peek_min_op</span></span></span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#IICF_Abs_Heap.heap|type"><span>heap</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>peek_min_op</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_552..557"><span>valid</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
        </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_5415..5424"><span>val_of_op</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span>
      </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_27640..27645">lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_correct|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_correct|thm"><span class="entity_def" id="offset_27646..27665">peek_min_op_correct</span></span></span><span class="main"><span>:</span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_2964..2974"><span>heap_invar</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.empty_mset|const"><span>{#}</span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_27472..27483"><span>peek_min_op</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> 
        </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.member_mset|const"><span>∈#</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>v'</span></span><span class="main"><span>∈</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.set_mset|const"><span>set_mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_654..655"><span>α</span></a><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>prio</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>prio</span></span><span> </span><span class="bound"><span>v'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_27461..27471"><span>peek_min_op_def</span></a><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_27640..27645"><span>assms</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_541..551"><span>valid_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="free"><span>h</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_1091..1101"><span>val_of_def</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span> </span><span class="comment1"><span>(* FIXME: Looking below val_of! *)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_26131..26146"><span>in_set_conv_val</span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3690..3703"><span>heap_min_prop</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span class="keyword3"><span>[</span></span></span><span class="main"><span class="keyword3"><span>]</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      
    </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_correct&apos;|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_correct&apos;|thm"><span>peek_min_op_correct'</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_27646..27665"><span>peek_min_op_correct</span></a><span>


    </span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Operations as Relator-Style Refinement›</span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_refine|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.empty_op_refine|thm"><span>empty_op_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23192..23200"><span>empty_op</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><a class="entity_ref" href="IICF_Multiset.html#IICF_Multiset.op_mset_empty|const"><span>op_mset_empty</span></a><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23270..23286"><span>empty_op_correct</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3096..3106"><span>heap_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_refine|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.is_empty_op_refine|thm"><span>is_empty_op_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23463..23474"><span>is_empty_op</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="IICF_Multiset.html#IICF_Multiset.op_mset_is_empty|const"><span>op_mset_is_empty</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>  
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3096..3106"><span>heap_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_refine|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.insert_op_refine|thm"><span>insert_op_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_23825..23834"><span>insert_op</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><a class="entity_ref" href="IICF_Multiset.html#IICF_Multiset.op_mset_insert|const"><span>op_mset_insert</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN_as_SPEC_refine|fact"><span>RETURN_as_SPEC_refine</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3096..3106"><span>heap_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_refine|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.pop_min_op_refine|thm"><span>pop_min_op_refine</span></span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_24777..24787"><span>pop_min_op</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Prio_Bag.html#IICF_Prio_Bag.mop_prio_pop_min|const"><span>mop_prio_pop_min</span></a><span> </span><span class="free"><span>prio</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Prio_Bag.html#IICF_Prio_Bag.mop_prio_pop_min_def|fact"><span>mop_prio_pop_min_def</span></a><span> </span><a class="entity_ref" href="Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC_refine|fact"><span>SPEC_refine</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3096..3106"><span>heap_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_refine|fact"><span class="entity_def" id="IICF_Abs_Heap.heapstruct.peek_min_op_refine|thm"><span>peek_min_op_refine</span></span></span><span class="main"><span>:</span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_27472..27483"><span>peek_min_op</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="IICF_Prio_Bag.html#IICF_Prio_Bag.mop_prio_peek_min|const"><span>mop_prio_peek_min</span></a><span> </span><span class="free"><span>prio</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3108..3117"><span>heap_rel1</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_Prio_Bag.html#IICF_Prio_Bag.mop_prio_peek_min_def|fact"><span>mop_prio_peek_min_def</span></a><span> </span><a class="entity_ref" href="Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RES_refine|fact"><span>RES_refine</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="IICF_Abs_Heap.html#offset_3096..3106"><span>heap_rel1_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br_def|fact"><span>br_def</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>


  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span></pre>
</body>

</html>