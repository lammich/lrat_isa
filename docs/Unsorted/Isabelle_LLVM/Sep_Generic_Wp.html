<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Sep_Generic_Wp</title>
</head>


<body>
<div class="head">
<h1>Theory Sep_Generic_Wp</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>section</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹General VCG Setup for Separation Logic›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Sep_Generic_Wp.html"><span>Sep_Generic_Wp</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> 
  </span><span class="quoted"><span>"</span><a href="Sep_Algebra_Add.html"><span>../lib/Sep_Algebra_Add</span></a><span>"</span></span><span> 
  </span><span class="quoted"><span>"</span><a href="Frame_Infer.html"><span>../lib/Frame_Infer</span></a><span>"</span></span><span>
  </span><span class="quoted"><span>"</span><a href="MMonad.html"><span>../lib/MM/MMonad</span></a><span>"</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  
  
</span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
</span><span class="keyword1"><span class="command"><span>declare</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj_commuteI|fact"><span>sep_disj_commuteI</span></a><span class="main"><span>[</span></span><span class="operator"><span>sym</span></span><span class="main"><span>]</span></span><span>  


</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_consistent_loc|locale"><span>acc_consistent_loc</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.acc_consistent_loc.acc_r_alloc|fact"><span class="entity_def" id="Sep_Generic_Wp.acc_consistent_loc.acc_r_alloc|thm"><span>acc_r_alloc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span>r</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span>a</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_def|fact"><span>Un_def</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block.exhaust_disc|fact"><span>block.exhaust_disc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_subset_iff|fact"><span>image_subset_iff</span></a><span> </span><span>acc_ref_not_freed</span><span> </span><span>acc_ref_not_fresh</span><span> </span><span>is_FRESH'_eq</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup_ge1|fact"><span>sup_ge1</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.acc_consistent_loc.acc_w_alloc|fact"><span class="entity_def" id="Sep_Generic_Wp.acc_consistent_loc.acc_w_alloc|thm"><span>acc_w_alloc</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span>w</span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span>a</span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> best</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_def|fact"><span>Un_def</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block.exhaust_disc|fact"><span>block.exhaust_disc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_subset_iff|fact"><span>image_subset_iff</span></a><span> </span><span>acc_ref_not_freed</span><span> </span><span>acc_ref_not_fresh</span><span> </span><span>is_FRESH'_eq</span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_sup_class.sup_ge1|fact"><span>sup_ge1</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Weakest Precondition›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.intro|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp_def|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.intro|thm"><span class="entity_def" id="Sep_Generic_Wp.generic_wp_def|thm"><span class="entity_def" id="Sep_Generic_Wp.generic_wp_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.generic_wp|locale"><span class="entity_def" id="Sep_Generic_Wp.generic_wp|const"><span>generic_wp</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'c</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'r</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc|type"><span>acc</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'s</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_comm_inf|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_comm_inf|thm"><span class="entity_def" id="offset_799..810">wp_comm_inf</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_class.inf|const"><span>inf</span></a><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>Q'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_comm_conj|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_comm_conj|thm"><span>wp_comm_conj</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pred_and|const"><span>and</span></a></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_799..810"><span>wp_comm_inf</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span> </span><span class="quoted"><span class="free"><span>Q</span></span></span><span> </span><span class="quoted"><span class="free"><span>Q'</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_fun_def|fact"><span>inf_fun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Boolean_Algebras.html#Boolean_Algebras.inf_bool_def|fact"><span>inf_bool_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_comm_conjI|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_comm_conjI|thm"><span>wp_comm_conjI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_799..810"><span>wp_comm_inf</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span> </span><span class="quoted"><span class="free"><span>Q</span></span></span><span> </span><span class="quoted"><span class="free"><span>Q'</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_fun_def|fact"><span>inf_fun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Boolean_Algebras.html#Boolean_Algebras.inf_bool_def|fact"><span>inf_bool_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span>


  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_mono|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_mono|thm"><span class="entity_def" id="offset_1201..1208">wp_mono</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Q</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>Q'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>mono_tags</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.order_class.antisym_conv|fact"><span>antisym_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.semilattice_inf_class.le_inf_iff|fact"><span>le_inf_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_refl|fact"><span>order_refl</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_799..810"><span>wp_comm_inf</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_1313..1318">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_monoI|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp.wp_monoI|thm"><span>wp_monoI</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wp</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_1313..1318"><span>assms</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_1201..1208"><span>wp_mono</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>Q</span></span></span><span> </span><span class="quoted"><span class="free"><span>Q'</span></span></span><span> </span><span class="quoted"><span class="free"><span>c</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.le_funI|fact"><span>le_funI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.predicate1D|fact"><span>predicate1D</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.predicate1I|fact"><span>predicate1I</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_1201..1208"><span>wp_mono</span></a><span class="main"><span>)</span></span><span>
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.wp|const"><span>NEMonad.wp</span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.wp_def|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_def|thm"><span class="entity_def" id="Sep_Generic_Wp.wp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sep_Generic_Wp.wp|const"><span>wp</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.wp|const"><span>NEMonad.wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.M.run|const"><span>run</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>r</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.pw_wp|fact"><span class="entity_def" id="Sep_Generic_Wp.pw_wp|thm"><span>pw_wp</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_init|attribute"><span class="operator"><span>pw_init</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="NEMonad.html#NEMonad.is_fail|const"><span>is_fail</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.M.run|const"><span>run</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.is_res|const"><span>is_res</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.M.run|const"><span>run</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>r</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp_def|fact"><span>wp_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_cons|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_cons|thm"><span>wp_cons</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_false|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_false|thm"><span>wp_false</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.wp_monoI|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_mono|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_comm_conjI|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_comm_conj|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_comm_inf|fact"><span class="entity_def" id="Sep_Generic_Wp.generic_wp_axioms|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_mono|thm"><span class="entity_def" id="Sep_Generic_Wp.wp_comm_inf|thm"><span class="entity_def" id="Sep_Generic_Wp.wp_comm_conj|thm"><span class="entity_def" id="Sep_Generic_Wp.wp_comm_conjI|thm"><span class="entity_def" id="Sep_Generic_Wp.wp_monoI|thm"><span class="entity_def" id="Sep_Generic_Wp.generic_wp_axioms|thm"><span>interpretation</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.generic_wp|locale"><span>generic_wp</span></a><span> </span><span class="quoted"><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a></span><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> 
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.inf_fun_def|fact"><span>inf_fun_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Boolean_Algebras.html#Boolean_Algebras.inf_bool_def|fact"><span>inf_bool_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹VCG Setup›</span></span></span><span>  
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_return|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_return|thm"><span>wp_return</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_fail|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_fail|thm"><span>wp_fail</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mfail|const"><span>Mfail</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_assert|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_assert|thm"><span>wp_assert</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Massert|const"><span>Massert</span></a><span> </span><span class="free"><span>Φ</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_bind|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_bind|thm"><span>wp_bind</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>m</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x'</span></span><span> </span><span class="bound"><span>i'</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x'</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>i'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_2388..2393">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_par|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_par|thm"><span>wp_par</span></span></span><span class="main"><span>:</span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> 
      </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_consistent|const"><span>acc_consistent</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_consistent|const"><span>acc_consistent</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.spar_feasible|const"><span>spar_feasible</span></a><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>;</span></span><span>
      </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> 
    </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_norace|const"><span>acc_norace</span></a><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>,</span></span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.combine_states|const"><span>combine_states</span></a><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mpar|const"><span>Mpar</span></a><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_2388..2393"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="MMonad.html#MMonad.res_run_consistentI|fact"><span>res_run_consistentI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="MMonad.html#MMonad.res_run_consistentI|fact"><span>res_run_consistentI</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_malloc|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_malloc|thm"><span>wp_malloc</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mmalloc|const"><span>Mmalloc</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_FRESH|const"><span>is_FRESH</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_a|const"><span>acc_a</span></a><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr_alloc|const"><span>addr_alloc</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_simp|attribute"><span class="operator"><span>pw_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MMonad.html#MMonad.malloc_def|fact"><span>malloc_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_free|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_free|thm"><span>wp_free</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mfree|const"><span>Mfree</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_f|const"><span>acc_f</span></a><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr_free|const"><span>addr_free</span></a><span> </span><span class="free"><span>b</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_simp|attribute"><span class="operator"><span>pw_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MMonad.html#MMonad.mfree_def|fact"><span>mfree_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_load|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_load|thm"><span>wp_load</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mload|const"><span>Mload</span></a><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_r|const"><span>acc_r</span></a><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_simp|attribute"><span class="operator"><span>pw_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MMonad.html#MMonad.mload_def|fact"><span>mload_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_mstore|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_mstore|thm"><span>wp_mstore</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mstore|const"><span>Mstore</span></a><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_w|const"><span>acc_w</span></a><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.put_addr|const"><span>put_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_simp|attribute"><span class="operator"><span>pw_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MMonad.html#MMonad.mstore_def|fact"><span>mstore_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.wp_valid_addr|fact"><span class="entity_def" id="Sep_Generic_Wp.wp_valid_addr|thm"><span>wp_valid_addr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mvalid_addr|const"><span>Mvalid_addr</span></a><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_r|const"><span>acc_r</span></a><span> </span><span class="free"><span>a</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_simp|attribute"><span class="operator"><span>pw_simp</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="MMonad.html#MMonad.mvalid_addr_def|fact"><span>mvalid_addr_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>
  
</span><span class="comment1"><span>(*lemma wp_valid_ptr_addr[vcg_normalize_simps]: "wp (Mvalid_ptr_addr a) Q s ⟷ is_valid_ptr_addr s a ∧ Q () (acc_e (addr.block a)) s"  
  supply [pw_simp] = mvalid_ptr_addr_def
  by pw
*)</span></span><span>    

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Connecting Separation Algebra and Concrete Memory›</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.intro|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.intro|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep|locale"><span class="entity_def" id="Sep_Generic_Wp.abs_sep|const"><span>abs_sep</span></span></span><span> </span><span class="main"><span>=</span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'v</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.memory|type"><span>memory</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span class="main"><span>::</span></span><span class="main"><span>{</span></span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.stronger_sep_algebra|class"><span>stronger_sep_algebra</span></a><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr|type"><span>addr</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>    </span><span class="comment1"><span>(* Addresses *)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_idx|type"><span>block_idx</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>  </span><span class="comment1"><span>(* Blocks *)</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr|type"><span>addr</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'v</span></span><span>"</span></span></span><span>   </span><span class="comment1"><span>(* Modeled values *)</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_idx|type"><span>block_idx</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.nat|type"><span>nat</span></a><span>"</span></span></span><span> </span><span class="comment1"><span>(* Modeled block sizes *)</span></span><span>

  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.disj_iff|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.disj_iff|thm"><span class="entity_def" id="offset_4186..4194">disj_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.zero_char|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.zero_char(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.zero_char(1)|thm"><span>zero_char</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.plus_char|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.plus_char|thm"><span class="entity_def" id="offset_4345..4354">plus_char</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.aget_add|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.aget_add|thm"><span class="entity_def" id="offset_4487..4495">aget_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.bget_add|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.bget_add|thm"><span class="entity_def" id="offset_4574..4582">bget_add</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.complete|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.complete|thm"><span class="entity_def" id="offset_4665..4673">complete</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span>
    </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="bound"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="bound"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="bound"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="bound"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_iff|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_iff|thm"><span class="entity_def" id="offset_4832..4837">α_iff</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>  
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.aget_add&apos;|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.aget_add&apos;|thm"><span class="entity_def" id="offset_5166..5175">aget_add'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4487..4495"><span>aget_add</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_add_commute|fact"><span>sep_add_commute</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj_commuteI|fact"><span>sep_disj_commuteI</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.bget_add&apos;|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.bget_add&apos;|thm"><span class="entity_def" id="offset_5313..5322">bget_add'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4574..4582"><span>bget_add</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_add_commute|fact"><span>sep_add_commute</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj_commuteI|fact"><span>sep_disj_commuteI</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.get_add|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.get_add(4)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.get_add(3)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.get_add(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.get_add(1)|thm"><span class="entity_def" id="offset_5460..5467">get_add</span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4487..4495"><span>aget_add</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5166..5175"><span>aget_add'</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4574..4582"><span>bget_add</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5313..5322"><span>bget_add'</span></a><span>  
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_simps|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_simps(4)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_simps(3)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_simps(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_simps(1)|thm"><span class="entity_def" id="offset_5523..5530">α_simps</span></span></span></span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4832..4837"><span>α_iff</span></a><span class="main"><span>[</span></span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffD1|fact"><span>iffD1</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.refl|fact"><span>refl</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_5745..5750">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_eqI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.\&lt;alpha&gt;_eqI|thm"><span class="entity_def" id="offset_5751..5756">α_eqI</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>a</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4832..4837"><span>α_iff</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5745..5750"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_6024..6029">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.complete&apos;|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.complete&apos;|thm"><span class="entity_def" id="offset_6030..6039">complete'</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4665..4673"><span>complete</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6024..6029"><span>assms</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
      </span><span class="entity_def" id="offset_6441..6443">DJ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span class="quoted"><span class="free"><span>s</span></span></span></span></span></span></span></span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6441..6443"><span>DJ</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>B</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4345..4354"><span>plus_char</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>B</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  
  
      
  </span><span class="comment1"><span>(* Partial Characterization *)</span></span><span>  
    
  </span><span class="comment1"><span>(* As sep-logic *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_def_raw|axiom"><span class="entity_def" id="offset_6886..6896">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar|const"><span class="entity_def" id="offset_6898..6903">pchar</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>as</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>f</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>as</span></span></span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="bound"><span>f</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>as</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>f</span></span><span>"</span></span></span><span>
  
  </span><span class="comment1"><span>(* Via concrete memory *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_alt|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_alt|thm"><span class="entity_def" id="offset_6976..6985">pchar_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="free"><span>as</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span>
    </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span>
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span class="main"><span>∈</span></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>aget</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>)</span></span><span>  
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>b</span></span><span class="main"><span>∈</span></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>bget</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>  
  </span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span>1</span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Int_Collect|fact"><span>Int_Collect</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_Int_eq|fact"><span>Un_Int_eq</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span class="main"><span>(</span></span></span><span>4</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4487..4495"><span>aget_add</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4574..4582"><span>bget_add</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.lattice_class.inf_sup_ord|fact"><span>inf_sup_ord</span></a><span class="main"><span class="main"><span>(</span></span></span><span>3</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6886..6896"><span>pchar_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4345..4354"><span>plus_char</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="entity_def" id="offset_7359..7360">2</span><span>
    
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6030..6039"><span>complete'</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>s</span></span></span><span>  </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span>
    </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span> 
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span>
      </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span>
      </span><span class="entity_def" id="offset_7652..7654">C1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_7359..7360"><span>2</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_7652..7654"><span>C1</span></a><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4832..4837"><span>α_iff</span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_7359..7360"><span>2</span></a><span>"</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span>›</span></span></span><span> 
        </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5166..5175"><span>aget_add'</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5313..5322"><span>bget_add'</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4345..4354"><span>plus_char</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_add_commute|fact"><span>sep_add_commute</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj_commuteI|fact"><span>sep_disj_commuteI</span></a><span class="main"><span>)</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6886..6896"><span>pchar_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
  

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8205..8210">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_completeI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_completeI|thm"><span class="entity_def" id="offset_8211..8226">pchar_completeI</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="free"><span>as</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5751..5756"><span>α_eqI</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8205..8210"><span>assms</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6976..6985"><span>pchar_alt</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8392..8397">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_add|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_add|thm"><span class="entity_def" id="offset_8398..8407">pchar_add</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8392..8397"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6976..6985"><span>pchar_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5460..5467"><span>get_add</span></a><span class="main"><span>)</span></span><span>
  
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_8601..8606">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_xfer|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.pchar_xfer|thm"><span class="entity_def" id="offset_8607..8617">pchar_xfer</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="free"><span>as</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span class="main"><span>∈</span></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>as</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><span class="free"><span>s'</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s'</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>∀</span></span><span class="bound"><span>b</span></span><span class="main"><span>∈</span></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>as</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><span class="free"><span>s'</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="free"><span>s'</span></span><span> </span><span class="bound"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="free"><span>s</span></span><span> </span><span class="bound"><span>b</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="free"><span>as</span></span><span> </span><span class="free"><span>s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8601..8606"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6976..6985"><span>pchar_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.addrs_djI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.addrs_djI(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.addrs_djI(1)|thm"><span class="entity_def" id="offset_8895..8904">addrs_djI</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.blocks_djI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.blocks_djI(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.blocks_djI(1)|thm"><span class="entity_def" id="offset_9029..9039">blocks_djI</span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>b</span></span><span>"</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Weakest Precondition With Access Report›</span></span></span><span>    
    
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Access report does not include blocks and addresses from frame›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes_def_raw|axiom"><span class="entity_def" id="offset_9289..9299">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes|const"><span class="entity_def" id="offset_9301..9313">acc_excludes</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> 
  </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.r|const"><span>acc.r</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.w|const"><span>acc.w</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.f|const"><span>acc.f</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes_simps|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes_simps(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.acc_excludes_simps(1)|thm"><span>acc_excludes_simps</span></span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="free"><span>asf</span></span><span>"</span></span></span><span>  
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>a</span></span><span class="main"><span>∈</span></span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>asf</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.r|const"><span>acc.r</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.w|const"><span>acc.w</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.f|const"><span>acc.f</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>b</span></span><span class="main"><span>∈</span></span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>asf</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc.f|const"><span>acc.f</span></a><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Weakest precondition for program, such that accesses are disjoint from frame›</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_def_raw|axiom"><span class="entity_def" id="offset_9783..9793">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa|const"><span class="entity_def" id="offset_9794..9797">wpa</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="NEMonad.html#NEMonad.pw_init|attribute"><span class="operator"><span>pw_init</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>wpa</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> 
    </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span> 
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="bound"><span>i</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span>
</span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_9889..9894">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_monoI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_monoI|thm"><span class="entity_def" id="offset_9895..9904">wpa_monoI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>A'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>A'</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9889..9894"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9783..9793"><span>wpa_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp_monoI|fact"><span>wp_monoI</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹VCG Setup›</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_false|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_false|thm"><span class="entity_def" id="offset_10162..10171">wpa_false</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span> </span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9783..9793"><span>wpa_def</span></a><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|fact"><span class="dynamic"><span class="dynamic"><span>vcg_normalize_simps</span></span></span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_spec|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_spec|thm"><span>wpa_spec</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mspec|const"><span>Mspec</span></a><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.bot_class.bot|const"><span>bot</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="free"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_return|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_return|thm"><span>wpa_return</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_fail|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_fail|thm"><span>wpa_fail</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Mfail|const"><span>Mfail</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_assert|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_assert|thm"><span>wpa_assert</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="MMonad.html#MMonad.Massert|const"><span>Massert</span></a><span> </span><span class="free"><span>Φ</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_bindI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_bindI|thm"><span>wpa_bindI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_decomp_rules|attribute"><span class="operator"><span>vcg_decomp_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>m</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9783..9793"><span>wpa_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|fact"><span class="dynamic"><span class="dynamic"><span>vcg_normalize_simps</span></span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp_cons|fact"><span>wp_cons</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.clarify|method"><span class="operator"><span>clarify</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp_cons|fact"><span>wp_cons</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_10869..10874">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_ifI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.wpa_ifI|thm"><span>wpa_ifI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_decomp_rules|attribute"><span class="operator"><span>vcg_decomp_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>e</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>if</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>then</span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.If|const"><span>else</span></a></span><span> </span><span class="free"><span>e</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_10869..10874"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
  
  
  
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Hoare Triples›</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_def_raw|axiom"><span class="entity_def" id="offset_11072..11082">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE|const"><span class="entity_def" id="offset_11084..11089">STATE</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>as</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>s</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>as</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span class="bound"><span class="entity"><span>asf</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>as</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_def_raw|axiom"><span class="entity_def" id="offset_11139..11149">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple|const"><span class="entity_def" id="offset_11151..11158">htriple</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>asf</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>s</span></span><span> 
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>c</span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>Q</span></span></span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11238..11243">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htripleI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htripleI|thm"><span class="entity_def" id="offset_11244..11252">htripleI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span class="main"><span class="main"><span>?</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>asf</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11238..11243"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11139..11149"><span>htriple_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11408..11413">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htripleD|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htripleD|thm"><span class="entity_def" id="offset_11414..11422">htripleD</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11408..11413"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11139..11149"><span>htriple_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Semantic Definition of Hoare-Triples›</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹
  The Hoare-triple is defined wrt. the semantics. 
  Unfolding all intermediate concepts, a Hoare-triple 
  implies a statement over the bare-bones semantics </span><span class="antiquoted"><span class="operator"><span><span class="hidden">\&lt;^</span><span class="control">const</span><span class="hidden">&gt;</span></span></span><span>‹</span><a class="entity_ref" href="MMonad.html#MMonad.M.run|const"><span>run</span></a><span>›</span></span><span>:
›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_11803..11808">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_semanticsD|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_semanticsD|thm"><span>htriple_semanticsD</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>asf</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="free"><span>μ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>as</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>asf</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span> </span><span class="free"><span>as</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹Given memory that can be split into part that satisfies precondition, and a frame›</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>obtains</span></span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="MMonad.html#MMonad.M.run|const"><span>run</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>μ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.neM.SPEC|const"><span>SPEC</span></a><span> </span><span class="free"><span>R</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹The program does not fail›</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>μ'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>x</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>μ'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="comment1"><span>― ‹And all possible results ...›</span></span><span>
      </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>as'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>as'</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="bound"><span>μ'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>as'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>asf</span></span><span> </span><span class="comment1"><span>― ‹Can be split into the original frame and another part›</span></span><span>
           </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="bound"><span>as'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="comment1"><span>― ‹that satisfies the postcondition›</span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11803..11808"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11139..11149"><span>htriple_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9783..9793"><span>wpa_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp_def|fact"><span>wp_def</span></a><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.wp_def|fact"><span>NEMonad.wp_def</span></a><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.is_res_def|fact"><span>is_res_def</span></a><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.neM.the_spec_def|fact"><span>the_spec_def</span></a><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.is_fail_def|fact"><span>is_fail_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>split</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.neM.splits|fact"><span>neM.splits</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="NEMonad.html#NEMonad.neM.exhaust|fact"><span>neM.exhaust</span></a><span class="main"><span>)</span></span><span>
  
  
  
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹VCG Setup›</span></span></span><span>
  

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_triv|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_triv|thm"><span>STATE_triv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_false|const"><span>sep_false</span></a><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_monoI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_monoI|thm"><span class="entity_def" id="offset_12578..12589">STATE_monoI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails|const"><span>⊢</span></a></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_def|fact"><span>entails_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_frame1|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_frame1|thm"><span class="entity_def" id="offset_12693..12705">STATE_frame1</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>asf'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="bound"><span>asf'</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span class="free"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>F</span></span><span> </span><span class="bound"><span>asf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>asf'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj_def|fact"><span>sep_conj_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_12883..12888">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_frame2|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_frame2|thm"><span class="entity_def" id="offset_12889..12901">STATE_frame2</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>asf'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>asf'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>asf</span></span><span>"</span></span></span><span>  
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>F</span></span><span> </span><span class="free"><span>asf'</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12883..12888"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj_def|fact"><span>sep_conj_def</span></a><span class="main"><span>)</span></span><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12883..12888"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_add_assoc|fact"><span>sep_add_assoc</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_add_commute|fact"><span>sep_add_commute</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.stronger_sep_algebra_class.sep_disj_add_eq|fact"><span>sep_disj_add_eq</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_triv|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_triv|thm"><span>htriple_triv</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span class="main"><span class="main"><span>!</span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_false|const"><span>sep_false</span></a><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11139..11149"><span>htriple_def</span></a><span class="main"><span>)</span></span><span>
      
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13286..13291">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.cons_rule|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.cons_rule|thm"><span class="entity_def" id="offset_13292..13301">cons_rule</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
    </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="skolem"><span>s</span></span><span>
    </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>with</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12578..12589"><span>STATE_monoI</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13286..13291"><span>assms</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_def|fact"><span>entails_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13546..13548">by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11414..11422"><span>htripleD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13286..13291"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13546..13548"><span>this</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9895..9904"><span>wpa_monoI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12578..12589"><span>STATE_monoI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13286..13291"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_def|fact"><span>entails_def</span></a><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
      
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  
      
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13828..13833">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.cons_post_rule|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.cons_post_rule|thm"><span class="entity_def" id="offset_13834..13848">cons_post_rule</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13292..13301"><span>cons_rule</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13828..13833"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_13982..13987">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.apply_htriple_rule|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.apply_htriple_rule|thm"><span class="entity_def" id="offset_13988..14006">apply_htriple_rule</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>s'</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12693..12705"><span>STATE_frame1</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13982..13987"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>asf'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
      </span><span class="entity_def" id="offset_14223..14224">D</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>asf'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="free"><span>asf</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>F</span></span><span> </span><span class="skolem"><span>asf'</span></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_14260..14261">S</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>asf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> 
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11414..11422"><span>htripleD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13982..13987"><span>assms</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_14260..14261"><span>S</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>asf'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>asf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>asf'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s'</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s'</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="skolem"><span>r</span></span><span> </span><span class="skolem"><span>s'</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12889..12901"><span>STATE_frame2</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>|</span></span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_14223..14224"><span>D</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>asf</span></span><span class="main"><span>)</span></span><span>  </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s'</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9895..9904"><span>wpa_monoI</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_14223..14224"><span>D</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13982..13987"><span>assms</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9895..9904"><span>wpa_monoI</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

        
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.frame_rule|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.frame_rule|thm"><span>frame_rule</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13988..14006"><span>apply_htriple_rule</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
</span><span class="keyword1"><span class="command"><span>subsubsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Disjoint Concurrency Rule›</span></span></span><span>    

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>    
</span><span class="comment1"><span>(* This rule is used to show disjointness in the lemma below.
  Just using blast there will be inefficient due to big terms.
*)</span></span><span>    
</span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_15082..15087">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.dj_subsetXI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.dj_subsetXI|thm"><span class="entity_def" id="offset_15088..15099">dj_subsetXI</span></span></span><span class="main"><span>:</span></span><span>    
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span class="free"><span>a<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span class="free"><span>a<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span class="free"><span>b<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span class="free"><span>b<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span class="free"><span>b<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span class="free"><span>b<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span class="free"><span>b<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span class="free"><span>b<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15082..15087"><span>assms</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>  
  
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.ht_par|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.ht_par|thm"><span>ht_par</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_15327..15330">HT1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_15364..15367">HT2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>P<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span class="free"><span>P<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="MMonad.html#MMonad.Mpar|const"><span>∥<span class="hidden">⇩</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>,</span></span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="skolem"><span>asf</span></span><span>
  
  </span><span class="comment1"><span>― ‹Precondition›</span></span><span>
  </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><span class="free"><span>P<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
        </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_15637..15644">S_SPLIT</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span>PRECOND</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj_def|fact"><span>sep_conj_def</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_add_disjD|fact"><span>sep_add_disjD</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_add_disjD|fact"><span>sep_add_disjD</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>   

  </span><span class="comment1"><span>― ‹Addresses breakdown on concrete level›</span></span><span>    
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16044..16052">CA_SPLIT</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>  
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_16113..16121">CB_SPLIT</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15637..15644"><span>S_SPLIT</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16234..16242">ADDRS_DJ</span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_16360..16369">BLOCKS_DJ</span><span class="main"><span>:</span></span><span>   
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
          
  </span><span class="comment1"><span>― ‹Re-shuffle to get frames›</span></span><span>
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16567..16569">S1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>P<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj_def|fact"><span>sep_conj_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15637..15644"><span>S_SPLIT</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_16719..16721">S2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>P<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj_def|fact"><span>sep_conj_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15637..15644"><span>S_SPLIT</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>!</span></span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>

  </span><span class="comment1"><span>― ‹Executions›</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_16886..16890">WPA1</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11414..11422"><span>htripleD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15327..15330"><span>HT1</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16567..16569"><span>S1</span></a><span class="main"><span>]</span></span><span>
  </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_16920..16924">WPA2</span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11414..11422"><span>htripleD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15364..15367"><span>HT2</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16719..16721"><span>S2</span></a><span class="main"><span>]</span></span><span>
  
  </span><span class="comment1"><span>― ‹Break down </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>wpa›</span></span></span><span>›</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>m<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="keyword1"><a class="entity_ref" href="MMonad.html#MMonad.Mpar|const"><span>∥<span class="hidden">⇩</span><sub>M</sub></span></a></span><span> </span><span class="free"><span>m<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="bound"><span>r<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16886..16890"><span>WPA1</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16920..16924"><span>WPA2</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9783..9793"><span>wpa_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp_par|fact"><span>wp_par</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>thin_tac</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.wp|const"><span>wp</span></a><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>goal_cases</span></span><span>
    </span><span class="keyword3"><span class="command"><span>case</span></span></span><span> </span><span class="main"><span>(</span></span><span class="entity_def" id="offset_17205..17206">1</span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span>

    </span><span class="comment1"><span>― ‹Make assumptions explicit›</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.feasible_parallel_execution|locale"><span>feasible_parallel_execution</span></a><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17205..17206"><span>1</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_17361..17363">by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>

    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>STATE1</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span>STATE2</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_17489..17495">IEXCL1</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="entity_def" id="offset_17539..17545">IEXCL2</span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span>›</span></span></span><span>

    
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17489..17495"><span>IEXCL1</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17539..17545"><span>IEXCL2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17614..17620">G_EXCL</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9301..9313"><span>acc_excludes</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        
      
      
    </span><span class="comment1"><span>― ‹Prove race freedom›</span></span><span>
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17759..17761">G1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_norace|const"><span>acc_norace</span></a><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    
      </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹From consistency, we know that interference only talks about valid addresses.
        Note that the allocated addresses are on over-approximation here
      ›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_17983..17986">SS1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_approx</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.rw_valid_or_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17489..17495"><span>IEXCL1</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16234..16242"><span>ADDRS_DJ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.f_valid_or_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18237..18240">SS2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_approx</span></a><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.rw_valid_or_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17539..17545"><span>IEXCL2</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16234..16242"><span>ADDRS_DJ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.f_valid_or_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
      </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The allocations are disjoint by feasibility assumption›</span></span></span><span>  
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_addrs_disj</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_disj</span></a><span>
      
      </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The allocations are disjoint from the original addresses by consistency›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.a_dj_valid</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.a_dj_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.a_dj_valid</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.a_dj_alloc</span></a><span>
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_18755..18762">ORIG_DJ</span><span class="main"><span>:</span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_approx</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_approx</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16234..16242"><span>ADDRS_DJ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span>
      
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19024..19026">G1</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15088..15099"><span>dj_subsetXI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_18755..18762"><span>ORIG_DJ</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_18755..18762"><span>ORIG_DJ</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_addrs_approx_disj</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19236..19238">G2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_15088..15099"><span>dj_subsetXI</span></a><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_18755..18762"><span>ORIG_DJ</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_18755..18762"><span>ORIG_DJ</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fact</span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.rw_valid_or_alloc</span></a><span>
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17489..17495"><span>IEXCL1</span></a><span>  
        
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19470..19472">G3</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17539..17545"><span>IEXCL2</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17983..17986"><span>SS1</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_free_dj</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  

      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_19869..19871">G4</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.uminus_class.uminus|const"><span>-</span></a></span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17489..17495"><span>IEXCL1</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>r<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_18237..18240"><span>SS2</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>free_alloc_dj</span></a><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  
        
      </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_norace|const"><span>acc_norace</span></a><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.acc_norace_def|fact"><span>acc_norace_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Let_def|fact"><span>Let_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_19024..19026"><span>G1</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_19236..19238"><span>G2</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_19470..19472"><span>G3</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_19869..19871"><span>G4</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>
        
        
    </span><span class="comment1"><span>― ‹Now we have a valid parallel execution›</span></span><span>  
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.valid_parallel_execution|locale"><span>valid_parallel_execution</span></a><span> </span><span class="quoted"><span class="skolem"><span>s</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>i<span class="hidden">⇩</span><sub>1</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="quoted"><span class="skolem"><span>i<span class="hidden">⇩</span><sub>2</sub></span></span></span><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_20562..20564">by</span></span></span><span> </span><span class="operator"><span>fact</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_20585..20587">G2</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>∧*</span></a></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    
      </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword3"><span class="command"><span>obtain</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span></span><span> </span><span class="skolem"><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> 
            </span><span class="entity_def" id="offset_20773..20780">A12_FMT</span><span class="main"><span>:</span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_20868..20876">ASx'_DJS</span><span class="main"><span>:</span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><span class="main"><span>)</span></span><span>
    
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20868..20876"><span>ASx'_DJS</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>symmetric</span></span><span class="main"><span>,</span></span><span> </span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>  
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>  
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span>  
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>  
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        
      </span><span class="comment1"><span>― ‹Addresses breakdown on concrete level›</span></span><span>    
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21319..21328">CA'_SPLIT</span><span class="main"><span>:</span></span><span> 
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>  
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>  
        </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="offset_21471..21480">CB'_SPLIT</span><span class="main"><span>:</span></span><span> 
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
          </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20773..20780"><span>A12_FMT</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>flip</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_5523..5530"><span>α_simps</span></a><span class="main"><span>)</span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21685..21694">ADDRS'_DJ</span><span class="main"><span>:</span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_21912..21922">BLOCKS'_DJ</span><span class="main"><span>:</span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
        
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22148..22155">AS1'_EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21685..21694"><span>ADDRS'_DJ</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21685..21694"><span>ADDRS'_DJ</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.valid_s'_alt'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16234..16242"><span>ADDRS_DJ</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16234..16242"><span>ADDRS_DJ</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.DiffD2|fact"><span>DiffD2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnE|fact"><span>UnE</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.valid_s'_alt</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Lattices.html#Lattices.lattice_class.inf_sup_aci|fact"><span>inf_sup_aci</span></a><span class="main"><span class="main"><span>(</span></span></span><span>5</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_22647..22654">AS2'_EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21685..21694"><span>ADDRS'_DJ</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21685..21694"><span>ADDRS'_DJ</span></a><span class="main"><span>(</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8895..8904"><span>addrs_djI</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.force|method"><span class="operator"><span>force</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23119..23125">CB1_EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span>"</span></span></span><span>  
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_ALLOC'_eq</span></a><span class="main"><span>)</span></span><span>

      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23219..23225">CB2_EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span>"</span></span></span><span>  
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_ALLOC'_eq</span></a><span class="main"><span>)</span></span><span>
        
                
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23344..23350">B1'_EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21912..21922"><span>BLOCKS'_DJ</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21912..21922"><span>BLOCKS'_DJ</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_FREED'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.a_dj_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_23779..23785">B2'_EQ</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21912..21922"><span>BLOCKS'_DJ</span></a><span class="main"><span>(</span></span><span>3</span><span class="main"><span>,</span></span><span>4</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_FREED'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.a_dj_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

                
      </span><span class="comment1"><span>― ‹The new abstract state covers exactly the addresses of the concrete state›</span></span><span>  
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_24289..24297">COVERAGE</span><span class="main"><span>:</span></span><span> 
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
        </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
          
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20562..20564"><span>valid_addr''</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.valid_s'_alt'</span></a><span>  
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.valid_s'_alt'</span></a><span>  
        </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs</span></a><span>
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs</span></a><span class="main"><span>)</span></span><span> 
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs</span></a><span class="main"><span>)</span></span><span>
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.valid_s'_alt'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_freed_addrs_disj</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.freed_addrs_def</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.freed_addrs_def</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_freed_addrs_disj</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.valid_s'_alt'</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22148..22155"><span>AS1'_EQ</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>   
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22647..22654"><span>AS2'_EQ</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
      
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>is_ALLOC'_eq</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_ALLOC'_eq</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_ALLOC'_eq</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23119..23125"><span>CB1_EQ</span></a><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23219..23225"><span>CB2_EQ</span></a><span>
        </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><span class="skolem"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16113..16121"><span>CB_SPLIT</span></a><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span>
          </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>f<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_ALLOC'_eq</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>free_alloc_dj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23119..23125"><span>CB1_EQ</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23219..23225"><span>CB2_EQ</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_free_dj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23219..23225"><span>CB2_EQ</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23344..23350"><span>B1'_EQ</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>also</span></span></span><span> </span><span class="keyword1"><span class="command"><span>note</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23779..23785"><span>B2'_EQ</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span>
        </span><span class="keyword1"><span class="command"><span>finally</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.cblocks|const"><span>cblocks</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  
      
      </span><span class="comment1"><span>― ‹The abstract states from both sides are disjoint›</span></span><span>  
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span>DISJOINT</span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>"</span></span></span><span> 
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_4186..4194"><span>disj_iff</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16234..16242"><span>ADDRS_DJ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16360..16369"><span>BLOCKS_DJ</span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22148..22155"><span>AS1'_EQ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22647..22654"><span>AS2'_EQ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23344..23350"><span>B1'_EQ</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23779..23785"><span>B2'_EQ</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_def</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_addrs_disj</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23779..23785"><span>B2'_EQ</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Diff_iff|fact"><span>Diff_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.IntD1|fact"><span>IntD1</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_Int_eq|fact"><span>Un_Int_eq</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9029..9039"><span>blocks_djI</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_23344..23350"><span>B1'_EQ</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.DiffI|fact"><span>DiffI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_upper2|fact"><span>Un_upper2</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9029..9039"><span>blocks_djI</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_disj</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>


      </span><span class="comment1"><span>― ‹The new abstract states characterize their concrete counterparts.
        In the rest of this proof, we will transfer these to </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>s'›</span></span></span><span>, using
        the fact that </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>s'›</span></span></span><span> is equal to </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>s<span class="hidden">⇩</span><sub>1</sub>›</span></span></span><span>/</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>s<span class="hidden">⇩</span><sub>2</sub>›</span></span></span><span>/</span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>asf›</span></span></span><span> on the relevant addresses
       ›</span></span><span>  
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span>  
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6886..6896"><span>pchar_def</span></a><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20773..20780"><span>A12_FMT</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> 
          </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span>
        </span><span class="main"><span>)</span></span><span>
        
        
                
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8607..8617"><span>pchar_xfer</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ballI|fact"><span>ballI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17539..17545"><span>IEXCL2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22148..22155"><span>AS1'_EQ</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_disj</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_approx</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.valid_s_not_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.rw_valid_or_alloc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|fact"><span>subset_eq</span></a><span class="main"><span>)</span></span><span>
        
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22148..22155"><span>AS1'_EQ</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.a_dj_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_disj</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.allocated_addrs_approx</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
          
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> 
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_28581..28582">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span>"</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_24289..24297"><span>COVERAGE</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_28581..28582"><span>A</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>get_addr_combine</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b</span></span><span>
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_28916..28917">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span>"</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_24289..24297"><span>COVERAGE</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="comment1"><span>(* TODO: That's a generic lemma from valid-combination! *)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_28916..28917"><span>A</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnCI|fact"><span>UnCI</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>block_size_combine</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_FREED'_eq</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block.disc|fact"><span>block.disc</span></a><span class="main"><span class="main"><span>(</span></span></span><span>2</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.combine_states_def|fact"><span>combine_states_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>is_FREED'_eq</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6976..6985"><span>pchar_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.subset_Collect_conv|fact"><span>subset_Collect_conv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    

      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8607..8617"><span>pchar_xfer</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ballI|fact"><span>ballI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17539..17545"><span>IEXCL2</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.a_dj_valid</span></a><span>
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
      
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span>
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_29715..29716">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.caddrs|const"><span>caddrs</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.union|const"><span>∪</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span>›</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_29715..29716"><span>A</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>2</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>2</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>get_addr_combine</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b</span></span><span>
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_30056..30057">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_24289..24297"><span>COVERAGE</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="comment1"><span>(* TODO: That's a generic lemma from valid-combination! *)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_30056..30057"><span>A</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnI2|fact"><span>UnI2</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_upper2|fact"><span>Un_upper2</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>block_size_combine</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.is_FREED'_eq</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.combine_states_def|fact"><span>combine_states_def</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC_conv|fact"><span>is_ALLOC_conv</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>is_FREED'_eq</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.subset_Collect_conv|fact"><span>subset_Collect_conv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
        
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8607..8617"><span>pchar_xfer</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.ballI|fact"><span>ballI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
      
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17489..17495"><span>IEXCL1</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>  
          </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9289..9299"><span>acc_excludes_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword1"><span class="command"><span>then</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22647..22654"><span>AS2'_EQ</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>verit</span><span class="main"><span class="main"><span>,</span></span></span><span> ccfv_threshold</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Un_iff|fact"><span>Un_iff</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.alloc_blocks_def|fact"><span>alloc_blocks_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_disj</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.acc_w_alloc</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.rw_valid_s</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_approx</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.acc_a_alloc</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.disjoint_iff|fact"><span>disjoint_iff</span></a><span> </span><a class="entity_ref" href="MMonad.html#MMonad.fresh_freed_not_valid|fact"><span>fresh_freed_not_valid</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image_subset_iff|fact"><span>image_subset_iff</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.mem_Collect_eq|fact"><span>mem_Collect_eq</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_iff|fact"><span>subset_iff</span></a><span class="main"><span>)</span></span><span>
        
        </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_22647..22654"><span>AS2'_EQ</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_16044..16052"><span>CA_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.a_dj_valid</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>alloc_disj</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c2.allocated_addrs_approx</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>a</span></span><span> 
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_31293..31294">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>"</span></span></span><span>
        
        </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_31293..31294"><span>A</span></a><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_valid_addr|const"><span>is_valid_addr</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span>  </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21319..21328"><span>CA'_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_24289..24297"><span>COVERAGE</span></a><span class="main"><span>(</span></span><span>1</span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.get_addr|const"><span>get_addr</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>a</span></span><span>"</span></span></span><span> 
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_31293..31294"><span>A</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>w<span class="hidden">⇩</span><sub>1</sub></span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.addr.block|const"><span>addr.block</span></a><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.image|const"><span>`</span></a></span><span class="free"><span>addrs</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.inter|const"><span>∩</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>a<span class="hidden">⇩</span><sub>1</sub></span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.empty|const"><span>{}</span></a></span><span>›</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>get_addr_combine</span></a><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20562..20564"><span>valid_addr'_outside_wa_eq_orig</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>a</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20562..20564"><span>valid_addr'_outside_wa_eq_orig</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="skolem"><span class="quoted"><span class="skolem"><span>a</span></span></span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span class="keyword3"><span>?</span></span></span><span class="main"><span>)</span></span><span>
          </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>next</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>b</span></span><span>
        </span><span class="keyword3"><span class="command"><span>assume</span></span></span><span> </span><span class="entity_def" id="offset_31798..31799">A</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>blocks</span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>"</span></span></span><span>
        </span><span class="keyword3"><span class="command"><span>thus</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_21471..21480"><span>CB'_SPLIT</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_24289..24297"><span>COVERAGE</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
        </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.block_size|const"><span>block_size</span></a><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>b</span></span><span>"</span></span></span><span>
          </span><span class="comment1"><span>(* TODO: That's a generic lemma from valid-combination! *)</span></span><span>
          </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><span class="main"><span class="main"><span>(</span></span></span><span>no_types</span><span class="main"><span class="main"><span>,</span></span></span><span> lifting</span><span class="main"><span class="main"><span>)</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_31798..31799"><span>A</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.UnCI|fact"><span>UnCI</span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC|const"><span>is_ALLOC</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="skolem"><span>b</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="skolem"><span>s<span class="hidden">⇩</span><sub>2</sub></span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>block_size_combine</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>c1.is_FREED'_eq</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.combine_states_def|fact"><span>combine_states_def</span></a><span> </span><a class="entity_ref" href="Generic_Memory.html#Generic_Memory.is_ALLOC_conv|fact"><span>is_ALLOC_conv</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>is_FREED'_eq</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>par_blocks_same_length</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6976..6985"><span>pchar_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.subset_Collect_conv|fact"><span>subset_Collect_conv</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
      
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_6898..6903"><span>pchar</span></a><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8398..8407"><span>pchar_add</span></a><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_32359..32361">by</span></span></span><span> </span><span class="operator"><span>simp_all</span></span><span>
        
      </span><span class="comment1"><span>― ‹As these addresses cover all of </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>s'›</span></span></span><span>, we can write the abstraction of </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>s'›</span></span></span><span> accordingly›</span></span><span>
      </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_8211..8226"><span>pchar_completeI</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_32359..32361"><span>this</span></a><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_24289..24297"><span>COVERAGE</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>α</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17361..17363"><span>s'</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>asf</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      
      </span><span class="comment1"><span>― ‹From the correctness of the parallel strands, and disjointness of </span><span class="antiquoted"><span class="raw_text"><span class="operator"><span>‹</span></span><span>as<span class="hidden">⇩</span><sub>1</sub>' ## as<span class="hidden">⇩</span><sub>2</sub>'›</span></span></span><span>,
        we get that both postconditions hold simultaneously
      ›</span></span><span>
      </span><span class="keyword1"><span class="command"><span>moreover</span></span></span><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Meson/meson_tactic.ML.html#Meson.meson|method"><span class="operator"><span>meson</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Q<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="free"><span>Q<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>x<span class="hidden">⇩</span><sub>2</sub></span></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>›</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>‹</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>›</span></span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conjI|fact"><span>sep_conjI</span></a><span class="main"><span>)</span></span><span>
      
      </span><span class="keyword1"><span class="command"><span>ultimately</span></span></span><span> </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
        </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>-</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x </span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>1</sub>'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="skolem"><span>as<span class="hidden">⇩</span><sub>2</sub>'</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span class="main"><span>)</span></span><span>
        </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
    
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?case</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17759..17761"><span>G1</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_20585..20587"><span>G2</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_17614..17620"><span>G_EXCL</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span> 
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>        

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
   

  
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Realizable abstract Predicates›</span></span></span><span>    
  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Auxiliary concept, stating that there is actually a concrete memory on 
    part of which an assertion can be satisfied. This follows from the precondition of a Hoare-triple.
  ›</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_def_raw|axiom"><span class="entity_def" id="offset_33357..33367">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable|const"><span class="entity_def" id="offset_33369..33379">realizable</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>s</span></span><span> </span><span class="bound"><span>as</span></span><span> </span><span class="bound"><span>asf</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="bound"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>α</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="bound"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>as</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pre_sep_algebra_class.sep_disj|const"><span>##</span></a></span><span> </span><span class="bound"><span>asf</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_conjD|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_conjD|thm"><span>realizable_conjD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33357..33367"><span>realizable_def</span></a><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj_def|fact"><span>sep_conj_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_conj_c|fact"><span>sep_conj_c</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conjI|fact"><span>conjI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> s x asf y
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>s</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>asf</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>y</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> s x asf y
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="skolem"><span>s</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>y</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.exI|fact"><span>exI</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> x</span><span class="main"><span class="main"><span class="main"><span>=</span></span></span></span><span class="quoted"><span class="quoted"><span>"</span><span class="skolem"><span>asf</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.plus_class.plus|const"><span>+</span></a></span><span class="skolem"><span>x</span></span><span>"</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
      
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_emp|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_emp|thm"><span>realizable_emp</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_empty|const"><span>□</span></a></span><span>"</span></span></span><span>    
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33357..33367"><span>realizable_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
          
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_pure|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_pure|thm"><span>realizable_pure</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="free"><span>φ</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33357..33367"><span>realizable_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_extract_pure|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.realizable_extract_pure|thm"><span>realizable_extract_pure</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33357..33367"><span>realizable_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_false|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_false|thm"><span class="entity_def" id="offset_34378..34391">htriple_false</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11139..11149"><span>htriple_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_10162..10171"><span>wpa_false</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33357..33367"><span>realizable_def</span></a><span class="main"><span>)</span></span><span>
    
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_34530..34535">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_realizable_preI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_realizable_preI|thm"><span>htriple_realizable_preI</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_34530..34535"><span>assms</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13834..13848"><span>cons_post_rule</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_34378..34391"><span>htriple_false</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.fastforce|method"><span class="operator"><span>fastforce</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_realizableI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_realizableI|thm"><span>STATE_realizableI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33369..33379"><span>realizable</span></a><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_33357..33367"><span>realizable_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
    
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹VCG Setup›</span></span></span><span>    
    
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_assn_cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_assn_cong|thm"><span>STATE_assn_cong</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.fri_extract_congs|attribute"><span class="operator"><span>fri_extract_congs</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span class="main"><span>≡</span></span><span class="free"><span>P'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>s</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>f</span></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_extract|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_extract(5)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_extract(4)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_extract(3)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_extract(2)|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.STATE_extract(1)|thm"><span>STATE_extract</span></span></span></span></span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="free"><span>Φ</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_empty|const"><span>□</span></a></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.pred_lift|const"><span>↑</span></a></span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>Φ</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pred_ex|const"><span>EXS</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.pred_ex|const"><span>.</span></a></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>∃</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Ex|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>P</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.False|const"><span>False</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span class="main"><span>)</span></span><span>
 

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_def_raw|axiom"><span class="entity_def" id="offset_35252..35262">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND.cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND.cong|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND|const"><span class="entity_def" id="offset_35263..35271">POSTCOND</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|attribute"><span class="operator"><span>vcg_tag_defs</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>POSTCOND</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCONDI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCONDI|thm"><span class="entity_def" id="offset_35322..35331">POSTCONDI</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35263..35271"><span>POSTCOND</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35252..35262"><span>POSTCOND_def</span></a><span class="main"><span>)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_cong|thm"><span>POSTCOND_cong</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_congs|attribute"><span class="operator"><span>vcg_normalize_congs</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35263..35271"><span>POSTCOND</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35263..35271"><span>POSTCOND</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>..</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_triv_simps|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.POSTCOND_triv_simps|thm"><span>POSTCOND_triv_simps</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_normalize_simps|attribute"><span class="operator"><span>vcg_normalize_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="comment1"><span>(* "POSTCOND A asf sep_true h" *)</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35263..35271"><span>POSTCOND</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_false|const"><span>sep_false</span></a><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35252..35262"><span>POSTCOND_def</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_35645..35650">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.start_entailsE|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.start_entailsE|thm"><span class="entity_def" id="offset_35651..35665">start_entailsE</span></span></span><span class="main"><span>:</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.ENTAILS|const"><span>ENTAILS</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>P'</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35645..35650"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.ENTAILS_def|fact"><span>ENTAILS_def</span></a><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_def|fact"><span>entails_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>declaration</span></span></span><span> </span><span class="quoted"><span>‹</span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>phi</span></span><span> </span><span class="main"><span>=&gt;</span></span><span>
   </span><span class="main"><span>(</span></span><span class="entity"><span>Basic_VCG.add_xformer</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>Morphism.thm</span><span> </span><span class="entity"><span>phi</span></span><span class="main"><span>)</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35322..35331"><span>POSTCONDI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>binding</span></span><span> postcond_xformer</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
    </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span>eresolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>Morphism.thm</span><span> </span><span class="entity"><span>phi</span></span><span class="main"><span>)</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35651..35665"><span>start_entailsE</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
›</span></span><span>

</span><span class="keyword1"><span class="command"><span>named_theorems</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcg_intros|attribute"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcg_intros|fact"><span>htriple_vcg_intros</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>named_theorems</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcg_intro_congs|attribute"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcg_intro_congs|fact"><span>htriple_vcg_intro_congs</span></span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLE_def|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLE_def|thm"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLE_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|attribute"><span class="operator"><span>vcg_tag_defs</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLE|const"><span>DECOMP_HTRIPLE</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>φ</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>φ</span></span></span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLEI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLEI|thm"><span class="entity_def" id="offset_36150..36165">DECOMP_HTRIPLEI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLE|const"><span>DECOMP_HTRIPLE</span></a><span> </span><span class="free"><span>φ</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|fact"><span class="dynamic"><span class="dynamic"><span>vcg_tag_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcg_frame_erule|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcg_frame_erule|thm"><span>htriple_vcg_frame_erule</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_frame_erules|attribute"><span class="operator"><span>vcg_frame_erules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_36285..36286">S</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_36317..36318">F</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.PRECOND|const"><span>PRECOND</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.FRAME|const"><span>FRAME</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_36357..36359">HT</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>  
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="offset_36391..36392">P</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span> </span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.PRECOND|const"><span>PRECOND</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.EXTRACT|const"><span>EXTRACT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>from</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36285..36286"><span>S</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36317..36318"><span>F</span></a><span> </span><span class="keyword1"><span class="command"><span>have</span></span></span><span> </span><span class="entity_def" id="offset_36509..36511">S'</span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="free"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="Separation_Algebra.Separation_Algebra.html#Separation_Algebra.sep_algebra_class.sep_conj|const"><span>**</span></a></span><span class="free"><span>F</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>s</span></span><span>"</span></span></span><span>
      </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.PRECOND_def|fact"><span>PRECOND_def</span></a><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.FRAME_def|fact"><span>FRAME_def</span></a><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_12578..12589"><span>STATE_monoI</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13988..14006"><span>apply_htriple_rule</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36509..36511"><span>S'</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36357..36359"><span>HT</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36391..36392"><span>P</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|fact"><span class="dynamic"><span class="dynamic"><span>vcg_tag_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
      
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>    
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36732..36737">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcgI&apos;|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcgI&apos;|thm"><span>htriple_vcgI'</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>asf</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35263..35271"><span>POSTCOND</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11244..11252"><span>htripleI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36732..36737"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|fact"><span class="dynamic"><span class="dynamic"><span>vcg_tag_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_36927..36932">lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcgI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_vcgI|thm"><span>htriple_vcgI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.htriple_vcg_intros|attribute"><span class="operator"><span>htriple_vcg_intros</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⋀</span></span><span class="bound"><span>asf</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11084..11089"><span>STATE</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>s</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.EXTRACT|const"><span>EXTRACT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_9794..9797"><span>wpa</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.EXTRACT|const"><span>EXTRACT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_35263..35271"><span>POSTCOND</span></a><span> </span><span class="bound"><span>asf</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>s</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11244..11252"><span>htripleI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36927..36932"><span>assms</span></a><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|fact"><span class="dynamic"><span class="dynamic"><span>vcg_tag_defs</span></span></span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11072..11082"><span>STATE_def</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

      
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_decompI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_decompI|thm"><span>htriple_decompI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_decomp_rules|attribute"><span class="operator"><span>vcg_decomp_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.DECOMP_HTRIPLE|const"><span>DECOMP_HTRIPLE</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Basic_VCG.html#Basic_VCG.vcg_tag_defs|fact"><span class="dynamic"><span class="dynamic"><span>vcg_tag_defs</span></span></span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_assn_cong|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_assn_cong|thm"><span>htriple_assn_cong</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="Sep_Generic_Wp.html#Sep_Generic_Wp.abs_sep.htriple_vcg_intro_congs|attribute"><span class="operator"><span>htriple_vcg_intro_congs</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span class="main"><span>≡</span></span><span class="free"><span>P'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>≡</span></span><span class="free"><span>Q'</span></span><span> </span><span class="main"><span>⟹</span></span><span>  </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_ent_pre|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_ent_pre|thm"><span class="entity_def" id="offset_37434..37449">htriple_ent_pre</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>P</span></span><span class="main"><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails|const"><span>⊢</span></a></span><span class="free"><span>P'</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P'</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_def|fact"><span>entails_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13292..13301"><span>cons_rule</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_ent_post|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_ent_post|thm"><span>htriple_ent_post</span></span></span><span class="main"><span>:</span></span><span>
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>⋀</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails|const"><span>⊢</span></a></span><span> </span><span class="free"><span>Q'</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q'</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_def|fact"><span>entails_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_13292..13301"><span>cons_rule</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
   
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_pure_preI|fact"><span class="entity_def" id="Sep_Generic_Wp.abs_sep.htriple_pure_preI|thm"><span>htriple_pure_preI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="Sep_Algebra_Add.html#Sep_Algebra_Add.pure_part|const"><span>pure_part</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_11151..11158"><span>htriple</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="free"><span>Q</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Frame_Infer.html#Frame_Infer.entails_pureI|fact"><span>entails_pureI</span></a><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_37434..37449"><span>htriple_ent_pre</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  
  </span><span class="keyword1"><span class="command"><span>declaration</span></span></span><span> </span><span class="quoted"><span>‹
    </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>phi</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Basic_VCG.add_xformer</span></span><span> </span><span class="main"><span>(</span></span><span>map</span><span> </span><span class="main"><span>(</span></span><span>Morphism.thm</span><span> </span><span class="entity"><span>phi</span></span><span class="main"><span>)</span></span><span> </span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>thms</span></span><span> </span><a class="entity_ref" href="Sep_Generic_Wp.html#offset_36150..36165"><span>DECOMP_HTRIPLEI</span></a><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span class="antiquoted"><span class="entity"><span class="antiquote"><span>@{</span></span><span class="operator"><span>binding</span></span><span> decomp_htriple_xformer</span><span class="antiquote"><span>}</span></span></span></span><span class="main"><span>,</span></span><span>
      </span><span class="keyword1"><span class="keyword"><span>fn</span></span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>=&gt;</span></span><span> 
        </span><span class="main"><span>(</span></span><span class="entity"><span>full_simp_tac</span></span><span> </span><span class="main"><span>(</span></span><span>put_simpset</span><span> </span><span class="entity"><span>HOL_basic_ss</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> 
          </span><span>addsimps</span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Named_Theorems.get</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>named_theorems</span></span><span> vcg_tag_defs</span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>
          </span><span>|&gt;</span><span> </span><span>fold</span><span> </span><span class="entity"><span>Simplifier.add_cong</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Named_Theorems.get</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>named_theorems</span></span><span> htriple_vcg_intro_congs</span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>
        </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
        </span><span>THEN'</span><span> </span><span>resolve_tac</span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="main"><span>(</span></span><span class="entity"><span>Named_Theorems.get</span></span><span> </span><span class="entity"><span>ctxt</span></span><span> </span><span class="antiquoted"><span class="antiquote"><span>@{</span></span><span class="operator"><span>named_theorems</span></span><span> htriple_vcg_intros</span><span class="antiquote"><span>}</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  ›</span></span><span>
  
  
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>