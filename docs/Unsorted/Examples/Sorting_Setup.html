<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><link rel="stylesheet" type="text/css" href="isabelle.css"/>
<title>Theory Sorting_Setup</title>
</head>


<body>
<div class="head">
<h1>Theory Sorting_Setup</h1>
</div>

<pre class="source"><span class="keyword1"><span class="command"><span>theory</span></span></span><span> </span><a href="Sorting_Setup.html"><span>Sorting_Setup</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>imports</span></span></span><span> </span><span class="quoted"><span>"</span><a href="../Isabelle_LLVM/IICF.html"><span>Isabelle_LLVM.IICF</span></a><span>"</span></span><span> </span><span class="quoted"><span>"</span><a href="../Isabelle_LLVM/Proto_IICF_EOArray.html"><span>Isabelle_LLVM.Proto_IICF_EOArray</span></a><span>"</span></span><span> </span><a href="IICF_DS_Array_Idxs.html"><span>IICF_DS_Array_Idxs</span></a><span> </span><a href="Sorting_Misc.html"><span>Sorting_Misc</span></a><span> 
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>hide_const</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>open</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.slice|const"><span>Word.slice</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_DS_Array.html#LLVM_DS_Array.array_assn|const"><span>LLVM_DS_Array.array_assn</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_DS_NArray.html#LLVM_DS_NArray.array_slice_assn|const"><span>LLVM_DS_NArray.array_slice_assn</span></a><span>

  
</span><span class="comment1"><span>(* TODO: This is even cited at count-list definition, and should be somewhere in HOL! *)</span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.count_list_eq_count_mset|fact"><span class="entity_def" id="Sorting_Setup.count_list_eq_count_mset|thm"><span>count_list_eq_count_mset</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.count_list|const"><span>count_list</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword3"><span class="command"><span>fix</span></span></span><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="skolem"><span>x</span></span><span>
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.count_list|const"><span>count_list</span></a><span> </span><span class="skolem"><span>xs</span></span><span> </span><span class="skolem"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.multiset.count|const"><span>count</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="skolem"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="skolem"><span>x</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>xs</span></span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>  


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.permut_alt|fact"><span class="entity_def" id="Sorting_Setup.permut_alt|thm"><span>permut_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.count_list|const"><span>count_list</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.count_list|const"><span>count_list</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.count_list_eq_count_mset|fact"><span>count_list_eq_count_mset</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.multi_count_eq|fact"><span>multi_count_eq</span></a><span class="main"><span>)</span></span><span>


  
</span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
  
</span><span class="comment1"><span>(* General copy setup *)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.is_copy_def|fact"><span class="entity_def" id="Sorting_Setup.is_copy_def|thm"><span class="entity_def" id="Sorting_Setup.is_copy_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.is_copy|const"><span>is_copy</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cp</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>cp</span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Monadify.html#Sepref_Monadify.COPY|const"><span>COPY</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.is_copy_rule|fact"><span class="entity_def" id="Sorting_Setup.is_copy_rule|thm"><span>is_copy_rule</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>cp</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.is_copy|const"><span>is_copy</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>cp</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.comp|const"><span>o</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Monadify.html#Sepref_Monadify.COPY|const"><span>COPY</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>A</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.is_copy_def|fact"><span>is_copy_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO_def|fact"><span>GEN_ALGO_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="comment1"><span>(* Note: this is not in sepref's gen-algos, as currently the rule hnr_pure_copy is in, and tried first *)</span></span><span>  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.is_copy_pure_gen_algo|fact"><span class="entity_def" id="Sorting_Setup.is_copy_pure_gen_algo|thm"><span>is_copy_pure_gen_algo</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.CONSTRAINT|const"><span>CONSTRAINT</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.is_pure|const"><span>is_pure</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.is_copy|const"><span>is_copy</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.is_copy_def|fact"><span>is_copy_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO_def|fact"><span>GEN_ALGO_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.hnr_pure_COPY|fact"><span>hnr_pure_COPY</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="comment1"><span>(* TODO: Move. Make inline? This is meant for instantiating locales that require a free operation. *)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.free_pure_def|fact"><span class="entity_def" id="Sorting_Setup.free_pure_def|thm"><span class="entity_def" id="Sorting_Setup.free_pure_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.free_pure|const"><span>free_pure</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>x</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span>"</span></span></span><span>
  
  
  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.le_by_lt_def|fact"><span class="entity_def" id="Sorting_Setup.le_by_lt_def|thm"><span class="entity_def" id="Sorting_Setup.le_by_lt_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span>"</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.lt_by_le_def|fact"><span class="entity_def" id="Sorting_Setup.lt_by_le_def|thm"><span class="entity_def" id="Sorting_Setup.lt_by_le_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.lt_by_le|const"><span>lt_by_le</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>le</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>le</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span class="bound"><span class="entity"><span>le</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering_le.intro|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_le_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_le.intro|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_le_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_le_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_le|locale"><span class="entity_def" id="Sorting_Setup.weak_ordering_le|const"><span>weak_ordering_le</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>less_eq</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">❙</span><b>≤</b></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_le.trans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_le.trans|thm"><span class="entity_def" id="offset_1507..1512">trans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_le.connex|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_le.connex|thm"><span class="entity_def" id="offset_1551..1557">connex</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt.intro|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt.intro|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_lt|locale"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt|const"><span>weak_ordering_lt</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>less</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">❙</span><b>&lt;</b></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_lt.asym|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt.asym|thm"><span class="entity_def" id="offset_1659..1663">asym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_lt.itrans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_lt.itrans|thm"><span class="entity_def" id="offset_1690..1696">itrans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span>"</span></span></span><span>
      
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.intro|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.intro|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering|locale"><span class="entity_def" id="Sorting_Setup.weak_ordering|const"><span>weak_ordering</span></span></span><span> </span><span class="main"><span>=</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>less_eq</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span class="keyword1"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>less</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span class="keyword1"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.trans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.trans|thm"><span class="entity_def" id="offset_1861..1866">trans</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>trans</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.connex|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.connex|thm"><span class="entity_def" id="offset_1912..1918">connex</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.asym|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.asym|thm"><span class="entity_def" id="offset_1944..1948">asym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.itrans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.itrans|thm"><span class="entity_def" id="offset_1975..1981">itrans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.lt_by_le|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.lt_by_le|thm"><span class="entity_def" id="offset_2014..2022">lt_by_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le|const"><span>lt_by_le</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.le_by_lt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.le_by_lt|thm"><span class="entity_def" id="offset_2057..2065">le_by_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>


  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.unfold_lt_to_le|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.unfold_lt_to_le|thm"><span>unfold_lt_to_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2014..2022"><span>lt_by_le</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le_def|fact"><span>lt_by_le_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.unfold_le_to_lt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.unfold_le_to_lt|thm"><span class="entity_def" id="offset_2206..2221">unfold_le_to_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2057..2065"><span>le_by_lt</span></a><span class="main"><span>[</span></span><span class="operator"><span>symmetric</span></span><span class="main"><span>]</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.weak_ordering.greater_eq|const"><span>greater_eq</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">❙</span><b>≥</b></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≥</b></span></span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="main"><span>(</span></span><span>input</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.weak_ordering.greater|const"><span>greater</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">❙</span><b>&gt;</b></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&gt;</b></span></span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_refl|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_refl|thm"><span>wo_refl</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1912..1918"><span>connex</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_irrefl|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_irrefl|thm"><span>wo_irrefl</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1944..1948"><span>asym</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_trans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_trans|thm"><span class="entity_def" id="offset_2542..2555">wo_less_trans</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>trans</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1944..1948"><span>asym</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1975..1981"><span>itrans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.transp_le|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.transp_le|thm"><span>transp_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.reflp_le|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.reflp_le|thm"><span>reflp_le</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.reflp|const"><span>reflp</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.transp_lt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.transp_lt|thm"><span>transp_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.irreflp_lt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.irreflp_lt|thm"><span>irreflp_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp|const"><span>irreflp</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp_def|fact"><span>transp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.reflp_def|fact"><span>reflp_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.irreflp_def|fact"><span>irreflp_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1861..1866"><span>trans</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2542..2555"><span>wo_less_trans</span></a><span>   
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>
    
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_def_raw|axiom"><span class="entity_def" id="offset_2875..2885">definition</span></span></span></span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq|const"><span class="entity_def" id="offset_2886..2888">eq</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">❙</span><b>=</b></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>where</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>=</b></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_refl|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_refl|thm"><span>eq_refl</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.iff|attribute"><span class="operator"><span>iff</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span><span class="hidden">❙</span><b>=</b></span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2875..2885"><span>eq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
        
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_sym|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_sym|thm"><span class="entity_def" id="offset_3019..3025">eq_sym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span><span class="hidden">❙</span><b>=</b></span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span><span class="hidden">❙</span><b>=</b></span></a></span><span> </span><span class="free"><span>a</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2875..2885"><span>eq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_trans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_trans|thm"><span class="entity_def" id="offset_3090..3098">eq_trans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span><span class="hidden">❙</span><b>=</b></span></a></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span><span class="hidden">❙</span><b>=</b></span></a></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span><span class="hidden">❙</span><b>=</b></span></a></span><span> </span><span class="free"><span>c</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2875..2885"><span>eq_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1975..1981"><span>itrans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_equiv|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.eq_equiv|thm"><span>eq_equiv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/Equiv_Relations.html#Equiv_Relations.equivp|const"><span>equivp</span></a><span> </span><span class="main"><a class="entity_ref" href="Sorting_Setup.html#offset_2886..2888"><span>(<span class="hidden">❙</span><b>=</b>)</span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Equiv_Relations.html#Equiv_Relations.equivpI|fact"><span>equivpI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.reflpI|fact"><span>reflpI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.sympI|fact"><span>sympI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transpI|fact"><span>transpI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_3019..3025"><span>eq_sym</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_3090..3098"><span>eq_trans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Compatibility lemmas, similar names as for order›</span></span></span><span>  
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_leI|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_leI|thm"><span>wo_leI</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>x</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2206..2221"><span>unfold_le_to_lt</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_leD|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_leD|thm"><span class="entity_def" id="offset_3432..3438">wo_leD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2206..2221"><span>unfold_le_to_lt</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_not_le_imp_less|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_not_le_imp_less|thm"><span>wo_not_le_imp_less</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>y</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_2206..2221"><span>unfold_le_to_lt</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_le_less_trans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_le_less_trans|thm"><span>wo_le_less_trans</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>trans</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>z</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1975..1981"><span>itrans</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_3432..3438"><span>wo_leD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_le_trans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_le_trans|thm"><span>wo_less_le_trans</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>trans</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>≤</b></span></span></span><span> </span><span class="free"><span>z</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>z</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1975..1981"><span>itrans</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_3432..3438"><span>wo_leD</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_not_sym|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_not_sym|thm"><span>wo_less_not_sym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1944..1948"><span>asym</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_asym|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.wo_less_asym|thm"><span>wo_less_asym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>x</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>y</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>P</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1944..1948"><span>asym</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
    
    

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt|locale"><span>weak_ordering_lt</span></a><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|locale"><span>weak_ordering</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le_def|fact"><span>lt_by_le_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1659..1663"><span>asym</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1690..1696"><span>itrans</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_le|locale"><span>weak_ordering_le</span></a><span> </span><span class="main"><span>&lt;</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|locale"><span>weak_ordering</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le|const"><span>lt_by_le</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>unfold_locales</span></span><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le_def|fact"><span>lt_by_le_def</span></a><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1507..1512"><span>trans</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_1551..1557"><span>connex</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span class="main"><span class="keyword3"><span>+</span></span></span><span>

  
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.linwo|fact"><span class="entity_def" id="Sorting_Setup.linwo|thm"><span>linwo</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|const"><span>weak_ordering</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span class="main"><span>::</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le_def|fact"><span>lt_by_le_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.funwo|fact"><span class="entity_def" id="Sorting_Setup.funwo|thm"><span>funwo</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|const"><span>weak_ordering</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'b</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le_def|fact"><span>lt_by_le_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.fun_eq_iff|fact"><span>fun_eq_iff</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.le_by_linorder|fact"><span class="entity_def" id="Sorting_Setup.le_by_linorder|thm"><span>le_by_linorder</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span class="main"><span>::</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_le_not_le|fact"><span>less_le_not_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.lt_by_linorder|fact"><span class="entity_def" id="Sorting_Setup.lt_by_linorder|thm"><span>lt_by_linorder</span></span></span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le|const"><span>lt_by_le</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span class="main"><span>::</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.lt_by_le_def|fact"><span>lt_by_le_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.less_le_not_le|fact"><span>less_le_not_le</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.bex_intv_shift_aux|fact"><span class="entity_def" id="Sorting_Setup.bex_intv_shift_aux|thm"><span>bex_intv_shift_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>P</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>x</span></span><span class="main"><span>∈</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><span class="free"><span>n</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>P</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.less_Suc_eq_0_disj|fact"><span>less_Suc_eq_0_disj</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sorted_wrt_adjacent|fact"><span class="entity_def" id="Sorting_Setup.sorted_wrt_adjacent|thm"><span>sorted_wrt_adjacent</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.transp|const"><span>transp</span></a><span> </span><span class="free"><span>R</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt|const"><span>sorted_wrt</span></a><span> </span><span class="free"><span>R</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>i</span></span><span class="main"><span>∈</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="free"><span>R</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>del</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt.simps|fact"><span>sorted_wrt.simps</span></a><span class="main"><span>(</span></span><span>2</span><span class="main"><span>)</span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="main"><span>[</span></span><span class="operator"><span>simp</span></span><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt2_simps|fact"><span>sorted_wrt2_simps</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>rule</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.induct_list012|fact"><span>induct_list012</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.bex_intv_shift_aux|fact"><span>bex_intv_shift_aux</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sorted_wrt_lt|const"><span>sorted_wrt_lt</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt|const"><span>sorted_wrt</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sorted_wrt_lt_adjacent|fact"><span class="entity_def" id="Sorting_Setup.sorted_wrt_lt_adjacent|thm"><span>sorted_wrt_lt_adjacent</span></span></span><span class="main"><span>:</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt|const"><span>weak_ordering_lt</span></a><span> </span><span class="free"><span>lt</span></span><span>"</span></span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>shows</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sorted_wrt_lt|const"><span>sorted_wrt_lt</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>∀</span></span><span class="bound"><span>i</span></span><span class="main"><span>∈</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>{</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.zero_class.zero|const"><span>0</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>..&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.minus_class.minus|const"><span>-</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Groups.html#Groups.one_class.one|const"><span>1</span></a></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set_Interval.html#Set_Interval.ord_class.atLeastLessThan|const"><span>}</span></a></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>lt</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><a class="entity_ref" href="../../HOL/HOL/Nat.html#Nat.Suc|const"><span>Suc</span></a><span> </span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
  </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt|locale"><span>weak_ordering_lt</span></a><span> </span><span class="quoted"><span class="free"><span>lt</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>fact</span></span><span>
  
  </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/eqsubst.ML.html#HOL.subst|method"><span class="operator"><span>subst</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sorted_wrt_adjacent|fact"><span>sorted_wrt_adjacent</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
</span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sorted_sorted_wrt_lt|fact"><span class="entity_def" id="Sorting_Setup.sorted_sorted_wrt_lt|thm"><span>sorted_sorted_wrt_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.linorder_class.sorted|const"><span>sorted</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sorted_wrt_lt|const"><span>sorted_wrt_lt</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span class="main"><span>::</span></span><span class="main"><span>_</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.linorder|class"><span>linorder</span></a><span> </span><span class="main"><span>⇒</span></span><span class="main"><span>_</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.ext|fact"><span>ext</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>



</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_spec_def|fact"><span class="entity_def" id="Sorting_Setup.sort_spec_def|thm"><span class="entity_def" id="Sorting_Setup.sort_spec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_spec|const"><span>sort_spec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs'</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs'</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sorted_wrt_lt|const"><span>sorted_wrt_lt</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs'</span></span></span></span><span>"</span></span></span><span> 

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|locale"><span>weak_ordering</span></a><span class="main"><span>)</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.count_list|const"><span>count_list</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.count_list|const"><span>count_list</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span> </span><span class="free"><span>xs'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span>xs'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec_def|fact"><span>sort_spec_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.permut_alt|fact"><span>permut_alt</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt_iff_nth_less|fact"><span>sorted_wrt_iff_nth_less</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span class="main"><span>)</span></span><span> 


  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_def|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_def|thm"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.take|const"><span>take</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.drop|const"><span>drop</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>Misc.slice</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>Misc.slice</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.slice_sort_spec_refine_sort|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_refine_sort|thm"><span>slice_sort_spec_refine_sort</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>(</span></span><span class="free"><span>xsi</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel|const"><span>slice_rel</span></a><span> </span><span class="free"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>l'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>h</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xsi</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel|const"><span>slice_rel</span></a><span> </span><span class="free"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span><span> </span><span class="free"><span>l'</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_def|fact"><span>slice_sort_spec_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec_def|fact"><span>sort_spec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RES_refine|fact"><span>RES_refine</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel_def|fact"><span>slice_rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.slice_sort_spec_eq_sort&apos;|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_eq_sort&apos;|thm"><span>slice_sort_spec_eq_sort'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>(</span></span><span class="free"><span>xsi</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slicep_rel|const"><span>slicep_rel</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>xsi'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>xsi</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>l'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>h</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel|const"><span>slice_rel</span></a><span> </span><span class="free"><span>xsi'</span></span><span> </span><span class="free"><span>l'</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xsi</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_def|fact"><span>slice_sort_spec_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec_def|fact"><span>sort_spec_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel_def|fact"><span>slice_rel_def</span></a><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slicep_rel_def|fact"><span>slicep_rel_def</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.build_rel_SPEC_conv|fact"><span>build_rel_SPEC_conv</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>corollary</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.slice_sort_spec_refine_sort&apos;|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_refine_sort&apos;|thm"><span>slice_sort_spec_refine_sort'</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>(</span></span><span class="free"><span>xsi</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slicep_rel|const"><span>slicep_rel</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>xsi'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>xsi</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>l'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>h</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xsi</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel|const"><span>slice_rel</span></a><span> </span><span class="free"><span>xsi'</span></span><span> </span><span class="free"><span>l'</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_eq_sort&apos;|fact"><span>slice_sort_spec_eq_sort'</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>corollary</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.slice_sort_spec_refine_sort&apos;_sym|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_refine_sort&apos;_sym|thm"><span>slice_sort_spec_refine_sort'_sym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>(</span></span><span class="free"><span>xsi</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slicep_rel|const"><span>slicep_rel</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>xsi'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>xsi</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>l'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>l</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>h</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_rel|const"><span>slice_rel</span></a><span> </span><span class="free"><span>xsi'</span></span><span> </span><span class="free"><span>l'</span></span><span> </span><span class="free"><span>h'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xsi</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_eq_sort&apos;|fact"><span>slice_sort_spec_eq_sort'</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.slice_sort_spec_alt|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_alt|thm"><span>slice_sort_spec_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>h</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.eq_outside_range|const"><span>eq_outside_range</span></a><span> </span><span class="bound"><span>xs'</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>slice</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>xs'</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>slice</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>
      </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sorted_wrt_lt|const"><span>sorted_wrt_lt</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>slice</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>xs'</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_def|fact"><span>slice_sort_spec_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec_def|fact"><span>sort_spec_def</span></a><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.eq_outside_range_def|fact"><span>eq_outside_range_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_eq_iff|fact"><span>pw_eq_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
      
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.slice_sort_spec_sem_alt|fact"><span class="entity_def" id="Sorting_Setup.slice_sort_spec_sem_alt|thm"><span>slice_sort_spec_sem_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>l</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
      </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs'</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_eq_mset|const"><span>slice_eq_mset</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="bound"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sorted_wrt_lt|const"><span>sorted_wrt_lt</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>slice</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="bound"><span>xs'</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>
    </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_alt|fact"><span>slice_sort_spec_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_eq_iff|fact"><span>pw_eq_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_eq_mset_alt|fact"><span>slice_eq_mset_alt</span></a><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.slice_eq_mset_eq_length|fact"><span>slice_eq_mset_eq_length</span></a><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.eq_outside_rane_lenD|fact"><span>eq_outside_rane_lenD</span></a><span> </span><span class="quasi_keyword"><span>dest</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Misc.html#Sorting_Misc.eq_outside_range_sym|fact"><span>eq_outside_range_sym</span></a><span class="main"><span>)</span></span><span>
  
  
  
</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹ Sorting a permutation of a list amounts to sorting the list! ›</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_spec_permute|fact"><span class="entity_def" id="Sorting_Setup.sort_spec_permute|thm"><span>sort_spec_permute</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/HOL-Library.Multiset.html#Multiset.mset|const"><span>mset</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>ys</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec|const"><span>sort_spec</span></a><span> </span><span class="free"><span>lt</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>ys</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_spec_def|fact"><span>sort_spec_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>


</span><span class="comment1"><span>(* TODO: Move! *)</span></span><span>    
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.fref|fact"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.pre_idx_v_swap.param|fact"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap.fref|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.vcg|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.mcomb|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.arity|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.itype|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap_def|fact"><span class="entity_def" id="Sorting_Setup.pre_idx_v_swap_def|fact"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap.itype|fact"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap_def|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.fref|thm"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.pre_idx_v_swap.param|thm"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap.fref|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.mcomb|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.arity|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap.itype|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap_def|thm"><span class="entity_def" id="Sorting_Setup.pre_idx_v_swap_def|thm"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap.itype|thm"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap_def|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap_def|axiom"><span class="entity_def" id="Sorting_Setup.pre_idx_v_swap_def|axiom"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap_alt|fact"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap_alt|thm"><span class="entity_def" id="Sorting_Setup.mop_idx_v_swap|const"><span class="entity_def" id="Sorting_Setup.pre_idx_v_swap|const"><span class="entity_def" id="Sorting_Setup.op_idx_v_swap|const"><span>idx_v_swap</span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>[</span></span><span class="bound"><span>i</span></span><span class="main"><span>:=</span></span><span class="bound"><span>v</span></span><span class="main"><span>]</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><span class="free"><span>A</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="main"><span>⟨</span></span><span class="free"><span>A</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.idx_v_swap2_def|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap2_def|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap2_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.idx_v_swap2|const"><span>idx_v_swap2</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>do</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>v'</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.idx_v_swap2_refine|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap2_refine|thm"><span>idx_v_swap2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2|const"><span>idx_v_swap2</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.mop_idx_v_swap|const"><span>mop_idx_v_swap</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2_def|fact"><span>idx_v_swap2_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.None_notin_image_Some|fact"><span>None_notin_image_Some</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.List.list.set_map|fact"><span>list.set_map</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray|const"><span>idx_v_swap_impl_woarray</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2|const"><span>idx_v_swap2</span></a><span>"</span></span></span><span> 
  </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_assn|const"><span>woarray_assn</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_assn|const"><span>woarray_assn</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>ai</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>ai</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2_def|fact"><span>idx_v_swap2_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray.refine|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_def|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray.refine|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_def|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
</span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice|const"><span>idx_v_swap_impl_woarray_slice</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_code|attribute"><span class="operator"><span>llvm_code</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2|const"><span>idx_v_swap2</span></a><span>"</span></span></span><span> 
  </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>A</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>ai</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>r</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>ai</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2_def|fact"><span>idx_v_swap2_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice.refine|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice_def|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice.refine|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice_def|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.idx_v_swap_impl_woarray_slice_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_id_simp|fact"><span>list_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel_id_simp|fact"><span>option_rel_id_simp</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap_impl_woarray.refine|fact"><span>idx_v_swap_impl_woarray.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2_refine|fact"><span>idx_v_swap2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.mop_idx_v_swap.fref|fact"><span>mop_idx_v_swap.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap_impl_woarray_slice.refine|fact"><span>idx_v_swap_impl_woarray_slice.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.idx_v_swap2_refine|fact"><span>idx_v_swap2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.mop_idx_v_swap.fref|fact"><span>mop_idx_v_swap.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
      
</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.swap_eo|const"><span>swap_eo</span></a></span><span>  
  
</span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_List.html#IICF_List.gen_mop_list_swap|fact"><span>gen_mop_list_swap</span></a><span>  
</span><span class="keyword1"><span class="command"><span>find_theorems</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Isabelle_LLVM/IICF_List.html#IICF_List.mop_list_swap|const"><span>mop_list_swap</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.array_slice_assn|const"><span>array_slice_assn</span></a></span><span>
  

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|locale"><span>weak_ordering</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idxs.param|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.vcg|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.mcomb|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.arity|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idxs_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idxs.param|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.mcomb|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.arity|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idxs_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idxs_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_alt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_alt|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idxs|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idxs|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idxs|const"><span class="entity_def" id="offset_9791..9800">cmpo_idxs</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel|const"><span>option_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idxs.param|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.vcg|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.mcomb|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.arity|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idxs_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idxs.param|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.mcomb|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.arity|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idxs_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idxs_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_alt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_alt|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idxs|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idxs|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idxs|const"><span class="entity_def" id="offset_10026..10034">cmp_idxs</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> 
      </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_v_idx.param|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.vcg|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.mcomb|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.arity|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_v_idx_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_v_idx.param|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.mcomb|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.arity|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_v_idx_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_v_idx_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_alt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_alt|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_v_idx|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_v_idx|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_v_idx|const"><span class="entity_def" id="offset_10208..10218">cmpo_v_idx</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel|const"><span>option_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idx_v.param|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.vcg|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.mcomb|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.arity|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idx_v_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idx_v.param|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.mcomb|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.arity|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idx_v_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idx_v_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_alt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_alt|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmpo_idx_v|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmpo_idx_v|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmpo_idx_v|const"><span class="entity_def" id="offset_10400..10410">cmpo_idx_v</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.the|const"><span>the</span></a><span> </span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.None|const"><span>None</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel|const"><span>option_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_v_idx.param|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.vcg|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.mcomb|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.arity|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_v_idx_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_v_idx.param|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.mcomb|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.arity|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_v_idx_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_v_idx_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_alt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_alt|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_v_idx|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_v_idx|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_v_idx|const"><span class="entity_def" id="offset_10595..10604">cmp_v_idx</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>v</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>j</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>j</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.fref&apos;|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idx_v.param|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.fref|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.vcg|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.mcomb|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.arity|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idx_v_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.itype|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.fref&apos;|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idx_v.param|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.fref|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.vcg(2)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.vcg(1)|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.mcomb|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.arity|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idx_v_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.itype|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idx_v_def|axiom"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v_def|axiom"><span>sepref_decl_op</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_alt|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v_def_pat|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.cong|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_alt|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v_def_pat|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v.cong|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering.mop_cmp_idx_v|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.pre_cmp_idx_v|const"><span class="entity_def" id="Sorting_Setup.weak_ordering.op_cmp_idx_v|const"><span class="entity_def" id="offset_10754..10763">cmp_idx_v</span></span></span></span></span></span></span></span></span></span></span></span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span> </span><span class="bound"><span>i</span></span><span> </span><span class="bound"><span>v</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="bound"><span>i</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="bound"><span>v</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="bound"><span>xs</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.nat_rel|const"><span>nat_rel</span></a><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>::</span></span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.rel|type"><span>rel</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
    
            
</span><span class="comment1"><span>(*
  definition refines_cmp_idxs :: "('a list ⇒ _ ⇒ assn) ⇒ (_ ⇒ 'l::len2 word ⇒ 'l word ⇒ 1 word llM) ⇒ bool" 
    where "refines_cmp_idxs A ci_impl ≡ (uncurry2 ci_impl, uncurry2 (PR_CONST mop_cmp_idxs)) ∈ A<span class="hidden">⇧</span><sup>k</sup> *<span class="hidden">⇩</span><sub>a</sub> snat_assn<span class="hidden">⇧</span><sup>k</sup> *<span class="hidden">⇩</span><sub>a</sub> snat_assn<span class="hidden">⇧</span><sup>k</sup> →<span class="hidden">⇩</span><sub>a</sub> bool1_assn"
                                
  lemma gen_refines_cmp_idxsD: 
      "GEN_ALGO ci_impl (refines_cmp_idxs A) 
        ⟹ (uncurry2 ci_impl, uncurry2 (PR_CONST mop_cmp_idxs)) ∈ A<span class="hidden">⇧</span><sup>k</sup> *<span class="hidden">⇩</span><sub>a</sub> snat_assn<span class="hidden">⇧</span><sup>k</sup> *<span class="hidden">⇩</span><sub>a</sub> snat_assn<span class="hidden">⇧</span><sup>k</sup> →<span class="hidden">⇩</span><sub>a</sub> bool1_assn"        
    and gen_refines_cmp_idxsI[intro?]: 
      "(uncurry2 ci_impl, uncurry2 (PR_CONST mop_cmp_idxs)) ∈ A<span class="hidden">⇧</span><sup>k</sup> *<span class="hidden">⇩</span><sub>a</sub> snat_assn<span class="hidden">⇧</span><sup>k</sup> *<span class="hidden">⇩</span><sub>a</sub> snat_assn<span class="hidden">⇧</span><sup>k</sup> →<span class="hidden">⇩</span><sub>a</sub> bool1_assn
        ⟹ GEN_ALGO ci_impl (refines_cmp_idxs A)"
    unfolding refines_cmp_idxs_def GEN_ALGO_def by auto    
*)</span></span><span>    
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  
  
     
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.refines_relp_def|fact"><span class="entity_def" id="Sorting_Setup.refines_relp_def|thm"><span class="entity_def" id="Sorting_Setup.refines_relp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.refines_relp|const"><span>refines_relp</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Rimpl</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Rimpl</span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>Rimpl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_relp|const"><span>refines_relp</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.gen_refines_relpD|fact"><span class="entity_def" id="Sorting_Setup.gen_refines_relpD|thm"><span>gen_refines_relpD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>Rimpl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_relp|const"><span>refines_relp</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="free"><span>Rimpl</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO_def|fact"><span>GEN_ALGO_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_relp_def|fact"><span>refines_relp_def</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.gen_refines_relpI|fact"><span class="entity_def" id="Sorting_Setup.gen_refines_relpI|thm"><span>gen_refines_relpI</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.intro|attribute"><span class="operator"><span>intro</span></span></a><span class="main"><span class="main"><span class="main"><span class="main"><span>?</span></span></span></span></span><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="free"><span>Rimpl</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.comp2|const"><span>oo</span></a></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>Rimpl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_relp|const"><span>refines_relp</span></a><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO_def|fact"><span>GEN_ALGO_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_relp_def|fact"><span>refines_relp_def</span></a><span class="main"><span>)</span></span><span>
  
</span><span class="comment1"><span>(*  
locale sort_impl_context = weak_ordering +
  fixes cmp_idxs_impl :: "'ai::llvm_rep ⇒ 'l::len2 word ⇒ 'l word ⇒ 1 word llM"
    and arr_assn :: "'a list ⇒ 'ai ⇒ assn"
  assumes cmp_idxs_impl: "GEN_ALGO cmp_idxs_impl (refines_cmp_idxs arr_assn)"
  
begin

  lemmas lt_hnr[sepref_fr_rules] = gen_refines_cmp_idxsD[OF cmp_idxs_impl]
  
  declare [[sepref_register_adhoc "(<span class="hidden">❙</span><b>&lt;</b>)"]]
  

end  
*)</span></span><span>  

</span><span class="comment1"><span>(* TODO: Move *)</span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.axioms|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.intro|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context_axioms.intro|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context_axioms_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.axioms(2)|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.axioms(1)|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.intro|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context_axioms.intro|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context_axioms_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context_def|axiom"><span class="entity_def" id="Sorting_Setup.sort_impl_context_axioms_def|axiom"><span class="entity_def" id="offset_12618..12624">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context|locale"><span class="entity_def" id="Sorting_Setup.sort_impl_context|const"><span class="entity_def" id="Sorting_Setup.sort_impl_context_axioms|const"><span>sort_impl_context</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|locale"><span>weak_ordering</span></a><span> </span><span class="main"><span>+</span></span><span>  
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>lt_impl</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'ai</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>1</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>elem_assn</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.lt_impl|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.lt_impl|thm"><span class="entity_def" id="offset_12766..12773">lt_impl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>lt_impl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_relp|const"><span>refines_relp</span></a><span> </span><span class="free"><span>elem_assn</span></span><span> </span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.lt_hnr|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.lt_hnr|thm"><span>lt_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.gen_refines_relpD|fact"><span>gen_refines_relpD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_12766..12773"><span>lt_impl</span></a><span class="main"><span>]</span></span><span>
  
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Combinator_Setup.html#Sepref_Combinator_Setup.sepref_register_adhoc|attribute"><span class="operator"><span>sepref_register_adhoc</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span>"</span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.arr_assn|const"><span>arr_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span>"</span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2_def_raw|axiom"><span class="entity_def" id="offset_13004..13014">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2|const"><span class="entity_def" id="offset_13016..13026">cmpo_idxs2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vi</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vj</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>vi</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="bound"><span>vi</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>― ‹TODO: Let's hope the optimizer eliminates these assignments. In mid-term, eliminate them during sepref phase!›</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2_def_raw|axiom"><span class="entity_def" id="offset_13375..13385">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2|const"><span class="entity_def" id="offset_13387..13398">cmpo_v_idx2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vj</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2_def_raw|axiom"><span class="entity_def" id="offset_13548..13558">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2|const"><span class="entity_def" id="offset_13560..13571">cmpo_idx_v2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vi</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="keyword1"><span>let</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="bound"><span>vi</span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="bound"><span>vi</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2_def_raw|axiom"><span class="entity_def" id="offset_13719..13729">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2|const"><span class="entity_def" id="offset_13731..13740">cmp_idxs2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13016..13026"><span>cmpo_idxs2</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>b</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2_def_raw|axiom"><span class="entity_def" id="offset_13888..13898">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2|const"><span class="entity_def" id="offset_13900..13910">cmp_idx_v2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13560..13571"><span>cmpo_idx_v2</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>b</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2_def_raw|axiom"><span class="entity_def" id="offset_14061..14071">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2|const"><span class="entity_def" id="offset_14073..14083">cmp_v_idx2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13387..13398"><span>cmpo_v_idx2</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>b</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2_refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs2_refine|thm"><span class="entity_def" id="offset_14245..14262">cmpo_idxs2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13016..13026"><span>cmpo_idxs2</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_9791..9800"><span>mop_cmpo_idxs</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="bound"><span>j</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13004..13014"><span>cmpo_idxs2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> xs i j
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp_all</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_update_swap|fact"><span>list_update_swap</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>i</span></span></span><span> </span><span class="quoted"><span class="skolem"><span>j</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2_refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx2_refine|thm"><span class="entity_def" id="offset_14608..14626">cmpo_v_idx2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_13387..13398"><span>cmpo_v_idx2</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10208..10218"><span>mop_cmpo_v_idx</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13375..13385"><span>cmpo_v_idx2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2_refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v2_refine|thm"><span class="entity_def" id="offset_14807..14825">cmpo_idx_v2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_13560..13571"><span>cmpo_idx_v2</span></a><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10400..10410"><span>mop_cmpo_idx_v</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13548..13558"><span>cmpo_idx_v2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2_refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs2_refine|thm"><span class="entity_def" id="offset_15001..15017">cmp_idxs2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13731..13740"><span>cmp_idxs2</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10026..10034"><span>mop_cmp_idxs</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xs</span></span><span class="main"><span>,</span></span><span class="bound"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="bound"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="bound"><span>j</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>]<span class="hidden">⇩</span><sub>f</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefnd|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13719..13729"><span>cmp_idxs2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_12618..12624"><span>mop_cmp_idxs_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.frefI|fact"><span>frefI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14245..14262"><span>cmpo_idxs2_refine</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.param_fo|attribute"><span class="operator"><span>param_fo</span></span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relD|fact"><span>nres_relD</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="operator"><span>assumption</span></span><span class="main"><span class="keyword3"><span>,</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span class="main"><span>)</span></span><span class="main"><span class="keyword3"><span>+</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2_refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v2_refine|thm"><span class="entity_def" id="offset_15428..15445">cmp_idx_v2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13900..13910"><span>cmp_idx_v2</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10754..10763"><span>mop_cmp_idx_v</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13888..13898"><span>cmp_idx_v2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_12618..12624"><span>mop_cmp_idx_v_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14807..14825"><span>cmpo_idx_v2_refine</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.param_fo|attribute"><span class="operator"><span>param_fo</span></span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relD|fact"><span>nres_relD</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2_refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx2_refine|thm"><span class="entity_def" id="offset_15838..15855">cmp_v_idx2_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14073..14083"><span>cmp_v_idx2</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10595..10604"><span>mop_cmp_v_idx</span></a><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14061..14071"><span>cmp_v_idx2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_12618..12624"><span>mop_cmp_v_idx_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_relI|fact"><span>fun_relI</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relI|fact"><span>nres_relI</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.order_trans|fact"><span>order_trans</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14608..14626"><span>cmpo_v_idx2_refine</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.param_fo|attribute"><span class="operator"><span>param_fo</span></span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>THEN</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relD|fact"><span>nres_relD</span></a><span class="main"><span class="main"><span>,</span></span></span><span> </span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.IdI|fact"><span>IdI</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    
        
        
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl|const"><span>cmp_idxs_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13731..13740"><span>cmp_idxs2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13719..13729"><span>cmp_idxs2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13004..13014"><span>cmpo_idxs2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_hnr_dep|fact"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idxs_impl_def_raw|axiom"><span class="entity_def" id="offset_16517..16519">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl|const"><span>cmpo_idxs_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13016..13026"><span>cmpo_idxs2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eoarray_slice_assn|const"><span>eoarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13004..13014"><span>cmpo_idxs2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_hnr_dep|fact"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idxs_impl_def_raw|axiom"><span class="entity_def" id="offset_16779..16781">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl|const"><span>cmpo_v_idx_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13387..13398"><span>cmpo_v_idx2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eoarray_slice_assn|const"><span>eoarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13375..13385"><span>cmpo_v_idx2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_hnr_dep|fact"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_v_idx_impl_def_raw|axiom"><span class="entity_def" id="offset_17040..17042">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
  
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl|const"><span>cmpo_idx_v_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13560..13571"><span>cmpo_idx_v2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eoarray_slice_assn|const"><span>eoarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13548..13558"><span>cmpo_idx_v2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_hnr_dep|fact"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmpo_idx_v_impl_def_raw|axiom"><span class="entity_def" id="offset_17306..17308">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl|const"><span>cmp_idx_v_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13900..13910"><span>cmp_idx_v2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13888..13898"><span>cmp_idx_v2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13548..13558"><span>cmpo_idx_v2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_hnr_dep|fact"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_idx_v_impl_def_raw|axiom"><span class="entity_def" id="offset_17585..17587">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl|const"><span>cmp_v_idx_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14073..14083"><span>cmp_v_idx2</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14061..14071"><span>cmp_v_idx2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_13375..13385"><span>cmpo_v_idx2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_hnr_dep|fact"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_context.cmp_v_idx_impl_def_raw|axiom"><span class="entity_def" id="offset_17863..17865">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
        
  </span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_id_simp|fact"><span>list_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel_id_simp|fact"><span>option_rel_id_simp</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_16517..16519"><span>cmp_idxs_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_15001..15017"><span>cmp_idxs2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_16779..16781"><span>cmpo_idxs_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14245..14262"><span>cmpo_idxs2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_17040..17042"><span>cmpo_v_idx_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14608..14626"><span>cmpo_v_idx2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_17306..17308"><span>cmpo_idx_v_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_14807..14825"><span>cmpo_idx_v2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_17863..17865"><span>cmp_v_idx_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_15838..15855"><span>cmp_v_idx2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_17585..17587"><span>cmp_idx_v_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_15428..15445"><span>cmp_idx_v2_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="comment1"><span>(*
  Sort-impl context that allows copying and freeing of elements
*)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.axioms|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.intro|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_axioms.intro|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_axioms_def|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.axioms(2)|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.axioms(1)|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.intro|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_axioms.intro|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_axioms_def|thm"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_def|axiom"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_axioms_def|axiom"><span>locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context|locale"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context|const"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context_axioms|const"><span>sort_impl_copy_context</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_impl_context|locale"><span>sort_impl_context</span></a><span> </span><span class="main"><span>+</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>copy_elem_impl</span></span><span> </span><span class="free"><span>free_elem_impl</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.elem_assn_copy|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.elem_assn_copy|thm"><span>elem_assn_copy</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_gen_algo_rules|attribute"><span class="operator"><span>sepref_gen_algo_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>copy_elem_impl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.is_copy|const"><span>is_copy</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.elem_assn_free|fact"><span class="entity_def" id="Sorting_Setup.sort_impl_copy_context.elem_assn_free|thm"><span>elem_assn_free</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.MK_FREE|const"><span>MK_FREE</span></a><span> </span><span class="free"><span>elem_assn</span></span><span> </span><span class="free"><span>free_elem_impl</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
  </span><span class="comment1"><span>(* Prevent default pure copy rule *)</span></span><span>
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.safe_constraint_rules|attribute"><span class="operator"><span>safe_constraint_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.CN_FALSEI|fact"><span>CN_FALSEI</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.is_pure|const"><span>is_pure</span></a></span><span> </span><span class="quoted"><span class="free"><span>elem_assn</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.axioms|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.intro|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_axioms.intro|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_axioms_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.axioms(2)|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.axioms(1)|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.intro|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_axioms.intro|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_axioms_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_def|axiom"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_axioms_def|axiom"><span class="entity_def" id="offset_18927..18933">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context|locale"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context|const"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context_axioms|const"><span>pure_sort_impl_context</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_impl_context|locale"><span>sort_impl_context</span></a><span> </span><span class="main"><span>+</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.pureA|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.pureA|thm"><span class="entity_def" id="offset_18989..18994">pureA</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.safe_constraint_rules|attribute"><span class="operator"><span>safe_constraint_rules</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.CONSTRAINT|const"><span>CONSTRAINT</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.is_pure|const"><span>is_pure</span></a><span> </span><span class="free"><span>elem_assn</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Frame.html#Sepref_Frame.sepref_frame_free_rules|attribute"><span class="operator"><span>sepref_frame_free_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.mk_free_is_pure|fact"><span>mk_free_is_pure</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.CONSTRAINT_D|fact"><span>CONSTRAINT_D</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_18989..18994"><span>pureA</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>


  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;_def_raw|axiom"><span class="entity_def" id="offset_19139..19149">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;.cong|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;.cong|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;|const"><span class="entity_def" id="offset_19151..19161">cmp_idxs2'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;_def_raw|axiom"><span class="entity_def" id="offset_19253..19263">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;.cong|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;.cong|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;|const"><span class="entity_def" id="offset_19265..19276">cmp_idx_v2'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;_def_raw|axiom"><span class="entity_def" id="offset_19351..19361">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;.cong|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;.cong|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;|const"><span class="entity_def" id="offset_19363..19374">cmp_v_idx2'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>&lt;</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.length|const"><span>length</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth|const"><span>!</span></a></span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>)</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;_refine|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs2&apos;_refine|thm"><span class="entity_def" id="offset_19457..19474">cmp_idxs2'_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_19151..19161"><span>cmp_idxs2'</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10026..10034"><span>mop_cmp_idxs</span></a><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19139..19149"><span>cmp_idxs2'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_18927..18933"><span>mop_cmp_idxs_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;_refine|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v2&apos;_refine|thm"><span class="entity_def" id="offset_19647..19665">cmp_idx_v2'_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_19265..19276"><span>cmp_idx_v2'</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10754..10763"><span>mop_cmp_idx_v</span></a><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19253..19263"><span>cmp_idx_v2'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_18927..18933"><span>mop_cmp_idx_v_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;_refine|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx2&apos;_refine|thm"><span class="entity_def" id="offset_19824..19842">cmp_v_idx2'_refine</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_19363..19374"><span>cmp_v_idx2'</span></a><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_10595..10604"><span>mop_cmp_v_idx</span></a><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.fun_rel_syn|const"><span>→</span></a></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_rel|const"><span>nres_rel</span></a><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19351..19361"><span>cmp_v_idx2'_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.clarsimp|method"><span class="operator"><span>clarsimp</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    
        
            
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl|const"><span>cmp_idxs'_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19151..19161"><span>cmp_idxs2'</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19139..19149"><span>cmp_idxs2'_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idxs&apos;_impl_def_raw|axiom"><span class="entity_def" id="offset_20206..20208">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl|const"><span>cmp_idx_v'_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19265..19276"><span>cmp_idx_v2'</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19253..19263"><span>cmp_idx_v2'_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_idx_v&apos;_impl_def_raw|axiom"><span class="entity_def" id="offset_20429..20431">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl|const"><span>cmp_v_idx'_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19363..19374"><span>cmp_v_idx2'</span></a><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.woarray_slice_assn|const"><span>woarray_slice_assn</span></a><span> </span><span class="free"><span>elem_assn</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19351..19361"><span>cmp_v_idx2'_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl_def|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl_def|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.pure_sort_impl_context.cmp_v_idx&apos;_impl_def_raw|axiom"><span class="entity_def" id="offset_20648..20650">by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
  
    
        
    
  </span><span class="keyword1"><span class="command"><span>context</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_unfold|attribute"><span class="operator"><span>fcomp_norm_unfold</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_id_simp|fact"><span>list_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel_id_simp|fact"><span>option_rel_id_simp</span></a><span> </span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_20206..20208"><span>cmp_idxs'_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19457..19474"><span>cmp_idxs2'_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_20648..20650"><span>cmp_v_idx'_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19824..19842"><span>cmp_v_idx2'_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_20429..20431"><span>cmp_idx_v'_impl.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_19647..19665"><span>cmp_idx_v2'_refine</span></a><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  
    
  
  </span><span class="keyword1"><span class="command"><span>sublocale</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.sort_impl_copy_context|locale"><span>sort_impl_copy_context</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>≤</b>)</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span class="free"><span>(<span class="hidden">❙</span><b>&lt;</b>)</span></span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="free"><span>lt_impl</span></span></span><span> </span><span class="quoted"><span class="free"><span>elem_assn</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.free_pure|const"><span>free_pure</span></a></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span>
      </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.is_copy_pure_gen_algo|fact"><span>is_copy_pure_gen_algo</span></a><span class="main"><span>)</span></span><span>
      </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.solve_constraint|method"><span class="operator"><span>solve_constraint</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.mk_free_is_pure|fact"><span>mk_free_is_pure</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.CONSTRAINT_D|fact"><span>CONSTRAINT_D</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_18989..18994"><span>pureA</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.free_pure_def|fact"><span>free_pure_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  


</span><span class="comment1"><span>(*
  TODO: Explicit ownership collection data structures!
  
    Idea: Make ownership abstractly visible by sum type as abstract element type
      Inl x - element x, but no ownership (free to overwrite or return)
      Inr x - element x with ownership
  
    operation get: transfers ownership, leaves Inl
    operation set: overwrites Inl, Inr must be freed (by user!?)
    operation ret: returns ownership, also concrete value must not have changed. 
      *** Hard to implement, as abstractly not visible! BUT not needed for sorting, 
          and optimizer may eliminate redundant writes in many cases!
      



*)</span></span><span>

</span><span class="comment1"><span>(*  
locale sort_impl_context = weak_ordering +
  fixes lt_impl :: "'ai::llvm_rep ⇒ 'ai ⇒ 1 word llM"
    and elem_assn :: "'a ⇒ 'ai ⇒ assn"
  assumes lt_impl: "GEN_ALGO lt_impl (refines_relp elem_assn (<span class="hidden">❙</span><b>&lt;</b>))"
  assumes pureA[safe_constraint_rules]: "CONSTRAINT is_pure elem_assn"
  notes [sepref_frame_free_rules] = mk_free_is_pure[OF CONSTRAINT_D[OF pureA]]
  
  notes lt_hnr[sepref_fr_rules] = gen_refines_relpD[OF lt_impl]
  
  notes [[sepref_register_adhoc "(<span class="hidden">❙</span><b>&lt;</b>)"]]
  
begin
  abbreviation "arr_assn ≡ array_assn elem_assn"
end  
*)</span></span><span>
</span><span class="comment1"><span>(* TODO: Refine lemmas to support more general size datatypes! *)</span></span><span>
  
</span><span class="keyword1"><span class="command"><span>type_synonym</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.size_t|type"><span>size_t</span></span><span> </span><span class="main"><span>=</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="numeral"><span>64</span></span><span>"</span></span></span><span>
</span><span class="keyword1"><span class="command"><span>abbreviation</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.size_assn|const"><span>size_assn</span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_t|type"><span>size_t</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.unat_sort_impl_context|fact"><span class="entity_def" id="Sorting_Setup.unat_sort_impl_context|thm"><span>unat_sort_impl_context</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.pure_sort_impl_context|const"><span>pure_sort_impl_context</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>(≤)</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less|const"><span>(&lt;)</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.ll_icmp_ult|const"><span>ll_icmp_ult</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.unat_assn|const"><span>unat_assn</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>intro_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.linwo|fact"><span>linwo</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.hn_unat_ops|fact"><span>hn_unat_ops</span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Constraints.html#Sepref_Constraints.solve_constraint|method"><span class="operator"><span>solve_constraint</span></span></a><span class="main"><span>)</span></span><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
  
</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Parameterized Sorting›</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Extension of a weak ordering with explicit carrier set is always possible, 
  e.g., by putting all elements not in the carrier set into one equivalence class,
  which is smaller than any other class.›</span></span></span><span>  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt.intro|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt_def|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt.intro|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt_def|thm"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt|locale"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt|const"><span>weak_ordering_on_lt</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>C</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>less</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>infix</span></span></span><span> </span><span class="quoted"><span>"</span><span class="keyword1"><span><span class="hidden">❙</span><b>&lt;</b></span></span><span>"</span></span><span> 50</span><span class="main"><span>)</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt.asym|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt.asym|thm"><span>asym</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>C</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.Not|const"><span>¬</span></a></span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>a</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt.itrans|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt.itrans|thm"><span>itrans</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>C</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>C</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>c</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>C</span></span><span> </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span>b</span></span><span class="main"><span class="free"><span><span class="hidden">❙</span><b>&lt;</b></span></span></span><span class="free"><span>c</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.ext_lt_def|fact"><span class="entity_def" id="Sorting_Setup.ext_lt_def|thm"><span class="entity_def" id="Sorting_Setup.ext_lt_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.ext_lt|const"><span>ext_lt</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>lt</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.disj|const"><span>∨</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>b</span></span></span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.not_member|const"><span>∉</span></a></span><span class="free"><span class="bound"><span class="entity"><span>C</span></span></span></span><span>"</span></span></span><span>  
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt_extend|fact"><span class="entity_def" id="Sorting_Setup.weak_ordering_on_lt_extend|thm"><span>weak_ordering_on_lt_extend</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt|const"><span>weak_ordering_lt</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt|const"><span>ext_lt</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>lt</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_on_lt|const"><span>weak_ordering_on_lt</span></a><span> </span><span class="free"><span>C</span></span><span> </span><span class="free"><span>lt</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_on_lt_def|fact"><span>weak_ordering_on_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt_def|fact"><span>weak_ordering_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
  
  
</span><span class="comment1"><span>(* TODO: Restrict cdom constraint to slice! *)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.pslice_sort_spec_def|fact"><span class="entity_def" id="Sorting_Setup.pslice_sort_spec_def|thm"><span class="entity_def" id="Sorting_Setup.pslice_sort_spec_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.pslice_sort_spec|const"><span>pslice_sort_spec</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>pless</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="comment1"><span>⌦‹ASSERT (set (slice l h xs) ⊆ cdom cparam);›</span></span><span>
  </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cdom</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>pless</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>l</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>h</span></span></span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.intro|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.intro|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering|locale"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering|const"><span>parameterized_weak_ordering</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>cdom</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparam</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.set|type"><span>set</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>pless</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparam</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>pcmp</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparam</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.weak_ordering_on_lt|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.weak_ordering_on_lt|thm"><span class="entity_def" id="offset_23969..23988">weak_ordering_on_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_on_lt|const"><span>weak_ordering_on_lt</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>pless</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_correct|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_correct|thm"><span>pcmp_correct</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|attribute"><span class="operator"><span>refine_vcg</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="free"><span>a</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><span class="free"><span>pcmp</span></span><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.SPEC|const"><span>SPEC</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>pless</span></span><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>    

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_rel_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_rel_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_rel_def_raw|axiom"><span class="entity_def" id="offset_24181..24191">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_rel.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_rel.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_rel|const"><span class="entity_def" id="offset_24193..24201">cdom_rel</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel_def_raw|axiom"><span class="entity_def" id="offset_24240..24250">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel|const"><span class="entity_def" id="offset_24252..24265">cdom_list_rel</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_24193..24201"><span>cdom_rel</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel_def_raw|axiom"><span class="entity_def" id="offset_24304..24314">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel|const"><span class="entity_def" id="offset_24316..24330">cdom_olist_rel</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>⟨</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_24193..24201"><span>cdom_rel</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel|const"><span>option_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span>"</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.br_id_list_rel_conv|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.br_id_list_rel_conv|thm"><span class="entity_def" id="offset_24390..24409">br_id_list_rel_conv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>,</span></span><span class="free"><span>xs'</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="free"><span>I</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.Collect|const"><span>Collect</span></a><span> </span><span class="free"><span>I</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>xs'</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> xs' </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x xs xs' </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>xs'</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.br_id_olist_rel_conv|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.br_id_olist_rel_conv|thm"><span class="entity_def" id="offset_24627..24647">br_id_olist_rel_conv</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>xs</span></span><span class="main"><span>,</span></span><span class="free"><span>xs'</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="main"><span>⟨</span></span><span class="main"><span>⟨</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="free"><span>I</span></span><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel|const"><span>option_rel</span></a><span class="main"><span>⟩</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel|const"><span>list_rel</span></a><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iff|const"><span>⟷</span></a></span><span> </span><span class="free"><span>xs</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.conj|const"><span>∧</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="free"><span>I</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induction.ML.html#HOL.induction|method"><span class="operator"><span>induction</span></span></a><span> </span><span class="quoted"><span class="free"><span>xs</span></span></span><span> </span><span class="quasi_keyword"><span>arbitrary</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><span class="quoted"><span class="free"><span>xs'</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> xs' </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>subgoal</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>for</span></span></span><span> x xs xs' </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Tools/induct.ML.html#HOL.cases|method"><span class="operator"><span>cases</span></span></a><span> </span><span class="quoted"><span class="skolem"><span>xs'</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel_def|fact"><span>option_rel_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel_alt|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_list_rel_alt|thm"><span class="entity_def" id="offset_24899..24916">cdom_list_rel_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24240..24250"><span>cdom_list_rel_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24181..24191"><span>cdom_rel_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24390..24409"><span>br_id_list_rel_conv</span></a><span class="main"><span>)</span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel_alt|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.cdom_olist_rel_alt|thm"><span class="entity_def" id="offset_25084..25102">cdom_olist_rel_alt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs</span></span><span class="main"><span>.</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>∀</span></a></span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.All|const"><span>.</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.Some|const"><span>Some</span></a><span> </span><span class="bound"><span>x</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.implies|const"><span>⟶</span></a></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24304..24314"><span>cdom_olist_rel_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24181..24191"><span>cdom_rel_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24627..24647"><span>br_id_olist_rel_conv</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.less&apos;_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.less&apos;_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.less&apos;_def_raw|axiom"><span class="entity_def" id="offset_25280..25290">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.less&apos;.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.less&apos;.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.less&apos;|const"><span class="entity_def" id="offset_25292..25297">less'</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt|const"><span>ext_lt</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>pless</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.weak_ordering_lt|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.weak_ordering_lt|thm"><span class="entity_def" id="offset_25355..25371">weak_ordering_lt</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt|const"><span>weak_ordering_lt</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_23969..23988"><span>weak_ordering_on_lt</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_on_lt_extend|fact"><span>weak_ordering_on_lt_extend</span></a><span class="main"><span>)</span></span><span> 

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.weak_ordering|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.weak_ordering|thm"><span class="entity_def" id="offset_25500..25513">weak_ordering</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|const"><span>weak_ordering</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>proof</span></span></span><span> </span><span class="operator"><span>-</span></span><span>
    </span><span class="keyword1"><span class="command"><span>interpret</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering_lt|locale"><span>weak_ordering_lt</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25355..25371"><span>weak_ordering_lt</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword3"><span class="command"><span>show</span></span></span><span> </span><span class="var"><span class="quoted"><span class="var"><span>?thesis</span></span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>unfold_locales</span></span><span>
  </span><span class="keyword1"><span class="command"><span>qed</span></span></span><span>      

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="offset_25705..25714">sublocale</span></span></span><span> WO</span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.weak_ordering|locale"><span>weak_ordering</span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt|const"><span>le_by_lt</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25500..25513"><span>weak_ordering</span></a><span class="main"><span>)</span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.sorted_wrt_ext|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.sorted_wrt_ext|thm"><span class="entity_def" id="offset_25816..25830">sorted_wrt_ext</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt|const"><span>sorted_wrt</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt|const"><span>sorted_wrt</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>pless</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>intro</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.iffI|fact"><span>iffI</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> </span><span class="operator"><span>erule</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt_mono_rel|fact"><span>sorted_wrt_mono_rel</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>rotated</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
  </span><span class="comment1"><span>(* TODO: Move *)</span></span><span>  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.set_slice_ss|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.set_slice_ss|thm"><span class="entity_def" id="offset_26061..26073">set_slice_ss</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice|const"><span>slice</span></a><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subset_eq|const"><span>⊆</span></a></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list.set|const"><span>set</span></a><span> </span><span class="free"><span>xs</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.slice_def|fact"><span>Misc.slice_def</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.preorder_class.dual_order.trans|fact"><span>dual_order.trans</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_drop_subset|fact"><span>set_drop_subset</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.set_take_subset|fact"><span>set_take_subset</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.slice_sort_spec_xfer|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.slice_sort_spec_xfer|thm"><span>slice_sort_spec_xfer</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec|const"><span>slice_sort_spec</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25292..25297"><span>less'</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.pslice_sort_spec|const"><span>pslice_sort_spec</span></a><span> </span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>pless</span></span><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>l</span></span><span> </span><span class="free"><span>h</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.pslice_sort_spec_def|fact"><span>pslice_sort_spec_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24899..24916"><span>cdom_list_rel_alt</span></a><span> 
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.pw_le_iff|fact"><span>pw_le_iff</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.slice_sort_spec_alt|fact"><span>slice_sort_spec_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_pw_simps|fact"><span class="dynamic"><span class="dynamic"><span>refine_pw_simps</span></span></span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25816..25830"><span>sorted_wrt_ext</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/SMT/smt_systems.ML.html#SMT.smt|method"><span class="operator"><span>smt</span></span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.le_by_lt_def|fact"><span>le_by_lt_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_26061..26073"><span>set_slice_ss</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.sorted_wrt_mono_rel|fact"><span>sorted_wrt_mono_rel</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.subsetD|fact"><span>subsetD</span></a><span class="main"><span>)</span></span><span>
    
</span><span class="comment1"><span>(*
  lemma pslice_sort_spec_xfer:
    assumes "m ≤ slice_sort_spec (less' cparam) xs l h"
    assumes "mm ≤ ⇓(cdom_list_rel cparam) m"
    assumes "(xs',xs)∈cdom_list_rel cparam"
    shows "mm ≤ pslice_sort_spec cdom pless cparam xs l h"
    using assms unfolding pslice_sort_spec_def cdom_list_rel_alt 
    apply (auto simp: pw_le_iff refine_pw_simps in_br_conv)
    unfolding slice_sort_spec_alt
    apply (auto simp: refine_pw_simps)
    using sorted_wrt_ext
    by (smt ext_lt_def le_by_lt_def less'_def set_slice_ss sorted_wrt_mono_rel subset_code(1))
*)</span></span><span>  

    
    
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.olist_to_eo_conv_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.olist_to_eo_conv_refine|thm"><span>olist_to_eo_conv_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres_relD|fact"><span>nres_relD</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv_def|fact"><span>mop_to_eo_conv_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24304..24314"><span>cdom_olist_rel_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24240..24250"><span>cdom_list_rel_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Param_Tool.html#Param_Tool.parametricity|method"><span class="operator"><span>parametricity</span></span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.olist_to_wo_conv_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.olist_to_wo_conv_refine|thm"><span>olist_to_wo_conv_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_rcg|method"><span class="operator"><span>refine_rcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25084..25102"><span>cdom_olist_rel_alt</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24899..24916"><span>cdom_list_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.collapse|fact"><span>option.collapse</span></a><span class="main"><span>)</span></span><span>

    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.olist_extract_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.olist_extract_refine|thm"><span>olist_extract_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span> </span><span class="main"><span>⟧</span></span><span> 
    </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.br|const"><span>br</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Fun.html#Fun.id|const"><span>id</span></a><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_syn|const"><span>×<span class="hidden">⇩</span><sub>r</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract_alt|fact"><span>mop_eo_extract_alt</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25084..25102"><span>cdom_olist_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.in_set_upd_cases|fact"><span>in_set_upd_cases</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.distinct|fact"><span>option.distinct</span></a><span class="main"><span class="main"><span>(</span></span></span><span>1</span><span class="main"><span class="main"><span>)</span></span></span><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.listo_eo_set_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.listo_eo_set_refine|thm"><span>listo_eo_set_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>v'</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25084..25102"><span>cdom_olist_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/HOL/Tools/Metis/metis_tactic.ML.html#Metis.metis|method"><span class="operator"><span>metis</span></span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.in_set_upd_cases|fact"><span>in_set_upd_cases</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option.sel|fact"><span>option.sel</span></a><span class="main"><span>)</span></span><span>

    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs2_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs2_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs2_def_raw|axiom"><span class="entity_def" id="offset_28476..28486">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs2.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs2.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs2|const"><span class="entity_def" id="offset_28488..28499">pcmpo_idxs2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.ASSERT|const"><span>ASSERT</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vi</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vj</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span>pcmp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="bound"><span>vi</span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="bound"><span>vi</span></span><span class="main"><span>;</span></span><span> </span><span class="comment1"><span>― ‹TODO: Let's hope the optimizer eliminates these assignments. In mid-term, eliminate them during sepref phase!›</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx2_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx2_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx2_def_raw|axiom"><span class="entity_def" id="offset_28862..28872">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx2.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx2.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx2|const"><span class="entity_def" id="offset_28874..28886">pcmpo_v_idx2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vj</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span>pcmp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="bound"><span>vj</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v2_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v2_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v2_def_raw|axiom"><span class="entity_def" id="offset_29046..29056">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v2.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v2.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v2|const"><span class="entity_def" id="offset_29058..29070">pcmpo_idx_v2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="main"><span>(</span></span><span class="bound"><span>vi</span></span><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>r</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span>pcmp</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="bound"><span>vi</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="bound"><span>vi</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>r</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs2_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs2_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs2_def_raw|axiom"><span class="entity_def" id="offset_29230..29240">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs2.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs2.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs2|const"><span class="entity_def" id="offset_29242..29252">pcmp_idxs2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28488..28499"><span>pcmpo_idxs2</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>b</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  

  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v2_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v2_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v2_def_raw|axiom"><span class="entity_def" id="offset_29415..29425">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v2.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v2.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v2|const"><span class="entity_def" id="offset_29427..29438">pcmp_idx_v2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29058..29070"><span>pcmpo_idx_v2</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>b</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx2_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx2_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx2_def_raw|axiom"><span class="entity_def" id="offset_29604..29614">definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx2.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx2.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx2|const"><span class="entity_def" id="offset_29616..29627">pcmp_v_idx2</span></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doN</span></span><span> </span><span class="main"><span>{</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>b</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28874..28886"><span>pcmpo_v_idx2</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>cparam</span></span></span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>v</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>j</span></span></span></span><span class="main"><span>;</span></span><span>
    </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span> </span><span class="bound"><span>xs</span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_Sepref_Borrow.html#Proto_Sepref_Borrow.unborrow|const"><span>unborrow</span></a><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>xs<span class="hidden">⇩</span><sub>0</sub></span></span></span></span><span class="main"><span>;</span></span><span>
    </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.RETURN|const"><span>RETURN</span></a><span> </span><span class="bound"><span>b</span></span><span>
  </span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idxs_refine|thm"><span>pcmpo_idxs_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="free"><span>j</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>j'</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28488..28499"><span>pcmpo_idxs2</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="free"><span>j'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25705..25714"><span>WO.mop_cmpo_idxs</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28476..28486"><span>pcmpo_idxs2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25084..25102"><span>cdom_olist_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span>
           </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_update_swap|fact"><span>list_update_swap</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_v_idx_refine|thm"><span>pcmpo_v_idx_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>v'</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28874..28886"><span>pcmpo_v_idx2</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25705..25714"><span>WO.mop_cmpo_v_idx</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28862..28872"><span>pcmpo_v_idx2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25084..25102"><span>cdom_olist_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmpo_idx_v_refine|thm"><span>pcmpo_idx_v_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24316..24330"><span>cdom_olist_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>v'</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29058..29070"><span>pcmpo_idx_v2</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25705..25714"><span>WO.mop_cmpo_idx_v</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29046..29056"><span>pcmpo_idx_v2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25084..25102"><span>cdom_olist_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idxs_refine|thm"><span>pcmp_idxs_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="free"><span>i</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.not_equal|const"><span>≠</span></a></span><span class="free"><span>j</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>j'</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29242..29252"><span>pcmp_idxs2</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="free"><span>j'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25705..25714"><span>WO.mop_cmp_idxs</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29230..29240"><span>pcmp_idxs2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28476..28486"><span>pcmpo_idxs2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 0 3 </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24899..24916"><span>cdom_list_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span> 
           </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list_update_swap|fact"><span>list_update_swap</span></a><span class="main"><span class="main"><span>[</span></span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.of|attribute"><span class="operator"><span>of</span></span></a><span> </span><span class="quoted"><span class="free"><span>i</span></span></span><span> </span><span class="quoted"><span class="free"><span>j</span></span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>)</span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_mem|fact"><span>nth_mem</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/blast.ML.html#HOL.blast|method"><span class="operator"><span>blast</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_idx_v_refine|thm"><span>pcmp_idx_v_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>i'</span></span><span class="main"><span>,</span></span><span class="free"><span>i</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>v'</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29427..29438"><span>pcmp_idx_v2</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>i'</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25705..25714"><span>WO.mop_cmp_idx_v</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29415..29425"><span>pcmp_idx_v2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29046..29056"><span>pcmpo_idx_v2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 0 3 </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24899..24916"><span>cdom_list_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span class="main"><span>)</span></span><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx_refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_weak_ordering.pcmp_v_idx_refine|thm"><span>pcmp_v_idx_refine</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine|attribute"><span class="operator"><span>refine</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>⟦</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>xs'</span></span><span class="main"><span>,</span></span><span class="free"><span>xs</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24252..24265"><span>cdom_list_rel</span></a><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>v'</span></span><span class="main"><span>,</span></span><span class="free"><span>v</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span class="main"><span>;</span></span><span> </span><span class="free"><span>v</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span class="free"><span>cdom</span></span><span> </span><span class="free"><span>cparam</span></span><span class="main"><span>;</span></span><span>
    </span><span class="main"><span>(</span></span><span class="free"><span>j'</span></span><span class="main"><span>,</span></span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a><span>
  </span><span class="main"><span>⟧</span></span><span> </span><span class="main"><span>⟹</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29616..29627"><span>pcmp_v_idx2</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs'</span></span><span> </span><span class="free"><span>v'</span></span><span> </span><span class="free"><span>j'</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Orderings.html#Orderings.ord_class.less_eq|const"><span>≤</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.conc_fun|const"><span>⇓</span></a></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.bool_rel|const"><span>bool_rel</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#offset_25705..25714"><span>WO.mop_cmp_v_idx</span></a><span> </span><span class="free"><span>cparam</span></span><span> </span><span class="free"><span>xs</span></span><span> </span><span class="free"><span>v</span></span><span> </span><span class="free"><span>j</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>  
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29604..29614"><span>pcmp_v_idx2_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28862..28872"><span>pcmpo_v_idx2_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.refine_vcg|method"><span class="operator"><span>refine_vcg</span></span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span> 0 3 </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_24899..24916"><span>cdom_list_rel_alt</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.in_br_conv|fact"><span>in_br_conv</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.map_update|fact"><span>map_update</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>symmetric</span></span><span class="main"><span class="main"><span>]</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_25280..25290"><span>less'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ext_lt_def|fact"><span>ext_lt_def</span></a><span> </span><span class="quasi_keyword"><span>intro</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.nth_mem|fact"><span>nth_mem</span></a><span class="main"><span>)</span></span><span>
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>

</span><span class="comment1"><span>(*
locale parameterized_weak_ordering = weak_ordering +
  fixes (*cparam :: 'cparam*)
        cdom :: "'cparam ⇒ 'a set"
    and pcmp :: "'cparam ⇒ 'a ⇒ 'a ⇒ bool nres"
  assumes pcmp_correct[refine_vcg]: "⟦ a∈cdom cparam; b∈cdom cparam⟧ 
    ⟹ pcmp cparam a b ≤ SPEC (λr. r ⟷ a<span class="hidden">❙</span><b>&lt;</b>b)"
    
    
    
begin
  (* TODO: The refinements established here are just a special case of list-element refinement.
    We should use list-rel here! And generic parametricity lemmas from the operations!
  *)
  definition "cdom_list_rel cparam ≡ br id (λxs. set xs ⊆ cdom cparam)"
  definition "cdom_olist_rel cparam ≡ br id (λxs. ∀x. Some x ∈ set xs ⟶ x∈cdom cparam)"

  lemma olist_to_eo_conv_refine[refine]: 
    "(xs',xs)∈cdom_list_rel cparam ⟹ mop_to_eo_conv xs' ≤ ⇓(cdom_olist_rel cparam) (mop_to_eo_conv xs)"
    unfolding mop_to_eo_conv_def cdom_list_rel_def cdom_olist_rel_def
    by (auto simp: in_br_conv)
    
  lemma olist_to_wo_conv_refine[refine]: 
    "⟦(xs',xs)∈cdom_olist_rel cparam⟧ ⟹ mop_to_wo_conv xs' ≤ ⇓(cdom_list_rel cparam) (mop_to_wo_conv xs)"
    apply simp
    apply refine_rcg
    apply (auto simp: cdom_olist_rel_def cdom_list_rel_def in_br_conv)
    by (metis option.collapse)

    
  lemma olist_extract_refine[refine]: "⟦ (xs',xs)∈cdom_olist_rel cparam; (i',i)∈Id ⟧ 
    ⟹ mop_eo_extract xs' i' ≤ ⇓ ((br id (λx. x∈cdom cparam)) ×<span class="hidden">⇩</span><sub>r</sub> cdom_olist_rel cparam) (mop_eo_extract xs i)"
    unfolding mop_eo_extract_alt
    apply refine_vcg
    apply (auto simp: cdom_olist_rel_def in_br_conv)
    by (metis in_set_upd_cases option.distinct(1))
    
  lemma listo_eo_set_refine[refine]: "⟦
    (xs',xs)∈cdom_olist_rel cparam;
    (i',i)∈Id;
    (v',v)∈Id; v∈cdom cparam
  ⟧ ⟹ mop_eo_set xs' i' v' ≤ ⇓ (cdom_olist_rel cparam) (mop_eo_set xs i v)"  
    apply simp
    apply refine_vcg
    apply (auto simp: cdom_olist_rel_def in_br_conv)
    by (metis in_set_upd_cases option.sel)

    
  definition "pcmpo_idxs2 cparam xs<span class="hidden">⇩</span><sub>0</sub> i j ≡ doN {
    ASSERT (i ≠ j);
    (vi,xs) ← mop_eo_extract xs<span class="hidden">⇩</span><sub>0</sub> i;
    (vj,xs) ← mop_eo_extract xs j;
    r ← pcmp cparam vi vj;
    xs ← mop_eo_set xs i vi; ― ‹TODO: Let's hope the optimizer eliminates these assignments. In mid-term, eliminate them during sepref phase!›
    xs ← mop_eo_set xs j vj;
    unborrow xs xs<span class="hidden">⇩</span><sub>0</sub>;
    RETURN r
  }"
    
  definition "pcmpo_v_idx2 cparam xs<span class="hidden">⇩</span><sub>0</sub> v j ≡ doN {
    (vj,xs) ← mop_eo_extract xs<span class="hidden">⇩</span><sub>0</sub> j;
    r ← pcmp cparam v vj;
    xs ← mop_eo_set xs j vj;
    unborrow xs xs<span class="hidden">⇩</span><sub>0</sub>;
    RETURN r
  }"

  definition "pcmpo_idx_v2 cparam xs<span class="hidden">⇩</span><sub>0</sub> i v ≡ doN {
    (vi,xs) ← mop_eo_extract xs<span class="hidden">⇩</span><sub>0</sub> i;
    r ← pcmp cparam vi v;
    xs ← mop_eo_set xs i vi;
    unborrow xs xs<span class="hidden">⇩</span><sub>0</sub>;
    RETURN r
  }"

  definition "pcmp_idxs2 cparam xs<span class="hidden">⇩</span><sub>0</sub> i j ≡ doN {
    xs ← mop_to_eo_conv xs<span class="hidden">⇩</span><sub>0</sub>;
    b ← pcmpo_idxs2 cparam xs i j;
    xs ← mop_to_wo_conv xs;
    unborrow xs xs<span class="hidden">⇩</span><sub>0</sub>;
    RETURN b
  }"  
  
  lemma pcmpo_idxs_refine[refine]: "⟦
    (xs',xs)∈ cdom_olist_rel cparam;
    i≠j;
    (i',i)∈Id;
    (j',j)∈Id
  ⟧ ⟹ pcmpo_idxs2 cparam xs' i' j' ≤ ⇓ bool_rel (mop_cmpo_idxs xs i j)"  
    unfolding pcmpo_idxs2_def
    apply simp
    apply refine_vcg
    apply (auto simp: cdom_olist_rel_def in_br_conv 
           list_update_swap[of i j] map_update[symmetric])
    done
  
  
  lemma pcmpo_v_idx_refine[refine]: "⟦
    (xs',xs)∈ cdom_olist_rel cparam;
    (v',v)∈Id; v∈cdom cparam;
    (i',i)∈Id
  ⟧ ⟹ pcmpo_v_idx2 cparam xs' v' i' ≤ ⇓ bool_rel (mop_cmpo_v_idx xs v i)"  
    unfolding pcmpo_v_idx2_def
    apply simp
    apply refine_vcg
    apply (auto simp: cdom_olist_rel_def in_br_conv)
    done
    
  lemma pcmpo_idx_v_refine[refine]: "⟦
    (xs',xs)∈ cdom_olist_rel cparam;
    (v',v)∈Id; v∈cdom cparam;
    (i',i)∈Id
  ⟧ ⟹ pcmpo_idx_v2 cparam xs' i' v' ≤ ⇓ bool_rel (mop_cmpo_idx_v xs i v)"  
    unfolding pcmpo_idx_v2_def
    apply simp
    apply refine_vcg
    apply (auto simp: cdom_olist_rel_def in_br_conv)
    done
  
  lemma pcmp_idxs_refine[refine]: "⟦
    (xs',xs)∈ cdom_list_rel cparam;
    i≠j;
    (i',i)∈Id;
    (j',j)∈Id
  ⟧ ⟹ pcmp_idxs2 cparam xs' i' j' ≤ ⇓ bool_rel (mop_cmp_idxs xs i j)"  
    unfolding pcmp_idxs2_def pcmpo_idxs2_def
    apply simp
    apply refine_vcg
    apply (auto 0 3 simp: cdom_list_rel_def in_br_conv
           list_update_swap[of i j] map_update[symmetric])
    done
    
    
end
*)</span></span><span>

</span><span class="keyword1"><span class="command"><span>text</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹The compare function takes an external parameter.›</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a></span><span>

</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.random_access_iterator.intro|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator_def|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.intro|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator_def|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator_def|axiom"><span>locale</span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator|locale"><span class="entity_def" id="Sorting_Setup.random_access_iterator|const"><span class="entity_def" id="offset_36519..36541">random_access_iterator</span></span></span><span> </span><span class="main"><span>=</span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>wo_assn</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>eo_assn</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>elem_assn</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>to_eo_impl</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>to_wo_impl</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>extract_impl</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'size</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_More_Word_Lemmas.html#LLVM_More_Word_Lemmas.len2|class"><span>len2</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'oi</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>set_impl</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'size</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span>
          </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_eo_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_eo_hnr|thm"><span class="entity_def" id="offset_36912..36921">to_eo_hnr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>to_eo_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>eo_assn</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="bound"><span>ai</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>ai</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span> 
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_wo_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_wo_hnr|thm"><span class="entity_def" id="offset_37018..37027">to_wo_hnr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>to_wo_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>wo_assn</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="bound"><span>ai</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>ai</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_hnr_aux|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_hnr_aux|thm"><span class="entity_def" id="offset_37123..37141">eo_extract_hnr_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="free"><span>extract_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>elem_assn</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="bound"><span>ai</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>ai</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
      </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_hnr_aux|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_hnr_aux|thm"><span class="entity_def" id="offset_37293..37307">eo_set_hnr_aux</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span>set_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>ai</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>ai</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
      
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Combinator_Setup.html#Sepref_Combinator_Setup.sepref_register_adhoc|attribute"><span class="operator"><span>sepref_register_adhoc</span></span></a><span> </span><span class="quoted"><span class="free"><span>to_eo_impl</span></span></span><span> </span><span class="quoted"><span class="free"><span>to_wo_impl</span></span></span><span> </span><span class="quoted"><span class="free"><span>extract_impl</span></span></span><span> </span><span class="quoted"><span class="free"><span>set_impl</span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_simps|attribute"><span class="operator"><span>fcomp_norm_simps</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel_id_simp|fact"><span>option_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_id|fact"><span>list_rel_id</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_id_simp|fact"><span>prod_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hrr_comp_id_conv|fact"><span>hrr_comp_id_conv</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>  

  </span><span class="keyword2"><span class="keyword"><span>private</span></span></span><span> </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.random_access_iterator.rl_mono.rl_mono|method"><span>method</span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.rl_mono|method"><span>rl_mono</span></span><span> </span><span class="main"><span>=</span></span><span> 
    </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfref_cons|fact"><span>hfref_cons</span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> 
      </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span class="main"><span class="keyword3"><span>;</span></span></span><span> 
      </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Refine_Util.html#Refine_Util.clarsimp_all|method"><span class="operator"><span>clarsimp_all</span></span></a><span> </span><span class="quasi_keyword"><span>simp</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sep_Algebra_Add.html#Sep_Algebra_Add.sep_algebra_simps|fact"><span class="dynamic"><span class="dynamic"><span>sep_algebra_simps</span></span></span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Frame_Infer.html#Frame_Infer.entails_lift_extract_simps|fact"><span>entails_lift_extract_simps</span></a><span class="main"><span>)</span></span><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_nodep_hnr_aux|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_nodep_hnr_aux|thm"><span class="entity_def" id="offset_37798..37822">eo_extract_nodep_hnr_aux</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><span class="free"><span>extract_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Misc.html#Misc.uncurry|const"><span>uncurry</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_extract|const"><span>mop_eo_extract</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.prod_assn|const"><span>×<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37123..37141"><span>eo_extract_hnr_aux</span></a><span> 
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.random_access_iterator.rl_mono|method"><span class="operator"><span>rl_mono</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_nodep_hnr_aux|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_nodep_hnr_aux|thm"><span class="entity_def" id="offset_37986..38006">eo_set_nodep_hnr_aux</span></span></span><span class="main"><span>:</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span>set_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_eo_set|const"><span>mop_eo_set</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn|const"><span>snat_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37293..37307"><span>eo_set_hnr_aux</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.random_access_iterator.rl_mono|method"><span class="operator"><span>rl_mono</span></span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_36912..36921"><span>to_eo_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37018..37027"><span>to_wo_hnr</span></a><span>
    
  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_eo_nodep_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_eo_nodep_hnr|thm"><span class="entity_def" id="offset_38219..38234">to_eo_nodep_hnr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>to_eo_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_eo_conv|const"><span>mop_to_eo_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_36912..36921"><span>to_eo_hnr</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.random_access_iterator.rl_mono|method"><span class="operator"><span>rl_mono</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_wo_nodep_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.to_wo_nodep_hnr|thm"><span class="entity_def" id="offset_38335..38350">to_wo_nodep_hnr</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="free"><span>to_wo_impl</span></span><span class="main"><span>,</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.mop_to_wo_conv|const"><span>mop_to_wo_conv</span></a><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>using</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37018..37027"><span>to_wo_hnr</span></a><span>
    </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.random_access_iterator.rl_mono|method"><span class="operator"><span>rl_mono</span></span></a><span>
  
        
    
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_hnr_mop|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_hnr|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_hnr_mop|thm"><span class="entity_def" id="offset_38486..38496">eo_extract</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37123..37141"><span>eo_extract_hnr_aux</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>,</span></span><span>no_register</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_nodep_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_nodep_hnr_mop|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_nodep_hnr|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_extract_nodep_hnr_mop|thm"><span class="entity_def" id="offset_38558..38574">eo_extract_nodep</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37798..37822"><span>eo_extract_nodep_hnr_aux</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_hnr_mop|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_hnr|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_hnr_mop|thm"><span class="entity_def" id="offset_38633..38639">eo_set</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37293..37307"><span>eo_set_hnr_aux</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>,</span></span><span>no_register</span><span class="main"><span>)</span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_nodep_hnr|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_nodep_hnr_mop|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_nodep_hnr|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_set_nodep_hnr_mop|thm"><span class="entity_def" id="offset_38697..38709">eo_set_nodep</span></span></span></span></span><span class="main"><span>:</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37986..38006"><span>eo_set_nodep_hnr_aux</span></a><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>
        
    
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep(6)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep(5)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep(4)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep(3)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep(2)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_dep(1)|thm"><span class="entity_def" id="offset_38757..38767">eo_hnr_dep</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.eo_extract_dep_hnr|fact"><span>eo_extract_dep_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38486..38496"><span>eo_extract_hnr_mop</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38633..38639"><span>eo_set_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38633..38639"><span>eo_set_hnr_mop</span></a><span> 
    </span><a class="entity_ref" href="Sorting_Setup.html#offset_36912..36921"><span>to_eo_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_37018..37027"><span>to_wo_hnr</span></a><span>
  </span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep(6)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep(5)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep(4)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep(3)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep(2)|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.eo_hnr_nodep(1)|thm"><span>eo_hnr_nodep</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38558..38574"><span>eo_extract_nodep_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38558..38574"><span>eo_extract_nodep_hnr_mop</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38697..38709"><span>eo_set_nodep_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38697..38709"><span>eo_set_nodep_hnr_mop</span></a><span>
    </span><a class="entity_ref" href="Sorting_Setup.html#offset_38219..38234"><span>to_eo_nodep_hnr</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38335..38350"><span>to_wo_nodep_hnr</span></a><span>
    
    
  </span><span class="keyword1"><span class="command"><span>sepref_definition</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux.cong|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux.cong|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux|const"><span>swap_eo_impl_aux</span></span></span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.swap_eo|const"><span>swap_eo</span></a><span>"</span></span></span><span> 
    </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.True|const"><span>True</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfdrop|const"><span><span class="hidden">⇧</span><sup>d</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'size</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.snat_assn&apos;|const"><span>snat_assn'</span></a><span> </span><span class="keyword1"><span>TYPE</span></span><span class="main"><span>(</span></span><span class="tfree"><span>'size</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>→</span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span> </span><span class="main"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>[</span></a></span><span class="main"><span>λ</span></span><span class="main"><span>(</span></span><span class="main"><span>(</span></span><span class="bound"><span>xsi</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><span>.</span></span><span> </span><span class="bound"><span>r</span></span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span class="bound"><span>xsi</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefptnd|const"><span>]<span class="hidden">⇩</span><sub>c</sub></span></a></span><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.swap_eo_def|fact"><span>swap_eo_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux.refine|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux_def|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux.refine|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux_def|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.random_access_iterator.swap_eo_impl_aux_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>    
    
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.swap_eo_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.swap_eo_impl_def|fact"><span class="entity_def" id="Sorting_Setup.swap_eo_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.swap_eo_impl_def|thm"><span class="entity_def" id="Sorting_Setup.swap_eo_impl_def_raw|axiom"><span class="entity_def" id="offset_39261..39280">concrete_definition</span></span></span></span></span></span></span></span><span> </span><span class="main"><span>(</span></span><span class="keyword2"><span class="keyword"><span>in</span></span></span><span> -</span><span class="main"><span>)</span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.swap_eo_impl|const"><span>swap_eo_impl</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.random_access_iterator.swap_eo_impl_aux_def|fact"><span>random_access_iterator.swap_eo_impl_aux_def</span></a><span>
  
</span><span class="keyword1"><span class="command"><span>context</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.fcomp_norm_simps|attribute"><span class="operator"><span>fcomp_norm_simps</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.option_rel_id_simp|fact"><span>option_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.list_rel_id|fact"><span>list_rel_id</span></a><span> </span><a class="entity_ref" href="../../AFP/Automatic_Refinement/Relators.html#Relators.prod_rel_id_simp|fact"><span>prod_rel_id_simp</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hrr_comp_id_conv|fact"><span>hrr_comp_id_conv</span></a><span>
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>sepref_decl_impl</span></span></span><span> </span><span class="main"><span>(</span></span><span>ismop</span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_39261..39280"><span>swap_eo_impl_aux.refine</span></a><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.FCOMP|attribute"><span class="operator"><span>FCOMP</span></span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Proto_IICF_EOArray.html#Proto_IICF_EOArray.swap_eo_refine|fact"><span>swap_eo_refine</span></a><span class="main"><span>,</span></span><span> </span><span class="operator"><span>unfolded</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.swap_eo_impl.refine|fact"><span>swap_eo_impl.refine</span></a><span class="main"><span class="main"><span>[</span></span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_36519..36541"><span>random_access_iterator_axioms</span></a><span class="main"><span class="main"><span>]</span></span></span><span class="main"><span>]</span></span><span>
     </span><span class="keyword2"><span class="keyword"><span>uses</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_List.html#IICF_List.mop_list_swap.fref|fact"><span>mop_list_swap.fref</span></a><span class="main"><span>[</span></span><span class="keyword2"><span class="keyword"><a class="entity_ref" href="../../AFP/Automatic_Refinement/ISABELLE_HOME/src/HOL/Eisbach/eisbach_rule_insts.ML.html#Eisbach.where|attribute"><span class="operator"><span>where</span></span></a></span></span><span> A</span><span class="main"><span class="main"><span>=</span></span></span><span class="quoted"><a class="entity_ref" href="../../HOL/HOL/Relation.html#Relation.Id|const"><span>Id</span></a></span><span class="main"><span>]</span></span><span> </span><span class="keyword1"><span class="command"><span>.</span></span></span><span>

</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>     
       
</span><span class="comment1"><span>(*  sepref_decl_impl (ismop) swap_eo_impl.refine[FCOMP swap_eo_refine] uses mop_list_swap.fref[where A=Id] .*)</span></span><span>
    
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.refines_param_relp_def|fact"><span class="entity_def" id="Sorting_Setup.refines_param_relp_def|thm"><span class="entity_def" id="Sorting_Setup.refines_param_relp_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.refines_param_relp|const"><span>refines_param_relp</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>Rimpl</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>Rimpl</span></span></span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>R</span></span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>P</span></span></span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span class="bound"><span class="entity"><span>A</span></span></span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.gen_refines_param_relpD|fact"><span class="entity_def" id="Sorting_Setup.gen_refines_param_relpD|thm"><span>gen_refines_param_relpD</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>Rimpl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_param_relp|const"><span>refines_param_relp</span></a><span> </span><span class="free"><span>P</span></span><span> </span><span class="free"><span>A</span></span><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> 
  </span><span class="main"><span>⟹</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span>Rimpl</span></span><span class="main"><span>,</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry2|const"><span>uncurry2</span></a><span> </span><span class="free"><span>R</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Set.html#Set.member|const"><span>∈</span></a></span><span> </span><span class="free"><span>P</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span class="free"><span>A</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><span class="operator"><span>simp</span></span><span> </span><span class="quasi_keyword"><span>add</span></span><span class="main"><span class="main"><span>:</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO_def|fact"><span>GEN_ALGO_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_param_relp_def|fact"><span>refines_param_relp_def</span></a><span class="main"><span>)</span></span><span>


</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.axioms|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.intro|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_axioms.intro|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_axioms_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.axioms(3)|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.axioms(2)|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.axioms(1)|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.intro|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_axioms.intro|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_axioms_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_def|axiom"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_axioms_def|axiom"><span class="entity_def" id="offset_40099..40105">locale</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context|locale"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context|const"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context_axioms|const"><span>parameterized_sort_impl_context</span></span></span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.random_access_iterator|locale"><span>random_access_iterator</span></a><span> </span><span class="main"><span>+</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.parameterized_weak_ordering|locale"><span>parameterized_weak_ordering</span></a><span> </span><span class="main"><span>+</span></span><span> 
  </span><span class="keyword2"><span class="keyword"><span>constrains</span></span></span><span> </span><span class="quoted"><span>"cdom"</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparam</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>_</span></span><span>"</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> pless </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="main"><span>_</span></span></span><span> </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> pcmp </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparam</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.bool|type"><span>bool</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/Refine_Basic.html#Refine_Basic.nres|type"><span>nres</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> elem_assn </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> wo_assn </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> eo_assn </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Option.html#Option.option|type"><span>option</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/List.html#List.list|type"><span>list</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> elem_assn </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'a</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Shallow.html#LLVM_Shallow.llvm_rep|class"><span>llvm_rep</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> to_eo_impl </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> to_wo_impl </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> extract_impl </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_t|type"><span>size_t</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod|type"><span>×</span></a></span><span> </span><span class="tfree"><span>'oi</span></span><span class="main"><span>)</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> set_impl </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'oi</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_t|type"><span>size_t</span></a><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'oi</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    
  </span><span class="keyword2"><span class="keyword"><span>fixes</span></span></span><span> </span><span class="free"><span>pcmp_impl</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparami</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'ai</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>1</span></span><span> </span><a class="entity_ref" href="../../AFP/Refine_Monadic/HOL-Library.Word.html#Word.word|type"><span>word</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Simple_Memory.html#Simple_Memory.llM|type"><span>llM</span></a><span>"</span></span></span><span>
    </span><span class="keyword2"><span class="keyword"><span>and</span></span></span><span> </span><span class="free"><span>cparam_assn</span></span><span> </span><span class="main"><span>::</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="tfree"><span>'cparam</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="tfree"><span>'cparami</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Basic.html#Sepref_Basic.assn|type"><span>assn</span></a><span>"</span></span></span><span>
    
  </span><span class="keyword2"><span class="keyword"><span>assumes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.lt_impl|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.lt_impl|thm"><span class="entity_def" id="offset_40813..40820">lt_impl</span></span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.GEN_ALGO|const"><span>GEN_ALGO</span></a><span> </span><span class="free"><span>pcmp_impl</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.refines_param_relp|const"><span>refines_param_relp</span></a><span> </span><span class="free"><span>cparam_assn</span></span><span> </span><span class="free"><span>elem_assn</span></span><span> </span><span class="free"><span>pcmp</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_aux_hnr|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_aux_hnr|thm"><span class="entity_def" id="offset_40899..40911">pcmp_aux_hnr</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.gen_refines_param_relpD|fact"><span>gen_refines_param_relpD</span></a><span class="main"><span>[</span></span><span class="operator"><span>OF</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40813..40820"><span>lt_impl</span></a><span class="main"><span>]</span></span><span>
  
  </span><span class="keyword2"><span class="keyword"><span>notes</span></span></span><span> </span><span class="main"><span>[</span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Combinator_Setup.html#Sepref_Combinator_Setup.sepref_register_adhoc|attribute"><span class="operator"><span>sepref_register_adhoc</span></span></a><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>pcmp</span></span><span>"</span></span></span><span class="main"><span>]</span></span><span class="main"><span>]</span></span><span>
  
</span><span class="keyword2"><span class="keyword"><span>begin</span></span></span><span>

  </span><span class="keyword1"><span class="command"><span>thm</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40899..40911"><span>pcmp_aux_hnr</span></a><span>
  
  </span><span class="keyword1"><span class="command"><span>term</span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Sorting_Setup.html#offset_28874..28886"><span>pcmpo_v_idx2</span></a></span><span>
  
  </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.mcomb|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.arity|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.itype|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.pat|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.mcomb|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.arity|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.itype|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.pat|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.mcomb|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.arity|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.itype|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.pat|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.mcomb|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.arity|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.itype|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.pat|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.mcomb|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.arity|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.itype|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs2.pat|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.mcomb|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.arity|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.itype|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v2.pat|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.mcomb|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.arity|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.itype|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx2.pat|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.mcomb|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.arity|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.itype|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs2.pat|thm"><span>sepref_register</span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span></span><span> </span><span class="quoted"><a class="entity_ref" href="Sorting_Setup.html#offset_28488..28499"><span>pcmpo_idxs2</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Sorting_Setup.html#offset_28874..28886"><span>pcmpo_v_idx2</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Sorting_Setup.html#offset_29058..29070"><span>pcmpo_idx_v2</span></a></span><span> </span><span class="quoted"><a class="entity_ref" href="Sorting_Setup.html#offset_29242..29252"><span>pcmp_idxs2</span></a></span><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl|const"><span>pcmpo_idxs_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28488..28499"><span>pcmpo_idxs2</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cparam_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40099..40105"><span>pcmpo_idxs2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38757..38767"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idxs_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
    
  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl|const"><span>pcmpo_v_idx_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_28874..28886"><span>pcmpo_v_idx2</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cparam_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40099..40105"><span>pcmpo_v_idx2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38757..38767"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_v_idx_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl|const"><span>pcmpo_idx_v_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29058..29070"><span>pcmpo_idx_v2</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cparam_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>eo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40099..40105"><span>pcmpo_idx_v2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38757..38767"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmpo_idx_v_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl|const"><span>pcmp_idxs_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29242..29252"><span>pcmp_idxs2</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cparam_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40099..40105"><span>pcmp_idxs2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38757..38767"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idxs_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>


  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl|const"><span>pcmp_v_idx_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29616..29627"><span>pcmp_v_idx2</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cparam_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40099..40105"><span>pcmp_v_idx2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38757..38767"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_v_idx_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>

  </span><span class="keyword1"><span class="command"><span>sepref_def</span></span></span><span> </span><span class="entity"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl.cong|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl.cong|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl|const"><span>pcmp_idx_v_impl</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span> </span><span class="keyword2"><span class="keyword"><span>is</span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Misc.html#Sepref_Misc.uncurry3|const"><span>uncurry3</span></a><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST|const"><span>PR_CONST</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_29427..29438"><span>pcmp_idx_v2</span></a><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="main"><span>::</span></span><span> 
    </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span>cparam_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>wo_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.size_assn|const"><span>size_assn</span></a><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfprod|const"><span>*<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><span class="free"><span>elem_assn</span></span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfkeep|const"><span><span class="hidden">⇧</span><sup>k</sup></span></a></span><span> </span><span class="keyword1"><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Rules.html#Sepref_Rules.hfrefttnd|const"><span>→<span class="hidden">⇩</span><sub>a</sub></span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_HOL_Bindings.html#Sepref_HOL_Bindings.bool1_assn|const"><span>bool1_assn</span></a><span>"</span></span></span><span>
    </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_40099..40105"><span>pcmp_idx_v2_def</span></a><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Id_Op.html#Sepref_Id_Op.PR_CONST_def|fact"><span>PR_CONST_def</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>supply</span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Translate.html#Sepref_Translate.sepref_fr_rules|attribute"><span class="operator"><span>sepref_fr_rules</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#offset_38757..38767"><span>eo_hnr_dep</span></a><span>
    </span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl.refine|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl_def|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl.refine_raw|fact"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl.refine|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl_def|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl.refine_raw|thm"><span class="entity_def" id="Sorting_Setup.parameterized_sort_impl_context.pcmp_idx_v_impl_def_raw|axiom"><span>by</span></span></span></span></span></span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref|method"><span class="operator"><span>sepref</span></span></a><span>
    
    
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>  

</span><span class="keyword1"><span class="command"><span>subsection</span></span></span><span> </span><span class="quoted"><span class="plain_text"><span>‹Additional Setup for Code Generation›</span></span></span><span>

</span><span class="comment1"><span>(*
  The LLVM code generator cannot handle unit-valued variables (they do not exist in LLVM).
  However, they occur for some higher-order constructs, like with-split or with-idxs, when
  only the lists are modified, but the returned result is unit.
  
  The following setup is an ad-hoc solution to set up sepref to optimize those away.
  
  TODO: Ultimately, we could do that in Isabelle-LLVMs preprocessor!
*)</span></span><span>


</span><span class="comment1"><span>(* TODO: Move *)</span></span><span>
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.map_res_def|fact"><span class="entity_def" id="Sorting_Setup.map_res_def|thm"><span class="entity_def" id="Sorting_Setup.map_res_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.map_res|const"><span>map_res</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span class="bound"><span class="entity"><span>f</span></span></span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.map_res_return|fact"><span class="entity_def" id="Sorting_Setup.map_res_return|thm"><span>map_res_return</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps2|attribute"><span class="operator"><span>sepref_opt_simps2</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>φ</span></span><span> </span><span class="free"><span>x</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res_def|fact"><span>map_res_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.map_res_bind|fact"><span class="entity_def" id="Sorting_Setup.map_res_bind|thm"><span>map_res_bind</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps2|attribute"><span class="operator"><span>sepref_opt_simps2</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>m</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>}</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span class="bound"><span>x</span></span><span class="main"><span>←</span></span><span class="free"><span>m</span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>x</span></span><span class="main"><span>)</span></span><span class="main"><span>}</span></span><span>"</span></span></span><span>  
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res_def|fact"><span>map_res_def</span></a><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/clasimp.ML.html#HOL.auto|method"><span class="operator"><span>auto</span></span></a><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.map_res_prod_case|fact"><span class="entity_def" id="Sorting_Setup.map_res_prod_case|thm"><span>map_res_prod_case</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps2|attribute"><span class="operator"><span>sepref_opt_simps2</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>p</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><span class="free"><span>φ</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>f</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> 
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="main"><span>(</span></span><a class="entity_ref" href="../../HOL/HOL/ISABELLE_HOME/src/Provers/classical.ML.html#HOL.rule|method"><span class="operator"><span>rule</span></span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.case_distrib|fact"><span>prod.case_distrib</span></a><span class="main"><span>)</span></span><span>

</span><span class="keyword1"><span class="command"><span>lemmas</span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps2|attribute"><span class="operator"><span>sepref_opt_simps2</span></span></a><span class="main"><span>]</span></span><span> </span><span class="main"><span>=</span></span><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.sel|fact"><span>prod.sel</span></a><span>  
  
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.ars_with_split_nores_def|fact"><span class="entity_def" id="Sorting_Setup.ars_with_split_nores_def|thm"><span class="entity_def" id="Sorting_Setup.ars_with_split_nores_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.ars_with_split_nores|const"><span>ars_with_split_nores</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="main"><span>(</span></span><span class="bound"><span>a<span class="hidden">⇩</span><sub>1</sub></span></span><span class="main"><span>,</span></span><span class="bound"><span>a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.ars_split|const"><span>ars_split</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>i</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span class="main"><span>;</span></span><span>
  </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="bound"><span>a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.ars_join|const"><span>ars_join</span></a><span> </span><span class="bound"><span>a<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>a<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>;</span></span><span>
  </span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>a</span></span></span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>


</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.ars_with_split_bind_unit|fact"><span class="entity_def" id="Sorting_Setup.ars_with_split_bind_unit|thm"><span>ars_with_split_bind_unit</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps2|attribute"><span class="operator"><span>sepref_opt_simps2</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="main"><span>(</span></span><span class="bound"><span>uu</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.ars_with_split|const"><span>ars_with_split</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>;</span></span><span>
  </span><span class="free"><span>mm</span></span><span> </span><span class="bound"><span>uu</span></span><span> </span><span class="bound"><span>xs</span></span><span>
</span><span class="main"><span>}</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span>
  </span><span class="bound"><span>xs</span></span><span class="main"><span>←</span></span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ars_with_split_nores|const"><span>ars_with_split_nores</span></a><span> </span><span class="free"><span>i</span></span><span> </span><span class="free"><span>a</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs1</span></span><span> </span><span class="bound"><span>xs2</span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>xs1</span></span><span> </span><span class="bound"><span>xs2</span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span>
  </span><span class="free"><span>mm</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="bound"><span>xs</span></span><span>
</span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/IICF_Array.html#IICF_Array.ars_with_split_def|fact"><span>ars_with_split_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.ars_with_split_nores_def|fact"><span>ars_with_split_nores_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res_def|fact"><span>map_res_def</span></a><span> 
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>apply</span></span></span></span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/NEMonad.html#NEMonad.pw|method"><span class="operator"><span>pw</span></span></a><span>
  </span><span class="keyword1"><span class="command"><span class="improper"><span class="command"><span>done</span></span></span></span></span><span>
  
</span><span class="keyword1"><span class="command"><span class="entity_def" id="Sorting_Setup.oidxs_with_idxs&apos;_nores_def|fact"><span class="entity_def" id="Sorting_Setup.oidxs_with_idxs&apos;_nores_def|thm"><span class="entity_def" id="Sorting_Setup.oidxs_with_idxs&apos;_nores_def_raw|axiom"><span>definition</span></span></span></span></span></span><span> </span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/LLVM_Codegen_Preproc.html#LLVM_Codegen_Preproc.llvm_inline|attribute"><span class="operator"><span>llvm_inline</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> </span><span class="quoted"><span class="quoted"><span>"</span><span class="free"><span class="entity_def" id="Sorting_Setup.oidxs_with_idxs&apos;_nores|const"><span>oidxs_with_idxs'_nores</span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="main"><span>≡</span></span><span> </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>,</span></span><span class="main"><span class="bound"><span>_</span></span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>m</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span class="main"><span>;</span></span><span> </span><a class="entity_ref" href="../Isabelle_LLVM/MMonad.html#MMonad.Mreturn|const"><span>Mreturn</span></a><span> </span><span class="free"><span class="bound"><span class="entity"><span>p</span></span></span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>

</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.oidxs_with_idxs&apos;_bind_unit|fact"><span class="entity_def" id="Sorting_Setup.oidxs_with_idxs&apos;_bind_unit|thm"><span>oidxs_with_idxs'_bind_unit</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps2|attribute"><span class="operator"><span>sepref_opt_simps2</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span> 
  </span><span class="quoted"><span class="quoted"><span>" </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>uu</span></span><span class="main"><span>::</span></span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.unit|type"><span>unit</span></a><span class="main"><span>,</span></span><span class="bound"><span>xs</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="IICF_DS_Array_Idxs.html#IICF_DS_Array_Idxs.oidxs_with_idxs&apos;|const"><span>oidxs_with_idxs'</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="free"><span>m</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>mm</span></span><span> </span><span class="bound"><span>uu</span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>}</span></span><span>
  </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="keyword1"><span>doM</span></span><span> </span><span class="main"><span>{</span></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>←</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.oidxs_with_idxs&apos;_nores|const"><span>oidxs_with_idxs'_nores</span></a><span> </span><span class="free"><span>p</span></span><span> </span><span class="main"><span>(</span></span><span class="main"><span>λ</span></span><span class="bound"><span>xs<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>xs<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>.</span></span><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res|const"><span>map_res</span></a><span> </span><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.prod.snd|const"><span>snd</span></a><span> </span><span class="main"><span>(</span></span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>xs<span class="hidden">⇩</span><sub>1</sub></span></span><span> </span><span class="bound"><span>xs<span class="hidden">⇩</span><sub>2</sub></span></span><span class="main"><span>)</span></span><span class="main"><span>)</span></span><span class="main"><span>;</span></span><span> </span><span class="free"><span>mm</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/Product_Type.html#Product_Type.Unity|const"><span>()</span></a></span><span> </span><span class="bound"><span>xs</span></span><span> </span><span class="main"><span>}</span></span><span>"</span></span></span><span>
  </span><span class="keyword1"><span class="command"><span>unfolding</span></span></span><span> </span><a class="entity_ref" href="IICF_DS_Array_Idxs.html#IICF_DS_Array_Idxs.oidxs_with_idxs&apos;_def|fact"><span>oidxs_with_idxs'_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.oidxs_with_idxs&apos;_nores_def|fact"><span>oidxs_with_idxs'_nores_def</span></a><span> </span><a class="entity_ref" href="Sorting_Setup.html#Sorting_Setup.map_res_def|fact"><span>map_res_def</span></a><span>
  </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>
    
    
  
    
  
</span><span class="keyword1"><span class="command"><span>lemma</span></span></span><span> </span><span class="entity_def" id="Sorting_Setup.sepref_adhoc_opt_case_add_const|fact"><span class="entity_def" id="Sorting_Setup.sepref_adhoc_opt_case_add_const|thm"><span>sepref_adhoc_opt_case_add_const</span></span></span><span class="main"><span>[</span></span><a class="entity_ref" href="../Isabelle_LLVM/Sepref_Tool.html#Sepref_Tool.sepref_opt_simps|attribute"><span class="operator"><span>sepref_opt_simps</span></span></a><span class="main"><span>]</span></span><span class="main"><span>:</span></span><span>
  </span><span class="quoted"><span class="quoted"><span>"</span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a1c</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a2c</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="main"><span>(</span></span><span class="free"><span>c</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a1c</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a2c</span></span><span class="main"><span>)</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>uu</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="bound"><span>uu</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><a class="entity_ref" href="../../HOL/HOL/HOL.html#HOL.eq|const"><span>=</span></a></span><span> </span><span class="main"><span>(</span></span><span class="keyword1"><span>case</span></span><span> </span><span class="free"><span>x</span></span><span> </span><span class="keyword1"><span>of</span></span><span> </span><span class="main"><span>(</span></span><span class="bound"><span>a</span></span><span class="main"><span>,</span></span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span> </span><span class="main"><span>⇒</span></span><span> </span><span class="free"><span>m</span></span><span> </span><span class="free"><span>c</span></span><span> </span><span class="bound"><span>a</span></span><span> </span><span class="bound"><span>b</span></span><span class="main"><span>)</span></span><span>"</span></span></span><span> </span><span class="keyword1"><span class="command"><span>by</span></span></span><span> </span><span class="operator"><span>simp</span></span><span>

  
  
</span><span class="keyword2"><span class="keyword"><span>end</span></span></span><span>
</span></pre>
</body>

</html>